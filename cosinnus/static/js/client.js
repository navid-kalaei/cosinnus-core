!function(t){function e(o){if(n[o])return n[o].exports;var s=n[o]={exports:{},id:o,loaded:!1};return t[o].call(s.exports,s,s.exports,e),s.loaded=!0,s.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){"use strict";var o=n(1),s=n(13),a=n(5),r=n(14),i=n(2),l=n(28),u=n(37),c=n(49),p=n(51),d=n(53),m=n(57),f=function(){var t=this;t.el=null,t.$el=null,t.contentViews=[],t.controlView=null,t.tileListView=null,t.mapView=null,t.tileDetailView=null,t.navbarQuickSearchView=null,t.navbarMainMenuView=null,t.navbarNotificationWidget=null,t.userDashboardView=null,t.router=null,t.mediator=null,t.defaultSettings={},t.defaultDisplayOptions={showMap:!0,showTiles:!0,showControls:!0,fullscreen:!0,routeNavigation:!0,forcePaginationControlsEnabled:!1},t.displayOptions={},t.defaultEl="#app-fullscreen",t.defaultBasePageUrl="/map/",t.passedOptions=null,t.settings=null,t.start=function(){t.mediator=Backbone.mediator=s,t.mediator.settings=window.settings||{};var e,n=function(){Backbone.mediator.publish("resize:window")};return $(window).on("resize",function(){clearTimeout(e),e=setTimeout(n,500)}),Backbone.mediator.subscribe("init:module-full-routed",t.initModuleFullRouted,t),Backbone.mediator.subscribe("init:module-embed",t.initAppFromOptions,t),Backbone.mediator.subscribe("init:module-navbar-quicksearch",t.initNavbarQuicksearchFromOptions,t),Backbone.mediator.subscribe("init:module-navbar-main-menu",t.initNavbarMainMenuFromOptions,t),Backbone.mediator.subscribe("init:module-navbar-notification-widget",t.initNavbarNotificationWidgetFromOptions,t),Backbone.mediator.subscribe("init:module-user-dashboard",t.initUserDashboardFromOptions,t),a.log('app.js: finish start() and publishing "init:client"'),Backbone.mediator.publish("init:client"),$("html").trigger("init:client"),t},t.initModuleFullRouted=function(e){t.passedOptions=e,t.router=new o,Backbone.mediator.subscribe("navigate:map",t.navigate_map,t),Backbone.mediator.subscribe("navigate:router",t.router.on_navigate,t),a.log("app.js: init routing");var n=e.basePageUrl||t.defaultBasePageUrl;Backbone.history.start({pushState:!0,root:n})},t.navigate_map=function(e){null==t.controlView?t.initAppFromOptions(t.passedOptions):Backbone.mediator.publish("app:stale-results",{reason:"map-navigate"})},t.initAppFromOptions=function(e){var n=e.el?e.el:t.defaultEl,o=$.extend(!0,{},t.defaultDisplayOptions,e.display||{}),s=$.extend(!0,{},t.defaultSettings,e.settings||{}),a=e.basePageUrl||t.defaultBasePageUrl;t.init_app(n,a,s,o)},t.init_app=function(e,n,o,s){a.log("app.js: init_app called with event, params"),t.el=e,t.$el=$(t.el),t.settings=o,t.displayOptions=s;var i="undefined"!=typeof COSINNUS_MAP_TOPICS_JSON?COSINNUS_MAP_TOPICS_JSON:{},l="undefined"!=typeof COSINNUS_MAP_TEXT_TOPICS_JSON?COSINNUS_MAP_TEXT_TOPICS_JSON:{},c="undefined"!=typeof COSINNUS_MAP_SDGS_JSON?COSINNUS_MAP_SDGS_JSON:{},p="undefined"!=typeof COSINNUS_MANAGED_TAGS_JSON?COSINNUS_MANAGED_TAGS_JSON:{},d="undefined"!=typeof COSINNUS_MANAGED_TAGS_SHOW_FILTER_ON_MAP_WHEN_CONTENT_TYPE_SELECTED?COSINNUS_MANAGED_TAGS_SHOW_FILTER_ON_MAP_WHEN_CONTENT_TYPE_SELECTED:[],m="undefined"!=typeof COSINNUS_TEXT_TOPICS_SHOW_FILTER_ON_MAP_WHEN_CONTENT_TYPE_SELECTED?COSINNUS_TEXT_TOPICS_SHOW_FILTER_ON_MAP_WHEN_CONTENT_TYPE_SELECTED:[],f="undefined"!=typeof COSINNUS_MANAGED_TAGS_LABELS_JSON?COSINNUS_MANAGED_TAGS_LABELS_JSON:{},h="undefined"!=typeof COSINNUS_PORTAL_INFOS?COSINNUS_PORTAL_INFOS:{};t.controlView=new r({el:null,availableFilters:t.settings.availableFilters,activeFilters:t.settings.activeFilters,allTopics:i,allTextTopics:l,allSDGS:c,allManagedTags:p,managedTagsLabels:f,showManagedTagsOnTypesSelected:d,showTextTopicsOnTypesSelected:m,portalInfo:h,controlsEnabled:t.displayOptions.showControls,scrollControlsEnabled:t.displayOptions.showControls&&t.displayOptions.showMap,paginationControlsEnabled:t.displayOptions.forcePaginationControlsEnabled||t.displayOptions.showTiles,paginationControlsUseInfiniteScroll:!t.displayOptions.showMap&&t.displayOptions.showTiles,filterGroup:t.settings.filterGroup,filterManagedTag:t.settings.filterManagedTag,basePageURL:n,showMine:t.settings.showMine,fullscreen:t.displayOptions.fullscreen,splitscreen:t.displayOptions.showMap&&t.displayOptions.showTiles,searchResultLimit:t.settings.searchResultLimit||20,hideTopics:t.settings.hideTopics||!1},t,null),t.contentViews.push(t.controlView),a.log("app.js: TODO: really do this if check for controlsEnabled?"),a.log(t.displayOptions),t.loadMapView(),t.loadTileView(),t.tileDetailView=new u({model:null,elParent:t.el,fullscreen:t.displayOptions.fullscreen,splitscreen:t.displayOptions.showMap&&t.displayOptions.showTiles},t).render(),Backbone.mediator.publish("app:ready")},t.loadMapView=function(){if(null==t.mapView){if(t.displayOptions.showMap){var e={elParent:t.el,fullscreen:t.displayOptions.fullscreen,splitscreen:t.displayOptions.showMap&&t.displayOptions.showTiles,controlsEnabled:t.displayOptions.showControls,mobileSafeInteractions:t.settings&&t.settings.mobileSafeInteractions};t.settings.map&&t.settings.map.location&&(e.location=t.settings.map.location),t.settings.map&&t.settings.map.zoom&&(e.zoom=t.settings.map.zoom),t.mapView=new i(e,t,t.controlView.collection).render(),t.contentViews.push(t.mapView)}}else t.displayOptions.showMap?(t.mapView.options.fullscreen=t.displayOptions.fullscreen,t.mapView.options.splitscreen=t.displayOptions.showMap&&t.displayOptions.showTiles,t.mapView.reload()):t.mapView.hide()},t.loadTileView=function(){null==t.tileListView?t.displayOptions.showTiles&&(t.tileListView=new l({elParent:t.el,fullscreen:t.displayOptions.fullscreen,splitscreen:t.displayOptions.showMap&&t.displayOptions.showTiles},t,t.controlView.collection).render(),t.contentViews.push(t.tileListView),t.displayOptions.showControls&&(a.log("app.js: actually rendering controls"),t.controlView.setElement(t.tileListView.$el.find(".controls")),t.controlView.render())):t.displayOptions.showTiles?(t.tileListView.options.fullscreen=t.displayOptions.fullscreen,t.tileListView.options.splitscreen=t.displayOptions.showMap&&t.displayOptions.showTiles,t.tileListView.reload()):t.tileListView.hide()},t.initNavbarQuicksearchFromOptions=function(e){var n=e.el?e.el:"#nav-quicksearch",o="undefined"!=typeof COSINNUS_MAP_TOPICS_JSON?COSINNUS_MAP_TOPICS_JSON:{},s="undefined"!=typeof COSINNUS_MAP_TEXT_TOPICS_JSON?COSINNUS_MAP_TEXT_TOPICS_JSON:{},a="undefined"!=typeof COSINNUS_MAP_SDGS_JSON?COSINNUS_MAP_SDGS_JSON:{},r="undefined"!=typeof COSINNUS_PORTAL_INFOS?COSINNUS_PORTAL_INFOS:{},i=COSINNUS_CLOUD_ENABLED||!1;null==t.navbarQuickSearchView&&(t.navbarQuickSearchView=new c({model:null,el:n,topicsJson:o,textTopicsJson:s,sdgsJson:a,portalInfo:r,cloudEnabled:i,placeholder:e.placeholder},t).render(),Backbone.mediator.publish("navbar-quicksearch:ready"))},t.initNavbarMainMenuFromOptions=function(e){var n=e.el?e.el:"#nav-main-menu",o="undefined"!=typeof COSINNUS_MAP_TOPICS_JSON?COSINNUS_MAP_TOPICS_JSON:{},s="undefined"!=typeof COSINNUS_MAP_TEXT_TOPICS_JSON?COSINNUS_MAP_TEXT_TOPICS_JSON:{},a="undefined"!=typeof COSINNUS_MAP_SDGS_JSON?COSINNUS_MAP_SDGS_JSON:{},r="undefined"!=typeof COSINNUS_PORTAL_INFOS?COSINNUS_PORTAL_INFOS:{},i=e.contextData?e.contextData:{},l=e.contextDataJSON?e.contextDataJSON:{};null==t.navbarMainMenuView&&(t.navbarMainMenuView=new p({model:null,el:n,contextData:i,contextDataJSON:l,topicsJson:o,textTopicsJson:s,sdgsJson:a,portalInfo:r},t).render(),Backbone.mediator.publish("navbar-main-manu:ready"))},t.initNavbarNotificationWidgetFromOptions=function(e){var n=e.el?e.el:"#nav-notification-items";null==t.navbarNotificationWidgetView&&(t.navbarNotificationWidgetView=new d({el:n},t.app),t.navbarNotificationWidgetView.load().then(function(){Backbone.mediator.publish("navbar-notification-widget:ready"),a.log("# #### loaded notification widget.")}))},t.initUserDashboardFromOptions=function(e){var n="undefined"!=typeof COSINNUS_MAP_TOPICS_JSON?COSINNUS_MAP_TOPICS_JSON:{},o="undefined"!=typeof COSINNUS_MAP_TEXT_TOPICS_JSON?COSINNUS_MAP_TEXT_TOPICS_JSON:{},s="undefined"!=typeof COSINNUS_MAP_SDGS_JSON?COSINNUS_MAP_SDGS_JSON:{},a="undefined"!=typeof COSINNUS_PORTAL_INFOS?COSINNUS_PORTAL_INFOS:{};null==t.userDashboardView&&(t.userDashboardView=new m({model:null,el:null,topicsJson:n,textTopicsJson:o,sdgsJson:s,portalInfo:a,uiPrefs:e.ui_prefs,forceOnlyMine:e.force_only_mine},t).render(),Backbone.mediator.publish("user-dashboard:ready"))}};t.exports=f,$(function(){window.App=(new f).start()})},function(t,e,n){"use strict";var o=(n(2),n(5));t.exports=Backbone.Router.extend({routes:{"":"route_app_map_tiles"},first_route_event:!0,route_app_map_tiles:function(){o.log("router.js: routed "),Backbone.mediator.publish("navigate:map")},on_navigate:function(t){o.log("router.js: got a navigate event!"),o.log(t),t&&(t="."+t,Backbone.Router.prototype.navigate.call(this,t,{trigger:!1,replace:App.router.first_route_event}),App.router.first_route_event&&(o.log("router.js: THIS IS THE FIRST NAVIGATE EVENT. Replacing history state instead of adding a new one!"),App.router.first_route_event=!1))},replaceUrl:function(t){o.log("router.js: Replacing the current history URL without navigation or routing."),Backbone.Router.prototype.navigate.call(this,t,{trigger:!1,replace:!0})}})},function(t,e,n){"use strict";var o=n(3),s=n(6),a=n(11),r=n(5);t.exports=o.extend({template:n(12),events:{"click .map-expand-button":"onExpandButtonClicked"},layers:{street:{url:"http:"===r.protocol()?"http://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}@2x.png":"https://cartodb-basemaps-{s}.global.ssl.fastly.net/light_all/{z}/{x}/{y}.png",options:{attribution:'<a href="https://carto.com" target="_blank">CartoDB</a> | <a href="https://www.openstreetmap.org" target="_blank">&copy; OpenStreetMap contributors</a>'}}},layersModernTileset:{street:{url:"https:"===r.protocol()?"http://{s}.tile.openstreetmap.de/tiles/osmde/{z}/{x}/{y}.png":"https://{s}.tile.openstreetmap.de/tiles/osmde/{z}/{x}/{y}.png",options:{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}}},geoRegionUrl:r.ifundef(COSINNUS_MAP_OPTIONS.geojson_region,null),mapLayerButtonsView:null,popup:null,leaflet:null,markers:{},draggableMarker:null,defaults:{fullscreen:!0,splitscreen:!1,enablePopup:!1,enableDetailSelection:!0,clusteringEnabled:!1,clusterZoomThreshold:5,maxClusterRadius:15,mobileSafeInteractions:!1,keepOpenMarkersAfterResultChange:!1,latLngBuffer:.01,latLngRoundToDecimals:5,resultMarkerSizes:{width:14*.8,height:14*.8,widthLarge:28*.8,heightLarge:29.6,widthStacked:23*.8,heightStacked:23*.8,widthBase:28*.8,heightBase:29.6},resultMarkerClusterDistance:{x:0,y:0,perZoom:0},MARKER_NUMBER_OF_LARGE_MARKERS:8,MARKER_CLUSTER_RADIUS_LIMIT:.85,MARKER_STACK_PX_OFFSET_PER_CLUSTER_LEVEL:7,MARKER_STACK_PX_OFFSET_BASE:8,location:[],zoom:7,layer:"street",state:{currentLayer:null,currentlyClustering:!1,currentSpiderfied:null,north:r.ifundef(COSINNUS_MAP_OPTIONS.default_coordinates.ne_lat,55.78),east:r.ifundef(COSINNUS_MAP_OPTIONS.default_coordinates.ne_lon,23.02),south:r.ifundef(COSINNUS_MAP_OPTIONS.default_coordinates.sw_lat,49),west:r.ifundef(COSINNUS_MAP_OPTIONS.default_coordinates.sw_lon,3.8)}},initialize:function(t,e,n){var s=this;o.prototype.initialize.call(s,t,e,n),s.state.currentlyClustering=s.options.clusteringEnabled,s.state.mobileSafeInteractions=s.options.mobileSafeInteractions,Backbone.mediator.subscribe("change:bounds",s.fitBounds,s),Backbone.mediator.subscribe("resize:window",function(){s.leaflet.invalidateSize(),s.handleViewportChange()},s),Backbone.mediator.subscribe("change:layer",s.setLayer,s),s.collection.on({add:s.thisContext(s.markerAdd),"change:hovered":s.thisContext(s.markerChangeHovered),"change:selected":s.thisContext(s.markerChangeSelected),change:s.thisContext(s.markerUpdate),remove:s.thisContext(s.markerRemove),reset:s.thisContext(s.markersReset)})},render:function(){var t=this;return o.prototype.render.call(t),t.renderMap(),t},afterRender:function(){var t=this;null==t.mapLayerButtonsView?t.mapLayerButtonsView=new s({el:t.$el.find(".map-layers-buttons"),layer:t.options.layer,mapView:t}).render():t.mapLayerButtonsView.render()},applyUrlSearchParameters:function(t){r.log("map-view.js: url params on init: "),r.log(t),_.extend(this.state,{north:r.ifundef(t.ne_lat,this.state.north),east:r.ifundef(t.ne_lon,this.state.east),south:r.ifundef(t.sw_lat,this.state.south),west:r.ifundef(t.sw_lon,this.state.west)}),this.fitBounds(),this.updateBounds()},contributeToSearchParameters:function(t){var e=t,n={ne_lat:e?this.state.paddedNorth:this.state.north,ne_lon:e?this.state.paddedEast:this.state.east,sw_lat:e?this.state.paddedSouth:this.state.south,sw_lon:e?this.state.paddedWest:this.state.west};return n},markerAdd:function(t,e,n,o){var s=this;if(!t.get("lat")||!t.get("lon"))return void r.log("Cancelled adding a marker for a result with no location.");t.id in this.markers&&this.markerRemove(t);var i=this.getMarkerIconForType(t.get("type"),e,n>0,0==n),l=o?o:[t.get("lat"),t.get("lon")],u=e||"undefined"!=typeof n||0==n,c=0;"undefined"!=typeof n&&n>0&&(c=this.options.MARKER_STACK_PX_OFFSET_BASE+this.options.MARKER_STACK_PX_OFFSET_PER_CLUSTER_LEVEL*n);var p=L.marker(l,{icon:L.divIcon({iconSize:[i.iconWidth,i.iconHeight],iconAnchor:[i.iconWidth/2,i.iconHeight/(u?1:2)+c],className:i.className+(t.get("selected")?" marker-selected":"")}),zIndexOffset:n?1e3+100*n:null,riseOnHover:!1});this.options.enablePopup&&p.bindPopup(a.render({imageURL:t.get("imageUrl"),title:t.get("title"),url:t.get("url"),address:t.get("address"),description:t.get("description")})),this.options.enableDetailSelection&&p.on("click",function(){s.App.controlView.onResultLinkClicked(null,t.id)}),p.on("mouseover",function(){s.App.controlView.setHoveredResult(t)}),p.on("mouseout",function(){s.App.controlView.setHoveredResult(null)}),(!this.options.keepOpenMarkersAfterResultChange||this.markerNotPopup(p)&&this.markerNotSpiderfied(p))&&(this.state.currentlyClustering?this.clusteredMarkers.addLayer(p):p.addTo(this.leaflet),this.markers[t.id]=p)},markerChangeHovered:function(t){if(t.id in this.markers){var e=this.markers[t.id];$(e._icon).toggleClass("marker-hovered",t.get("hovered"))}},markerChangeSelected:function(t){if(t.id in this.markers){var e=this.markers[t.id];$(e._icon).toggleClass("marker-selected",t.get("selected"))}},markerUpdate:function(t,e){var n=t.changedAttributes();n&&("selected"in n||"hovered"in n)||(r.log("map-view.js: TODO: actually *update* the marker and dont just remove/add it!"),t.selected?r.log("map-view.js: TODO:: was ordered to remove a marker that is currently selected. NOT DOING ANYTHING RN!"):(this.markerRemove(t),this.markerAdd(t)))},markerRemove:function(t){if(t.id in this.markers){var e=this.markers[t.id];this.state.currentlyClustering?this.clusteredMarkers.removeLayer(e):this.leaflet.removeLayer(e),delete this.markers[t.id]}},markersReset:function(t,e){var n=this;_.each(e.previousModels,function(t){n.markerRemove(t)});for(var o=[],s=0;s<t.models.length;s++){var a=t.models[s];if(a.get("lat")&&a.get("lon")){for(var r=0;r<o.length;r++){var i=o[r],l=Math.abs(i.loc.lon-a.get("lon")),u=Math.abs(i.loc.lat-a.get("lat"));if(l<n.options.resultMarkerClusterDistance.x&&u<n.options.resultMarkerClusterDistance.y){i.items.push(a),a=null;break}}null!=a&&o.push({loc:{lat:a.get("lat"),lon:a.get("lon")},items:[a]})}}for(var c=[],p=o.length-1;p>=0;p--){var i=o[p];1==i.items.length?(c.push(i.items[0]),o.splice(p,1)):i.items.sort(function(t,e){return t.get("relevance")-e.get("relevance")})}for(var d=n.options.MARKER_NUMBER_OF_LARGE_MARKERS,s=0;s<o.length;s++){for(var i=o[s],r=i.items.length-1;r>=0;r--){var m=i.items[r];n.markerAdd(m,!1,r,i.loc)}d-=1}c.sort(function(t,e){return e.get("relevance")-t.get("relevance")}),_.each(c,function(t){d>0?(n.markerAdd(t,!0),d-=1):n.markerAdd(t)})},activateDraggableMarker:function(t){var e=this;$(".leaflet-marker-pane").addClass("marker-place-mode");var n=this.options.resultMarkerSizes.widthLarge,o=this.options.resultMarkerSizes.heightLarge;this.draggableMarker=L.marker(this.leaflet.getCenter(),{icon:L.divIcon({iconSize:[n,this.options.resultMarkerSizes.heightLarge],iconAnchor:[n/2,o],className:"draggable-placemark placemark l icon "+t}),riseOnHover:!1,draggable:!0,keyboard:!1}),this.draggableMarker.on("dragend",function(t){var n=t.target;e.leaflet.panTo(n.getLatLng())}),this.draggableMarker.addTo(this.leaflet)},deactivateDraggableMarker:function(){this.leaflet.removeLayer(this.draggableMarker),this.draggableMarker=null,$(".leaflet-marker-pane").removeClass("marker-place-mode")},getDraggableMarkerLatLng:function(){return this.draggableMarker?this.draggableMarker.getLatLng():null},onExpandButtonClicked:function(t){this.App.controlView.switchDisplayState(!0,!this.options.splitscreen)},reload:function(){r.log("*** Reloading Map View ***"),this.$el.toggleClass("map-splitscreen",this.options.splitscreen),this.$el.show(),Backbone.mediator.publish("resize:window")},hide:function(){r.log("*** Hiding Map View ***"),this.$el.hide()},renderMap:function(){var t=this;r.log("++++++ map-view.js renderMap called! This should only happen once at init! +++++++++++++++++++");var e={};t.state.mobileSafeInteractions&&(e={scrollWheelZoom:!1}),this.leaflet=L.map("map-container",e),this.setLayer(this.options.layer),t.geoRegionUrl&&$.ajax({dataType:"json",url:t.geoRegionUrl,success:function(e){var n=new L.geoJson(null,{style:function(t){return r.ifundef(COSINNUS_MAP_OPTIONS.geojson_style,{width:1,weight:.5,fillOpacity:.035})}});n.addTo(t.leaflet),$(e.features).each(function(t,e){n.addData(e)})}}).error(function(){}),this.options.clusteringEnabled&&(this.clusteredMarkers=L.markerClusterGroup({maxClusterRadius:this.options.maxClusterRadius}),this.clusteredMarkers.on("spiderfied",this.handleSpiderfied,this),this.leaflet.addLayer(this.clusteredMarkers),this.setClusterState()),this.options.location&&2==this.options.location.length?this.leaflet.setView(this.options.location,this.options.zoom):this.fitBounds(),this.updateClusterDistances(),this.leaflet.on("zoomend",this.handleViewportChange,this),this.leaflet.on("dragend",this.handleViewportChange,this),this.leaflet.on("popupopen",this.handlePopup,this),this.leaflet.on("popupclose",this.handlePopup,this);var n=this.$el.find(".map-controls")[0];n&&(L.Browser.touch?L.DomEvent.on(n,"click",L.DomEvent.stopPropagation):(L.DomEvent.disableClickPropagation(n),L.DomEvent.on(n,"mousewheel",L.DomEvent.stopPropagation))),this.updateBounds()},setLayer:function(t){if(this.state.currentLayer&&this.leaflet.removeLayer(this.state.currentLayer),1==COSINNUS_MAP_USE_MODERN_TILESET){var e=_(this.layersModernTileset[t].options).extend({maxZoom:15,minZoom:3});this.state.currentLayer=L.tileLayer(this.layersModernTileset[t].url,e).addTo(this.leaflet)}else{var e=_(this.layers[t].options).extend({maxZoom:15,minZoom:3});this.state.currentLayer=L.tileLayer(this.layers[t].url,e).addTo(this.leaflet)}},updateBounds:function(){var t=this.leaflet.getBounds(),e=t.pad(this.options.latLngBuffer);_.extend(this.state,{south:L.Util.formatNum(t.getSouth(),this.options.latLngRoundToDecimals),paddedSouth:L.Util.formatNum(e.getSouth(),this.options.latLngRoundToDecimals),west:L.Util.formatNum(t.getWest(),this.options.latLngRoundToDecimals),paddedWest:L.Util.formatNum(e.getWest(),this.options.latLngRoundToDecimals),north:L.Util.formatNum(t.getNorth(),this.options.latLngRoundToDecimals),paddedNorth:L.Util.formatNum(e.getNorth(),this.options.latLngRoundToDecimals),east:L.Util.formatNum(t.getEast(),this.options.latLngRoundToDecimals),paddedEast:L.Util.formatNum(e.getEast(),this.options.latLngRoundToDecimals)}),this.state.zoom=this.leaflet._zoom},setClusterState:function(){if(this.options.clusteringEnabled){var t=this.leaflet.getZoom();this.state.currentlyClustering=t>this.options.clusterZoomThreshold}},getMarkerIconForType:function(t,e,n,o){var s,a="",r="placemark";return o?(a="Base",r+=" l"):n?(a="Stacked",r+=" m"):e?(a="Large",r+=" l icon"):r+=" s",r+=" "+t,s={iconWidth:this.options.resultMarkerSizes["width"+a],iconHeight:this.options.resultMarkerSizes["height"+a],className:r}},markerNotPopup:function(t){var e=this.popup;return!e||!_(e.getLatLng()).isEqual(t.getLatLng())},markerNotSpiderfied:function(t){var e=this.state.currentSpiderfied,n=!e||!_(e.getAllChildMarkers()).find(function(e){return _(e.getLatLng()).isEqual(t.getLatLng())});return n},handleViewportChange:function(){this.setClusterState(),this.updateBounds(),this.updateClusterDistances(),Backbone.mediator.publish("app:stale-results",{reason:"viewport-changed"})},updateClusterDistances:function(){var t=Math.abs(this.state.south-this.state.north)/this.$el.height(),e=Math.abs(this.state.east-this.state.west)/this.$el.width();this.options.resultMarkerClusterDistance.x=e*this.options.resultMarkerSizes.widthLarge*this.options.MARKER_CLUSTER_RADIUS_LIMIT,this.options.resultMarkerClusterDistance.y=t*this.options.resultMarkerSizes.heightLarge*this.options.MARKER_CLUSTER_RADIUS_LIMIT,this.options.resultMarkerClusterDistance.perZoom=1/Math.pow(2,this.leaflet.getZoom())},fitBounds:function(){this.leaflet?(r.log("map-view.js: fitBounds called"),this.leaflet.fitBounds(L.latLngBounds(L.latLng(this.state.south,this.state.west),L.latLng(this.state.north,this.state.east)))):r.log("map-view.js: fitBounds fizzled")},handlePopup:function(t){if("popupopen"===t.type)this.popup=t.popup;else{this.popup.getLatLng(),t.popup._source;this.popup=null}},handleSpiderfied:function(t){this.state.currentSpiderfied=t.cluster}})},function(t,e,n){"use strict";var o=n(4);n(5);t.exports=o.extend({App:null,collection:null,initialize:function(t,e,n){var s=this;o.prototype.initialize.call(s,t),s.App=e,s.collection=n},applyUrlSearchParameters:function(t){},contributeToSearchParameters:function(t){return{}},disableInput:function(){},enableInput:function(){},parseUrl:function(t){if(t.indexOf("?")>=0)var e=JSON.parse('{"'+decodeURI(t.replace(/\%2C/g,",").replace(/\+/g," ").replace(/[^?]*\?/,"").replace(/&/g,'","').replace(/=/g,'":"'))+'"}');else var e={};return _(_(e).keys()).each(function(t){if(""!==e[t])try{e[t]=JSON.parse(e[t])}catch(t){}}),("number"==typeof e.topics||"string"==typeof e.topics&&e.topics.length>0)&&(e.topics=e.topics.toString().split(",").map(Number)),("number"==typeof e.text_topics||"string"==typeof e.text_topics&&e.text_topics.length>0)&&(e.text_topics=e.text_topics.toString().split(",").map(Number)),("number"==typeof e.sdgs||"string"==typeof e.sdgs&&e.sdgs.length>0)&&(e.sdgs=e.sdgs.toString().split(",").map(Number)),("number"==typeof e.managed_tags||"string"==typeof e.managed_tags&&e.managed_tags.length>0)&&(e.managed_tags=e.managed_tags.toString().split(",").map(Number)),e}})},function(t,e,n){"use strict";n(5);t.exports=Backbone.View.extend({initialize:function(t){this.options=$.extend(!0,{},this.defaults,t),this.state=this.options&&this.options.state||{}},render:function(){var t=this,e=this.getTemplateData();if(this.template&&this.template.render&&"function"==typeof this.template.render){var n=this.template.render(e);t.options.elParent?(n=$(n),0==t.$el.parent().length?$(t.options.elParent).append(n):t.$el.replaceWith(n),this.setElement(n)):this.$el.html(n),$.cosinnus.titledby(this.$el)}return setTimeout(function(){t.afterRender&&t.afterRender()},0),this},getTemplateData:function(){var t=this.model&&this.model.toJSON()||{noModel:!0},e=_.extend(t,this.options,this.state,{cosinnus_active_user:cosinnus_active_user,COSINNUS_IDEAS_ENABLED:COSINNUS_IDEAS_ENABLED,COSINNUS_ORGANIZATIONS_ENABLED:COSINNUS_ORGANIZATIONS_ENABLED,COSINNUS_CONFERENCES_ENABLED:COSINNUS_CONFERENCES_ENABLED,COSINNUS_EXCHANGE_ENABLED:COSINNUS_EXCHANGE_ENABLED,COSINNUS_EXCHANGE_PORTAL_ID:COSINNUS_EXCHANGE_PORTAL_ID,COSINNUS_MATCHING_ENABLED:COSINNUS_MATCHING_ENABLED,COSINNUS_SHOW_PROJECT_AND_GROUP_CREATE_BUTTONS:COSINNUS_SHOW_PROJECT_AND_GROUP_CREATE_BUTTONS,COSINNUS_SHOW_SUPERUSER_CONTROLS:COSINNUS_SHOW_SUPERUSER_CONTROLS,COSINNUS_USER_CAN_CREATE_CONFERENCE:COSINNUS_USER_CAN_CREATE_CONFERENCE,COSINNUS_USER_EXTERNAL_USERS_FORBIDDEN:COSINNUS_USER_EXTERNAL_USERS_FORBIDDEN,COSINNUS_FORUM_GROUP_SLUG:COSINNUS_FORUM_GROUP_SLUG,COSINNUS_TRANS:{COSINNUS_TRANS_MY_CONFERENCES:COSINNUS_TRANS_MY_CONFERENCES,COSINNUS_TRANS_MY_CONFERENCES_EMPTY:COSINNUS_TRANS_MY_CONFERENCES_EMPTY,COSINNUS_TRANS_CONFERENCE:COSINNUS_TRANS_CONFERENCE,COSINNUS_TRANS_CONFERENCES:COSINNUS_TRANS_CONFERENCES,COSINNUS_TRANS_ALL_CONFERENCES:COSINNUS_TRANS_ALL_CONFERENCES,COSINNUS_TRANS_BROWSE_ALL_CONFERENCES:COSINNUS_TRANS_BROWSE_ALL_CONFERENCES,COSINNUS_TRANS_CREATE_CONFERENCE:COSINNUS_TRANS_CREATE_CONFERENCE}});return e},thisContext:function(t){var e=this;return function(){t.apply(e,arguments)}}})},function(t,e,n){"use strict";t.exports={protocol:function(){return window.location.protocol},isIgnorableKey:function(t){var e=[9,13,16,17,18,19,20,27,33,34,35,36,37,38,39,40,45,46];return _(e).contains(t.keyCode)},ifundef:function(t,e){return"undefined"==typeof t?e:t},log:function(t){},saveInputStatus:function(t){var e=t[0];return{hadFocus:t.is(":focus"),val:e.value,start:e.selectionStart,end:e.selectionEnd}},restoreInputStatus:function(t,e){var n=t[0];n.value=e.val,n.setSelectionRange(e.start,e.end),e.hadFocus&&t.focus()},parseDirectItemId:function(t){var e=t.split(".");return e={portal:e[0],type:e[1],slug:e[2]}},makeDirectItemId:function(t,e,n){return t+"."+e+"."+n},getAPIDataForDirectItemId:function(t){var e=this.parseDirectItemId(t),n={};if("ideas"==e.type)n={ct:"cosinnus.CosinnusIdea",slug:e.slug};else if("organizations"==e.type)n={ct:"cosinnus.CosinnusOrganization",slug:e.slug};else if("events"==e.type)n={ct:"cosinnus_event.Event",slug:e.slug};else if("projects"==e.type)n={ct:"cosinnus.CosinnusProject",slug:e.slug};else if("groups"==e.type)n={ct:"cosinnus.CosinnusSociety",slug:e.slug};else if("conferences"==e.type)n={ct:"cosinnus.CosinnusConference",slug:e.slug};else{if("people"!=e.type)return null;n={slug:e.slug,ct:"people"}}return n},iReplace:function(t,e,n){var o=e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&"),s=new RegExp("("+o+")","ig");return t.replace(s,n)}}},function(t,e,n){"use strict";var o=n(4);n(5);t.exports=o.extend({template:n(7),mapView:null,defaults:{state:{layer:null}},initialize:function(t){var e=this;o.prototype.initialize.call(e,t),e.state.layer=t.layer,e.mapView=t.mapView},events:{"click .layer-button":"switchLayerClicked"},switchLayerClicked:function(t){var e=$(t.currentTarget).data("layer");this.mapView.options.layer!==e&&(this.mapView.options.layer=e,this.state.layer=e,this.render(),Backbone.mediator.publish("change:layer",e))}})},function(t,e,n){var o,s=n(8);o=s.currentEnv?s.currentEnv:s.currentEnv=new s.Environment([],void 0);var a=(n(9)(o),s.webpackDependencies||(s.webpackDependencies={})),r=n(10);!function(){(s.nunjucksPrecompiled=s.nunjucksPrecompiled||{})["cosinnus/templates/cosinnus/universal/map/map-layer-buttons.html"]=function(){function t(t,e,n,o,s){var a=null,r=null,i="";try{var l=null;i+=o.suppressValue(t.getExtension("passThrough").run(e,o.contextOrFrameLookup(e,n,"i18n")),t.opts.autoescape),i+="\n",l?l.rootRenderFunc(t,e,n,o,s):s(null,i)}catch(t){s(o.handleError(t,a,r))}}return{root:t}}()}(),t.exports=r(s,o,s.nunjucksPrecompiled["cosinnus/templates/cosinnus/universal/map/map-layer-buttons.html"],a)},function(t,e,n){/*! Browser bundle of nunjucks 2.5.2 (slim, only works with precompiled templates) */
!function(e,n){t.exports=n()}(this,function(){return function(t){function e(o){if(n[o])return n[o].exports;var s=n[o]={exports:{},id:o,loaded:!1};return t[o].call(s.exports,s,s.exports,e),s.loaded=!0,s.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){"use strict";var o=n(1),s=n(2),a=n(11),r=n(3),i=n(3);t.exports={},t.exports.Environment=s.Environment,t.exports.Template=s.Template,t.exports.Loader=a,t.exports.FileSystemLoader=r.FileSystemLoader,t.exports.PrecompiledLoader=r.PrecompiledLoader,t.exports.WebLoader=r.WebLoader,t.exports.compiler=n(3),t.exports.parser=n(3),t.exports.lexer=n(3),t.exports.runtime=n(8),t.exports.lib=o,t.exports.nodes=n(3),t.exports.installJinjaCompat=n(12);var l;t.exports.configure=function(t,e){e=e||{},o.isObject(t)&&(e=t,t=null);var n;return r.FileSystemLoader?n=new r.FileSystemLoader(t,{watch:e.watch,noCache:e.noCache}):r.WebLoader&&(n=new r.WebLoader(t,{useCache:e.web&&e.web.useCache,async:e.web&&e.web.async})),l=new s.Environment(n,e),e&&e.express&&l.express(e.express),l},t.exports.compile=function(e,n,o,s){return l||t.exports.configure(),new t.exports.Template(e,n,o,s)},t.exports.render=function(e,n,o){return l||t.exports.configure(),l.render(e,n,o)},t.exports.renderString=function(e,n,o){return l||t.exports.configure(),l.renderString(e,n,o)},i&&(t.exports.precompile=i.precompile,t.exports.precompileString=i.precompileString)},function(t,e){"use strict";var n=Array.prototype,o=Object.prototype,s={"&":"&amp;",'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;"},a=/[&"'<>]/g,r=function(t){return s[t]},e=t.exports={};e.prettifyError=function(t,n,o){if(o.Update||(o=new e.TemplateError(o)),o.Update(t),!n){var s=o;o=new Error(s.message),o.name=s.name}return o},e.TemplateError=function(t,e,n){var o=this;if(t instanceof Error){o=t,t=t.name+": "+t.message;try{o.name=""}catch(t){o=this}}else Error.captureStackTrace&&Error.captureStackTrace(o);return o.name="Template render error",o.message=t,o.lineno=e,o.colno=n,o.firstUpdate=!0,o.Update=function(t){var e="("+(t||"unknown path")+")";return this.firstUpdate&&(this.lineno&&this.colno?e+=" [Line "+this.lineno+", Column "+this.colno+"]":this.lineno&&(e+=" [Line "+this.lineno+"]")),e+="\n ",this.firstUpdate&&(e+=" "),this.message=e+(this.message||""),this.firstUpdate=!1,this},o},e.TemplateError.prototype=Error.prototype,e.escape=function(t){return t.replace(a,r)},e.isFunction=function(t){return"[object Function]"===o.toString.call(t)},e.isArray=Array.isArray||function(t){return"[object Array]"===o.toString.call(t)},e.isString=function(t){return"[object String]"===o.toString.call(t)},e.isObject=function(t){return"[object Object]"===o.toString.call(t)},e.groupBy=function(t,n){for(var o={},s=e.isFunction(n)?n:function(t){return t[n]},a=0;a<t.length;a++){var r=t[a],i=s(r,a);(o[i]||(o[i]=[])).push(r)}return o},e.toArray=function(t){return Array.prototype.slice.call(t)},e.without=function(t){var n=[];if(!t)return n;for(var o=-1,s=t.length,a=e.toArray(arguments).slice(1);++o<s;)e.indexOf(a,t[o])===-1&&n.push(t[o]);return n},e.extend=function(t,e){for(var n in e)t[n]=e[n];return t},e.repeat=function(t,e){for(var n="",o=0;o<e;o++)n+=t;return n},e.each=function(t,e,o){if(null!=t)if(n.each&&t.each===n.each)t.forEach(e,o);else if(t.length===+t.length)for(var s=0,a=t.length;s<a;s++)e.call(o,t[s],s,t)},e.map=function(t,e){var o=[];if(null==t)return o;if(n.map&&t.map===n.map)return t.map(e);for(var s=0;s<t.length;s++)o[o.length]=e(t[s],s);return t.length===+t.length&&(o.length=t.length),o},e.asyncIter=function(t,e,n){function o(){s++,s<t.length?e(t[s],s,o,n):n()}var s=-1;o()},e.asyncFor=function(t,n,o){function s(){i++;var e=a[i];i<r?n(e,t[e],i,r,s):o()}var a=e.keys(t),r=a.length,i=-1;s()},e.indexOf=Array.prototype.indexOf?function(t,e,n){return Array.prototype.indexOf.call(t,e,n)}:function(t,e,n){var o=this.length>>>0;for(n=+n||0,Math.abs(n)===1/0&&(n=0),n<0&&(n+=o,n<0&&(n=0));n<o;n++)if(t[n]===e)return n;return-1},Array.prototype.map||(Array.prototype.map=function(){throw new Error("map is unimplemented for this js engine")}),e.keys=function(t){if(Object.prototype.keys)return t.keys();var e=[];for(var n in t)t.hasOwnProperty(n)&&e.push(n);return e},e.inOperator=function(t,n){if(e.isArray(n))return e.indexOf(n,t)!==-1;if(e.isObject(n))return t in n;if(e.isString(n))return n.indexOf(t)!==-1;throw new Error('Cannot use "in" operator to search for "'+t+'" in unexpected types.')}},function(t,e,n){"use strict";function o(t,e,n){r(function(){t(e,n)})}var s,a=n(3),r=n(4),i=n(1),l=n(6),u=n(3),c=n(7),p=n(3),d=n(8),m=n(9),f=d.Frame;p.PrecompiledLoader=n(10);var h=l.extend({init:function(t,e){e=this.opts=e||{},this.opts.dev=!!e.dev,this.opts.autoescape=null==e.autoescape||e.autoescape,this.opts.throwOnUndefined=!!e.throwOnUndefined,this.opts.trimBlocks=!!e.trimBlocks,this.opts.lstripBlocks=!!e.lstripBlocks,this.loaders=[],t?this.loaders=i.isArray(t)?t:[t]:p.FileSystemLoader?this.loaders=[new p.FileSystemLoader("views")]:p.WebLoader&&(this.loaders=[new p.WebLoader("/views")]),window.nunjucksPrecompiled&&this.loaders.unshift(new p.PrecompiledLoader(window.nunjucksPrecompiled)),this.initCache(),this.globals=m(),this.filters={},this.asyncFilters=[],this.extensions={},this.extensionsList=[];for(var n in c)this.addFilter(n,c[n])},initCache:function(){i.each(this.loaders,function(t){t.cache={},"function"==typeof t.on&&t.on("update",function(e){t.cache[e]=null})})},addExtension:function(t,e){return e._name=t,this.extensions[t]=e,this.extensionsList.push(e),this},removeExtension:function(t){var e=this.getExtension(t);e&&(this.extensionsList=i.without(this.extensionsList,e),delete this.extensions[t])},getExtension:function(t){return this.extensions[t]},hasExtension:function(t){return!!this.extensions[t]},addGlobal:function(t,e){return this.globals[t]=e,this},getGlobal:function(t){if("undefined"==typeof this.globals[t])throw new Error("global not found: "+t);return this.globals[t]},addFilter:function(t,e,n){var o=e;return n&&this.asyncFilters.push(t),this.filters[t]=o,this},getFilter:function(t){if(!this.filters[t])throw new Error("filter not found: "+t);return this.filters[t]},resolveTemplate:function(t,e,n){var o=!(!t.isRelative||!e)&&t.isRelative(n);return o&&t.resolve?t.resolve(e,n):n},getTemplate:function(t,e,n,o,a){var r=this,l=null;if(t&&t.raw&&(t=t.raw),i.isFunction(n)&&(a=n,n=null,e=e||!1),i.isFunction(e)&&(a=e,e=!1),t instanceof s)l=t;else{if("string"!=typeof t)throw new Error("template names must be a string: "+t);for(var u=0;u<this.loaders.length;u++){var c=this.resolveTemplate(this.loaders[u],n,t);if(l=this.loaders[u].cache[c])break}}if(!l){var p,d=this,m=function(n,r){if(r||n||o||(n=new Error("template not found: "+t)),n){if(!a)throw n;a(n)}else{var i;r?(i=new s(r.src,d,r.path,e),r.noCache||(r.loader.cache[t]=i)):i=new s("",d,"",e),a?a(null,i):p=i}};return i.asyncIter(this.loaders,function(e,o,s,a){function i(t,n){t?a(t):n?(n.loader=e,a(null,n)):s()}t=r.resolveTemplate(e,n,t),e.async?e.getSource(t,i):i(null,e.getSource(t))},m),p}return e&&l.compile(),a?void a(null,l):l},express:function(t){function e(t,e){if(this.name=t,this.path=t,this.defaultEngine=e.defaultEngine,this.ext=a.extname(t),!this.ext&&!this.defaultEngine)throw new Error("No default engine was specified and no extension was provided.");this.ext||(this.name+=this.ext=("."!==this.defaultEngine[0]?".":"")+this.defaultEngine)}var n=this;return e.prototype.render=function(t,e){n.render(this.name,t,e)},t.set("view",e),t.set("nunjucksEnv",this),this},render:function(t,e,n){i.isFunction(e)&&(n=e,e=null);var s=null;return this.getTemplate(t,function(t,a){if(t&&n)o(n,t);else{if(t)throw t;s=a.render(e,n)}}),s},renderString:function(t,e,n,o){i.isFunction(n)&&(o=n,n={}),n=n||{};var a=new s(t,this,n.path);return a.render(e,o)}}),v=l.extend({init:function(t,e,n){this.env=n||new h,this.ctx={};for(var o in t)t.hasOwnProperty(o)&&(this.ctx[o]=t[o]);this.blocks={},this.exported=[];for(var s in e)this.addBlock(s,e[s])},lookup:function(t){return t in this.env.globals&&!(t in this.ctx)?this.env.globals[t]:this.ctx[t]},setVariable:function(t,e){this.ctx[t]=e},getVariables:function(){return this.ctx},addBlock:function(t,e){return this.blocks[t]=this.blocks[t]||[],this.blocks[t].push(e),this},getBlock:function(t){if(!this.blocks[t])throw new Error('unknown block "'+t+'"');return this.blocks[t][0]},getSuper:function(t,e,n,o,s,a){var r=i.indexOf(this.blocks[e]||[],n),l=this.blocks[e][r+1],u=this;if(r===-1||!l)throw new Error('no super block available for "'+e+'"');l(t,u,o,s,a)},addExport:function(t){this.exported.push(t)},getExported:function(){for(var t={},e=0;e<this.exported.length;e++){var n=this.exported[e];t[n]=this.ctx[n]}return t}});s=l.extend({init:function(t,e,n,o){if(this.env=e||new h,i.isObject(t))switch(t.type){case"code":this.tmplProps=t.obj;break;case"string":this.tmplStr=t.obj}else{if(!i.isString(t))throw new Error("src must be a string or an object describing the source");this.tmplStr=t}if(this.path=n,o){var s=this;try{s._compile()}catch(t){throw i.prettifyError(this.path,this.env.opts.dev,t)}}else this.compiled=!1},render:function(t,e,n){"function"==typeof t?(n=t,t={}):"function"==typeof e&&(n=e,e=null);var s=!0;e&&(s=!1);var a=this;try{a.compile()}catch(t){var r=i.prettifyError(this.path,this.env.opts.dev,t);if(n)return o(n,r);throw r}var l=new v(t||{},a.blocks,a.env),u=e?e.push(!0):new f;u.topLevel=!0;var c=null;return a.rootRenderFunc(a.env,l,u||new f,d,function(t,e){if(t&&(t=i.prettifyError(a.path,a.env.opts.dev,t)),n)s?o(n,t,e):n(t,e);else{if(t)throw t;c=e}}),c},getExported:function(t,e,n){"function"==typeof t&&(n=t,t={}),"function"==typeof e&&(n=e,e=null);try{this.compile()}catch(t){if(n)return n(t);throw t}var o=e?e.push():new f;o.topLevel=!0;var s=new v(t||{},this.blocks,this.env);this.rootRenderFunc(this.env,s,o,d,function(t){t?n(t,null):n(null,s.getExported())})},compile:function(){this.compiled||this._compile()},_compile:function(){var t;if(this.tmplProps)t=this.tmplProps;else{var e=u.compile(this.tmplStr,this.env.asyncFilters,this.env.extensionsList,this.path,this.env.opts),n=new Function(e);t=n()}this.blocks=this._getBlocks(t),this.rootRenderFunc=t.root,this.compiled=!0},_getBlocks:function(t){var e={};for(var n in t)"b_"===n.slice(0,2)&&(e[n.slice(2)]=t[n]);return e}}),t.exports={Environment:h,Template:s}},function(t,e){},function(t,e,n){"use strict";function o(){if(l.length)throw l.shift()}function s(t){var e;e=i.length?i.pop():new a,e.task=t,r(e)}function a(){this.task=null}var r=n(5),i=[],l=[],u=r.makeRequestCallFromTimer(o);t.exports=s,a.prototype.call=function(){try{this.task.call()}catch(t){s.onerror?s.onerror(t):(l.push(t),u())}finally{this.task=null,i[i.length]=this}}},function(t,e){(function(e){"use strict";function n(t){i.length||(r(),l=!0),i[i.length]=t}function o(){for(;u<i.length;){var t=u;if(u+=1,i[t].call(),u>c){for(var e=0,n=i.length-u;e<n;e++)i[e]=i[e+u];i.length-=u,u=0}}i.length=0,u=0,l=!1}function s(t){var e=1,n=new p(t),o=document.createTextNode("");return n.observe(o,{characterData:!0}),function(){e=-e,o.data=e}}function a(t){return function(){function e(){clearTimeout(n),clearInterval(o),t()}var n=setTimeout(e,0),o=setInterval(e,50)}}t.exports=n;var r,i=[],l=!1,u=0,c=1024,p=e.MutationObserver||e.WebKitMutationObserver;r="function"==typeof p?s(o):a(o),n.requestFlush=r,n.makeRequestCallFromTimer=a}).call(e,function(){return this}())},function(t,e){"use strict";function n(t,e,o){var s=function(){};s.prototype=t.prototype;var a=new s,r=/xyz/.test(function(){xyz})?/\bparent\b/:/.*/;o=o||{};for(var i in o){var l=o[i],u=a[i];"function"==typeof u&&"function"==typeof l&&r.test(l)?a[i]=function(t,e){return function(){var n=this.parent;this.parent=e;var o=t.apply(this,arguments);return this.parent=n,o}}(l,u):a[i]=l}a.typename=e;var c=function(){a.init&&a.init.apply(this,arguments)};return c.prototype=a,c.prototype.constructor=c,c.extend=function(t,e){return"object"==typeof t&&(e=t,t="anonymous"),n(c,t,e)},c}t.exports=n(Object,"Object",{})},function(t,e,n){"use strict";function o(t,e){return null===t||void 0===t||t===!1?e:t}var s=n(1),a=n(8),r={abs:function(t){return Math.abs(t)},batch:function(t,e,n){var o,s=[],a=[];for(o=0;o<t.length;o++)o%e===0&&a.length&&(s.push(a),a=[]),a.push(t[o]);if(a.length){if(n)for(o=a.length;o<e;o++)a.push(n);s.push(a)}return s},capitalize:function(t){t=o(t,"");var e=t.toLowerCase();return a.copySafeness(t,e.charAt(0).toUpperCase()+e.slice(1))},center:function(t,e){if(t=o(t,""),e=e||80,t.length>=e)return t;var n=e-t.length,r=s.repeat(" ",n/2-n%2),i=s.repeat(" ",n/2);return a.copySafeness(t,r+t+i)},default:function(t,e,n){return n?t?t:e:void 0!==t?t:e},dictsort:function(t,e,n){if(!s.isObject(t))throw new s.TemplateError("dictsort filter: val must be an object");var o=[];for(var a in t)o.push([a,t[a]]);var r;if(void 0===n||"key"===n)r=0;else{if("value"!==n)throw new s.TemplateError("dictsort filter: You can only sort by either key or value");r=1}return o.sort(function(t,n){var o=t[r],a=n[r];return e||(s.isString(o)&&(o=o.toUpperCase()),s.isString(a)&&(a=a.toUpperCase())),o>a?1:o===a?0:-1}),o},dump:function(t){return JSON.stringify(t)},escape:function(t){return t instanceof a.SafeString?t:(t=null===t||void 0===t?"":t,a.markSafe(s.escape(t.toString())))},safe:function(t){return t instanceof a.SafeString?t:(t=null===t||void 0===t?"":t,a.markSafe(t.toString()))},first:function(t){return t[0]},groupby:function(t,e){return s.groupBy(t,e)},indent:function(t,e,n){if(t=o(t,""),""===t)return"";e=e||4;for(var r="",i=t.split("\n"),l=s.repeat(" ",e),u=0;u<i.length;u++)r+=0!==u||n?l+i[u]+"\n":i[u]+"\n";return a.copySafeness(t,r)},join:function(t,e,n){return e=e||"",n&&(t=s.map(t,function(t){return t[n]})),t.join(e)},last:function(t){return t[t.length-1]},length:function(t){var e=o(t,"");return void 0!==e?"function"==typeof Map&&e instanceof Map||"function"==typeof Set&&e instanceof Set?e.size:!s.isObject(e)||e instanceof a.SafeString?e.length:Object.keys(e).length:0},list:function(t){if(s.isString(t))return t.split("");if(s.isObject(t)){var e=[];if(Object.keys)e=Object.keys(t);else for(var n in t)e.push(n);return s.map(e,function(e){return{key:e,value:t[e]}})}if(s.isArray(t))return t;throw new s.TemplateError("list filter: type not iterable")},lower:function(t){return t=o(t,""),t.toLowerCase()},random:function(t){return t[Math.floor(Math.random()*t.length)]},rejectattr:function(t,e){return t.filter(function(t){return!t[e]})},selectattr:function(t,e){return t.filter(function(t){return!!t[e]})},replace:function(t,e,n,o){var s=t;if(e instanceof RegExp)return t.replace(e,n);"undefined"==typeof o&&(o=-1);var r="";if("number"==typeof e)e+="";else if("string"!=typeof e)return t;if("number"==typeof t&&(t+=""),"string"!=typeof t&&!(t instanceof a.SafeString))return t;if(""===e)return r=n+t.split("").join(n)+n,a.copySafeness(t,r);var i=t.indexOf(e);if(0===o||i===-1)return t;for(var l=0,u=0;i>-1&&(o===-1||u<o);)r+=t.substring(l,i)+n,l=i+e.length,u++,i=t.indexOf(e,l);return l<t.length&&(r+=t.substring(l)),a.copySafeness(s,r)},reverse:function(t){var e;return e=s.isString(t)?r.list(t):s.map(t,function(t){return t}),e.reverse(),s.isString(t)?a.copySafeness(t,e.join("")):e},round:function(t,e,n){e=e||0;var o,s=Math.pow(10,e);return o="ceil"===n?Math.ceil:"floor"===n?Math.floor:Math.round,o(t*s)/s},slice:function(t,e,n){for(var o=Math.floor(t.length/e),s=t.length%e,a=0,r=[],i=0;i<e;i++){var l=a+i*o;i<s&&a++;var u=a+(i+1)*o,c=t.slice(l,u);n&&i>=s&&c.push(n),r.push(c)}return r},sum:function(t,e,n){var o=0;"number"==typeof n&&(o+=n),e&&(t=s.map(t,function(t){return t[e]}));for(var a=0;a<t.length;a++)o+=t[a];return o},sort:a.makeMacro(["value","reverse","case_sensitive","attribute"],[],function(t,e,n,o){return t=s.map(t,function(t){return t}),t.sort(function(t,a){var r,i;return o?(r=t[o],i=a[o]):(r=t,i=a),!n&&s.isString(r)&&s.isString(i)&&(r=r.toLowerCase(),i=i.toLowerCase()),r<i?e?1:-1:r>i?e?-1:1:0}),t}),string:function(t){return a.copySafeness(t,t)},striptags:function(t,e){t=o(t,""),e=e||!1;var n=/<\/?([a-z][a-z0-9]*)\b[^>]*>|<!--[\s\S]*?-->/gi,s=r.trim(t.replace(n,"")),i="";return i=e?s.replace(/^ +| +$/gm,"").replace(/ +/g," ").replace(/(\r\n)/g,"\n").replace(/\n\n\n+/g,"\n\n"):s.replace(/\s+/gi," "),a.copySafeness(t,i)},title:function(t){t=o(t,"");for(var e=t.split(" "),n=0;n<e.length;n++)e[n]=r.capitalize(e[n]);return a.copySafeness(t,e.join(" "))},trim:function(t){return a.copySafeness(t,t.replace(/^\s*|\s*$/g,""))},truncate:function(t,e,n,s){var r=t;if(t=o(t,""),e=e||255,t.length<=e)return t;if(n)t=t.substring(0,e);else{var i=t.lastIndexOf(" ",e);i===-1&&(i=e),t=t.substring(0,i)}return t+=void 0!==s&&null!==s?s:"...",a.copySafeness(r,t)},upper:function(t){return t=o(t,""),t.toUpperCase()},urlencode:function(t){var e=encodeURIComponent;if(s.isString(t))return e(t);var n;if(s.isArray(t))n=t.map(function(t){return e(t[0])+"="+e(t[1])});else{n=[];for(var o in t)t.hasOwnProperty(o)&&n.push(e(o)+"="+e(t[o]))}return n.join("&")},urlize:function(t,e,n){isNaN(e)&&(e=1/0);var o=n===!0?' rel="nofollow"':"",s=/^(?:\(|<|&lt;)?(.*?)(?:\.|,|\)|\n|&gt;)?$/,a=/^[\w.!#$%&'*+\-\/=?\^`{|}~]+@[a-z\d\-]+(\.[a-z\d\-]+)+$/i,r=/^https?:\/\/.*$/,i=/^www\./,l=/\.(?:org|net|com)(?:\:|\/|$)/,u=t.split(/(\s+)/).filter(function(t){return t&&t.length}).map(function(t){var n=t.match(s),u=n&&n[1]||t;return r.test(u)?'<a href="'+u+'"'+o+">"+u.substr(0,e)+"</a>":i.test(u)?'<a href="http://'+u+'"'+o+">"+u.substr(0,e)+"</a>":a.test(u)?'<a href="mailto:'+u+'">'+u+"</a>":l.test(u)?'<a href="http://'+u+'"'+o+">"+u.substr(0,e)+"</a>":t});return u.join("")},wordcount:function(t){t=o(t,"");var e=t?t.match(/\w+/g):null;return e?e.length:null},float:function(t,e){var n=parseFloat(t);return isNaN(n)?e:n},int:function(t,e){var n=parseInt(t,10);return isNaN(n)?e:n}};r.d=r.default,r.e=r.escape,t.exports=r},function(t,e,n){"use strict";function o(t,e,n){return function(){var o,s,i=r(arguments),l=a(arguments);if(i>t.length){o=Array.prototype.slice.call(arguments,0,t.length);var u=Array.prototype.slice.call(arguments,o.length,i);for(s=0;s<u.length;s++)s<e.length&&(l[e[s]]=u[s]);o.push(l)}else if(i<t.length){for(o=Array.prototype.slice.call(arguments,0,i),s=i;s<t.length;s++){var c=t[s];o.push(l[c]),delete l[c]}o.push(l)}else o=arguments;return n.apply(this,o)}}function s(t){return t.__keywords=!0,t}function a(t){var e=t.length;if(e){var n=t[e-1];if(n&&n.hasOwnProperty("__keywords"))return n}return{}}function r(t){var e=t.length;if(0===e)return 0;var n=t[e-1];return n&&n.hasOwnProperty("__keywords")?e-1:e}function i(t){return"string"!=typeof t?t:(this.val=t,void(this.length=t.length))}function l(t,e){return t instanceof i?new i(e):e.toString()}function u(t){var e=typeof t;return"string"===e?new i(t):"function"!==e?t:function(){var e=t.apply(this,arguments);return"string"==typeof e?new i(e):e}}function c(t,e){return t=void 0!==t&&null!==t?t:"",!e||t instanceof i||(t=k.escape(t.toString())),t}function p(t,e,n){if(null===t||void 0===t)throw new k.TemplateError("attempted to output null or undefined value",e+1,n+1);return t}function d(t,e){return t=t||{},"function"==typeof t[e]?function(){return t[e].apply(t,arguments)}:t[e]}function m(t,e,n,o){if(!t)throw new Error("Unable to call `"+e+"`, which is undefined or falsey");if("function"!=typeof t)throw new Error("Unable to call `"+e+"`, which is not a function");return t.apply(n,o)}function f(t,e,n){var o=e.lookup(n);return void 0!==o&&null!==o?o:t.lookup(n)}function h(t,e,n){return t.lineno?t:new k.TemplateError(t,e,n)}function v(t,e,n,o){if(k.isArray(t)){var s=t.length;k.asyncIter(t,function(t,o,a){switch(e){case 1:n(t,o,s,a);break;case 2:n(t[0],t[1],o,s,a);break;case 3:n(t[0],t[1],t[2],o,s,a);break;default:t.push(o,a),n.apply(this,t)}},o)}else k.asyncFor(t,function(t,e,o,s,a){n(t,e,o,s,a)},o)}function g(t,e,n,o){function s(t,e){l++,i[t]=e,l===a&&o(null,i.join(""))}var a,r,i,l=0;if(k.isArray(t))if(a=t.length,i=new Array(a),0===a)o(null,"");else for(r=0;r<t.length;r++){var u=t[r];switch(e){case 1:n(u,r,a,s);break;case 2:n(u[0],u[1],r,a,s);break;case 3:n(u[0],u[1],u[2],r,a,s);break;default:u.push(r,s),n.apply(this,u)}}else{var c=k.keys(t);if(a=c.length,i=new Array(a),0===a)o(null,"");else for(r=0;r<c.length;r++){var p=c[r];n(p,t[p],r,a,s)}}}var k=n(1),b=n(6),x=b.extend({init:function(t,e){this.variables={},this.parent=t,this.topLevel=!1,this.isolateWrites=e},set:function(t,e,n){var o=t.split("."),s=this.variables,a=this;if(n&&(a=this.resolve(o[0],!0)))return void a.set(t,e);for(var r=0;r<o.length-1;r++){var i=o[r];s[i]||(s[i]={}),s=s[i]}s[o[o.length-1]]=e},get:function(t){var e=this.variables[t];return void 0!==e&&null!==e?e:null},lookup:function(t){var e=this.parent,n=this.variables[t];return void 0!==n&&null!==n?n:e&&e.lookup(t)},resolve:function(t,e){var n=e&&this.isolateWrites?void 0:this.parent,o=this.variables[t];return void 0!==o&&null!==o?this:n&&n.resolve(t)},push:function(t){return new x(this,t)},pop:function(){return this.parent}});i.prototype=Object.create(String.prototype,{length:{writable:!0,configurable:!0,value:0}}),i.prototype.valueOf=function(){return this.val},i.prototype.toString=function(){return this.val},t.exports={Frame:x,makeMacro:o,makeKeywordArgs:s,numArgs:r,suppressValue:c,ensureDefined:p,memberLookup:d,contextOrFrameLookup:f,callWrap:m,handleError:h,isArray:k.isArray,keys:k.keys,SafeString:i,copySafeness:l,markSafe:u,asyncEach:v,asyncAll:g,inOperator:k.inOperator}},function(t,e){"use strict";function n(t){var e=-1;return{current:null,reset:function(){e=-1,this.current=null},next:function(){return e++,e>=t.length&&(e=0),this.current=t[e],this.current}}}function o(t){t=t||",";var e=!0;return function(){var n=e?"":t;return e=!1,n}}function s(){return{range:function(t,e,n){"undefined"==typeof e?(e=t,t=0,n=1):n||(n=1);var o,s=[];if(n>0)for(o=t;o<e;o+=n)s.push(o);else for(o=t;o>e;o+=n)s.push(o);return s},cycler:function(){return n(Array.prototype.slice.call(arguments))},joiner:function(t){return o(t)}}}t.exports=s},function(t,e,n){"use strict";var o=n(11),s=o.extend({init:function(t){this.precompiled=t||{}},getSource:function(t){return this.precompiled[t]?{src:{type:"code",obj:this.precompiled[t]},path:t}:null}});t.exports=s},function(t,e,n){"use strict";var o=n(3),s=n(6),a=n(1),r=s.extend({on:function(t,e){this.listeners=this.listeners||{},this.listeners[t]=this.listeners[t]||[],this.listeners[t].push(e)},emit:function(t){var e=Array.prototype.slice.call(arguments,1);this.listeners&&this.listeners[t]&&a.each(this.listeners[t],function(t){t.apply(null,e)})},resolve:function(t,e){return o.resolve(o.dirname(t),e)},isRelative:function(t){return 0===t.indexOf("./")||0===t.indexOf("../")}});t.exports=r},function(t,e){function n(){"use strict";var t=this.runtime,e=this.lib,n=t.contextOrFrameLookup;t.contextOrFrameLookup=function(t,e,o){var s=n.apply(this,arguments);if(void 0===s)switch(o){case"True":return!0;case"False":return!1;case"None":return null}return s};var o=t.memberLookup,s={pop:function(t){if(void 0===t)return this.pop();if(t>=this.length||t<0)throw new Error("KeyError");return this.splice(t,1)},remove:function(t){for(var e=0;e<this.length;e++)if(this[e]===t)return this.splice(e,1);throw new Error("ValueError")},count:function(t){for(var e=0,n=0;n<this.length;n++)this[n]===t&&e++;return e},index:function(t){var e;if((e=this.indexOf(t))===-1)throw new Error("ValueError");return e},find:function(t){return this.indexOf(t)},insert:function(t,e){return this.splice(t,0,e)}},a={items:function(){var t=[];for(var e in this)t.push([e,this[e]]);return t},values:function(){var t=[];for(var e in this)t.push(this[e]);return t},keys:function(){var t=[];for(var e in this)t.push(e);return t},get:function(t,e){var n=this[t];return void 0===n&&(n=e),n},has_key:function(t){return this.hasOwnProperty(t)},pop:function(t,e){var n=this[t];if(void 0===n&&void 0!==e)n=e;else{if(void 0===n)throw new Error("KeyError");delete this[t]}return n},popitem:function(){for(var t in this){var e=this[t];return delete this[t],[t,e]}throw new Error("KeyError")},setdefault:function(t,e){return t in this?this[t]:(void 0===e&&(e=null),this[t]=e)},update:function(t){for(var e in t)this[e]=t[e];return null}};a.iteritems=a.items,a.itervalues=a.values,a.iterkeys=a.keys,t.memberLookup=function(t,n,r){return t=t||{},e.isArray(t)&&s.hasOwnProperty(n)?function(){return s[n].apply(t,arguments)}:e.isObject(t)&&a.hasOwnProperty(n)?function(){return a[n].apply(t,arguments)}:o.apply(this,arguments)}}t.exports=n}])})},function(t,e,n){t.exports=function(t){function e(t,e,n){var o=t.nextToken();return key=t.parseSignature(null,!0),t.advanceAfterBlockEnd(o.value),new e.CallExtension(this,"run",key)}function n(){this.tags=["trans"],this.parse=e,this.run=function(t,e){if(cosinnus_current_language in{en:{},de:{},ru:{},uk:{},fr:{},pl:{},be:{},es:{},ro:{},nl:{},az:{},hy:{},ka:{},kk:{},he:{},ar:{}}&&e in{en:{},de:{},ru:{},uk:{},fr:{},pl:{},be:{},es:{},ro:{},nl:{},az:{},hy:{},ka:{},kk:{},he:{},ar:{}}[cosinnus_current_language]){var n={en:{},de:{},ru:{},uk:{},fr:{},pl:{},be:{},es:{},ro:{},nl:{},az:{},hy:{},ka:{},kk:{},he:{},ar:{}}[cosinnus_current_language][e];if(n&&n.length>0)return n}return e}}function o(){this.tags=["load"],this.parse=e,this.run=function(){return""}}t.addExtension("translation",new n),t.addExtension("passThrough",new o)}},function(t,e){t.exports=function(t,e,n,o){var s=n.root;n.root=function(t,e,n,a,r,i){var l=t.getTemplate;t.getTemplate=function(t,e,s,a,r){"function"==typeof e&&(r=e=!1);var i=function(t){try{return o[t]}catch(e){if(n.get("_require"))return n.get("_require")(t);console.warn('Could not load template "%s"',t)}},l=i(t);n.set("_require",i),e&&l.compile(),r(null,l)},s(t,e,n,a,r,function(e,n){t.getTemplate=l,i(e,n)})};var a={obj:n,type:"code"};return new t.Template(a,e)}},function(t,e,n){var o,s=n(8);o=s.currentEnv?s.currentEnv:s.currentEnv=new s.Environment([],void 0);var a=(n(9)(o),s.webpackDependencies||(s.webpackDependencies={})),r=n(10);!function(){(s.nunjucksPrecompiled=s.nunjucksPrecompiled||{})["cosinnus/templates/cosinnus/universal/map/popup.html"]=function(){function t(t,e,n,o,s){var a=null,r=null,i="";try{var l=null;i+='<div class="popup">\n    <img src="',i+=o.suppressValue(o.contextOrFrameLookup(e,n,"imageURL"),t.opts.autoescape),i+='" />\n    <div class="details">\n        <div class="link">\n            <a href="',i+=o.suppressValue(o.contextOrFrameLookup(e,n,"url"),t.opts.autoescape),i+='" target="_blank">',i+=o.suppressValue(o.contextOrFrameLookup(e,n,"title"),t.opts.autoescape),i+='</a>\n        </div>\n        <div class="address">',i+=o.suppressValue(o.contextOrFrameLookup(e,n,"address"),t.opts.autoescape),i+='</div>\n        <div class="description">',i+=o.suppressValue(o.contextOrFrameLookup(e,n,"description"),t.opts.autoescape),i+="</div>\n    </div>\n</div>\n",l?l.rootRenderFunc(t,e,n,o,s):s(null,i)}catch(t){s(o.handleError(t,a,r))}}return{root:t}}()}(),t.exports=r(s,o,s.nunjucksPrecompiled["cosinnus/templates/cosinnus/universal/map/popup.html"],a)},function(t,e,n){var o,s=n(8);o=s.currentEnv?s.currentEnv:s.currentEnv=new s.Environment([],void 0);var a=(n(9)(o),s.webpackDependencies||(s.webpackDependencies={})),r=n(10);!function(){(s.nunjucksPrecompiled=s.nunjucksPrecompiled||{})["cosinnus/templates/cosinnus/universal/map/map.html"]=function(){function t(t,e,n,o,s){var a=null,r=null,i="";try{var l=null;i+='<div id="map-container" class="map-root ',i+=o.contextOrFrameLookup(e,n,"fullscreen")?" map-fullscreen ":" map-embed ",i+="  ",o.contextOrFrameLookup(e,n,"splitscreen")&&(i+=" map-splitscreen "),i+=' mobile-view mobile-view-map-visible-block mobile-view-search-visible-block mobile-view-list-visible-block mobile-view-detail-visible-block mobile-view-idea-create-1-visible-block mobile-view-idea-create-2-visible-block">\n    <div class="map-layers-buttons"></div>\n    ',o.contextOrFrameLookup(e,n,"controlsEnabled")&&(i+='\n\t    <a class="map-expand-button mobile-hidden">\n\t    \t<i class="fa fa-fw fa-caret-right expanded"></i>\t\n\t    \t<i class="fa fa-fw fa-search contracted"></i>\t\n\t    </a>\n    '),i+="\n</div>",l?l.rootRenderFunc(t,e,n,o,s):s(null,i)}catch(t){s(o.handleError(t,a,r))}}return{root:t}}()}(),t.exports=r(s,o,s.nunjucksPrecompiled["cosinnus/templates/cosinnus/universal/map/map.html"],a)},function(t,e){"use strict";t.exports={publish:function(t,e){Backbone.trigger(t,e)},subscribe:function(t,e,n){Backbone.on(t,e,n)}}},function(t,e,n){"use strict";var o=n(3),s=(n(15),n(17)),a=n(19),r=n(21),i=n(24),l=n(25),u=n(5);t.exports=o.extend({template:n(26),activeFiltersTemplate:n(27),defaults:{availableFilters:{people:!0,projects:!0,groups:!0,events:!0},activeFilters:{people:!0,projects:!0,groups:!0,events:!0},availableFilterList:[],allTopics:{},allTextTopics:{},allSDGS:{},allManagedTags:{},managedTagsLabels:{},showManagedTagsOnTypesSelected:[],showTextTopicsOnTypesSelected:[],portalInfo:{},controlsEnabled:!0,filterGroup:null,filterManagedTag:null,fullscreen:!1,splitscreen:!1,showMine:!1,hideTopics:!1,paginationControlsEnabled:!0,paginationControlsUseInfiniteScroll:!1,basePageURL:"/map/",myGroups:[],myProjects:[],myOrganizations:[],state:{q:"",activeTopicIds:[],activeTextTopicIds:[],activeSDGIds:[],activeManagedTagsIds:[],filtersActive:!1,typeFiltersActive:!1,topicFiltersActive:!1,dateFiltersActive:!1,textTopicFiltersActive:!1,sdgFiltersActive:!1,managedTagsFiltersActive:!1,ignoreLocation:!1,exchange:!1,matching:"",searching:!1,searchHadErrors:!1,searchResultLimit:20,page:null,pageIndex:0,searchOnScroll:!0,resultsStale:!1,urlSelectedResultId:null,filterPanelVisible:!1,lastViewBeforeDetailWasListView:!1,displayManagedTagsFilter:!0,displayTextTopcFilter:!0,fromDate:null,fromTime:null,toDate:null,toTime:null}},collection:null,paginationControlView:null,mobileControlView:null,createIdeaView:null,selectedResult:null,hoveredResult:null,detailResult:null,detailResultCache:{},searchEndpointURL:"/map/search/",detailEndpointURL:"/map/detail/",searchDelay:1,searchXHRTimeout:15e3,currentSearchHttpRequest:null,currentDetailHttpRequest:null,initialize:function(t,e,n){var s=this;if(COSINNUS_CONFERENCES_ENABLED&&(s.defaults.availableFilters.conferences=!0,s.defaults.activeFilters.conferences=!0),COSINNUS_IDEAS_ENABLED&&(s.defaults.availableFilters.ideas=!0,s.defaults.activeFilters.ideas=!0),COSINNUS_ORGANIZATIONS_ENABLED&&(s.defaults.availableFilters.organizations=!0,s.defaults.activeFilters.organizations=!0),COSINNUS_CLOUD_ENABLED&&(s.defaults.availableFilterList.cloudfiles=!0,s.defaults.activeFilters.cloudfiles=!1),o.prototype.initialize.call(s,t,e,n),_.each(this.options.availableFilters,function(t,e){t&&s.options.availableFilterList.push(e)}),COSINNUS_MAP_OPTIONS.filter_panel_default_visible&&(s.state.filterPanelVisible=!0),COSINNUS_MAP_OPTIONS.ignore_location_default_activated&&(s.state.ignoreLocation=!0),COSINNUS_MAP_OPTIONS.exchange_default_activated&&(s.state.exchange=!0),COSINNUS_MATCHING_ENABLED){var a=new URLSearchParams(window.location.search);s.state.matching=a.get("matching"),s.state.ignoreLocation=!0}if(s.collection||(s.collection=new i),t.searchResultLimit&&!isNaN(t.searchResultLimit)){var r=parseInt(t.searchResultLimit);r>0&&(s.state.searchResultLimit=t.searchResultLimit)}Backbone.mediator.subscribe("want:search",s.handleStartSearch,s),Backbone.mediator.subscribe("end:search",s.handleEndSearch,s),Backbone.mediator.subscribe("app:ready",s.handleAppReady,s),Backbone.mediator.subscribe("app:stale-results",s.handleStaleResults,s),s.triggerMobileDefaultView(),null!=t.filterManagedTag&&(s.defaults.filterManagedTag=t.filterManagedTag),u.log("control-view.js: initialized. with self.App="+s.App)},events:{"click .result-filter-button":"toggleFilterButton","click .topic-button":"toggleFilterButton","click .text-topic-button":"toggleFilterButton","click .reset-all":"resetAllClicked","click .query-search-button ":"triggerQuerySearch","click .icon-filters":"toggleFilterPanel","focus .q":"showFilterPanel","click .reset-type-filters":"resetTypeFiltersClicked",
"click .reset-topic-filters":"resetTopicFiltersClicked","click .reset-text-topic-filters":"resetTextTopicFiltersClicked","click .reset-sdg-filters":"resetSDGFiltersClicked","click .reset-managed-tag-filters":"resetManagedTagsFiltersClicked","click .reset-q":"resetQClicked","click .reset-type-and-topic-filters":"resetAllClicked","click .active-filters":"showFilterPanel","change .check-ignore-location":"markSearchBoxSearchable","change .check-exchange":"markSearchBoxSearchable","keyup .q":"handleTyping","keydown .q":"handleKeyDown","click .sdg-button":"toggleSDGFilterButton","click .managed-tag-button":"toggleManagedTagsFilterButton","mouseenter .hover-image-button":"showHoverIcon","mouseleave .hover-image-button":"hideHoverIcon","mouseenter .hover-image-icon":"hideHoverIcon","click .match-button":"matchButtonClicked"},toggleFilterButton:function(t){t.preventDefault();var e=$(t.currentTarget);e.hasClass("result-filter-button")&&this.$el.find(".result-filter-button").length==this.$el.find(".result-filter-button.selected").length?this.$el.find(".result-filter-button").removeClass("selected"):e.hasClass("topic-button")&&this.$el.find(".topic-button").length==this.$el.find(".topic-button.selected").length?this.$el.find(".topic-button").removeClass("selected"):e.hasClass("text-topic-button")&&this.$el.find(".text-topic-button").length==this.$el.find(".text-topic-button.selected").length&&this.$el.find(".text-topic-button").removeClass("selected"),e.toggleClass("selected"),this.toggleDateTimePicker(),this.toggleManagedTagsOnType(),this.toggleTextTopicsOnType(),this.markSearchBoxSearchable()},toggleManagedTagsOnType:function(){if(this.options.showManagedTagsOnTypesSelected.length>0){var t=this.options.showManagedTagsOnTypesSelected,e=!0,n=$(".result-filter-button.selected");0==n.length?e=!1:n.each(function(n){if(this.hasAttribute("data-result-filter-type")){var o=this.getAttribute("data-result-filter-type");$.inArray(o,t)==-1&&(e=!1)}}),e?$(".managed-tags-buttons").show():$(".managed-tags-buttons").hide()}},toggleTextTopicsOnType:function(){if(this.options.showTextTopicsOnTypesSelected.length>0){var t=this.options.showTextTopicsOnTypesSelected,e=!0,n=$(".result-filter-button.selected");0==n.length?e=!1:n.each(function(n){if(this.hasAttribute("data-result-filter-type")){var o=this.getAttribute("data-result-filter-type");$.inArray(o,t)==-1&&(e=!1)}}),e?$(".text-topic-buttons").show():$(".text-topic-buttons").hide()}},toggleDateTimePicker:function(){var t=["events","conferences"],e=!0;_.each(this.options.availableFilters,function(n,o){n&&$.inArray(o,t)==-1&&(e=!1)});var n=!0,o=$(".result-filter-button.selected");0==o.length?n=!1:o.each(function(e){if(this.hasAttribute("data-result-filter-type")){var o=this.getAttribute("data-result-filter-type");$.inArray(o,t)==-1&&(n=!1)}}),this.state.dateFiltersActive=e||n,this.showOrHideDateTimePicker(this.state.dateFiltersActive)},showOrHideDateTimePicker:function(t){var e=this,n=$("#date-time-filter");t?(n.show(),!n.attr("inited")&&n.is(":visible")&&($.cosinnus.fullcalendar(),$.cosinnus.initCalendarDayTimeChooserWidget(),$(".calendar-date-time-chooser .small-calendar").on("fullCalendarDayClick",function(t,n,o){e.markSearchBoxSearchable()}),$(".calendar-date-time-chooser input").on("keyup change",function(){e.markSearchBoxSearchable()}),n.attr("inited",!0))):n.hide()},toggleSDGFilterButton:function(t){t.preventDefault();var e=$(t.currentTarget);e.hasClass("result-filter-button")&&this.$el.find(".result-filter-button").length==this.$el.find(".result-filter-button.selected").length?this.$el.find(".result-filter-button").removeClass("selected"):e.hasClass("sdg-button")&&this.$el.find(".sdg-button").length==this.$el.find(".sdg-button.selected").length&&this.$el.find(".sdg-button").removeClass("selected"),e.toggleClass("selected"),this.markSearchBoxSearchable()},toggleManagedTagsFilterButton:function(t){t.preventDefault();var e=$(t.currentTarget);e.hasClass("result-filter-button")&&this.$el.find(".result-filter-button").length==this.$el.find(".result-filter-button.selected").length?this.$el.find(".result-filter-button").removeClass("selected"):e.hasClass("managedTags-button")&&this.$el.find(".managedTags-button").length==this.$el.find(".managedTags-button.selected").length&&this.$el.find(".managedTags-button").removeClass("selected"),e.toggleClass("selected"),this.markSearchBoxSearchable()},matchButtonClicked:function(t){t.preventDefault();var e=$(t.currentTarget),n=new URLSearchParams(window.location.search);n.set("matching",e.data("match")),window.location.search=n.toString(),this.triggerSearchFromUrl(!0)},resetAllClicked:function(t){t.preventDefault(),this.resetAll(),this.render();var e="reset-filters-search";this.triggerDelayedSearch(!0,!1,!1,e)},resetAll:function(){this.state.q="",this.resetTopics(),this.resetTextTopics(),this.resetSDGS(),this.resetManagedTags(),this.resetDateTimeWidget(),this.resetTypeFilters(),this.clearDetailResultCache()},resetDateTimeWidget:function(){var t=moment().format("YYYY-MM-DD"),e=moment().add(3,"M").format("YYYY-MM-DD");this.state.fromDate=t,this.state.fromTime="00:00",this.state.toDate=e,this.state.toTime="23:59"},resetTopics:function(){this.state.activeTopicIds=[]},resetTextTopics:function(){this.state.activeTextTopicIds=[]},resetSDGS:function(){this.state.activeSDGIds=[]},resetManagedTags:function(){null!=this.defaults.filterManagedTag?(this.state.activeManagedTagsIds=[this.defaults.filterManagedTag],this.defaults.filterManagedTag=null):this.state.activeManagedTagsIds=[]},resetTypeFilters:function(){this.state.activeFilters=_(this.options.availableFilters).clone(),this.state.typeFiltersActive=!1,this.options.showTextTopicsOnTypesSelected.length>0&&this.resetTextTopics(),this.options.showManagedTagsOnTypesSelected.length>0&&this.resetManagedTags(),this.toggleDateTimePicker()},resetTypeFiltersClicked:function(t){t.preventDefault(),t.stopPropagation(),this.resetTypeFilters(),this.resetDateTimeWidget(),this.render(),this.clearDetailResultCache();var e="reset-filters-search";this.triggerDelayedSearch(!0,!1,!1,e)},resetTopicFiltersClicked:function(t){t.preventDefault(),t.stopPropagation(),this.resetTopics(),this.render(),this.clearDetailResultCache();var e="reset-filters-search";this.triggerDelayedSearch(!0,!1,!1,e)},resetTextTopicFiltersClicked:function(t){t.preventDefault(),t.stopPropagation(),this.resetTextTopics(),this.render(),this.clearDetailResultCache();var e="reset-filters-search";this.triggerDelayedSearch(!0,!1,!1,e)},resetSDGFiltersClicked:function(t){t.preventDefault(),t.stopPropagation(),this.resetSDGS(),this.render(),this.clearDetailResultCache();var e="reset-filters-search";this.triggerDelayedSearch(!0,!1,!1,e)},resetManagedTagsFiltersClicked:function(t){t.preventDefault(),t.stopPropagation(),this.resetManagedTags(),this.render(),this.clearDetailResultCache();var e="reset-filters-search";this.triggerDelayedSearch(!0,!1,!1,e)},resetQClicked:function(t){t.preventDefault(),t.stopPropagation(),this.state.q="",this.render(),this.clearDetailResultCache();var e="reset-filters-search";this.triggerDelayedSearch(!0,!1,!1,e)},resetTypeAndTopicFiltersClicked:function(t){t.preventDefault(),t.stopPropagation(),this.resetTypeFilters(),this.resetTopics(),this.resetDateTimeWidget(),this.render(),this.clearDetailResultCache();var e="reset-filters-search";this.triggerDelayedSearch(!0,!1,!1,e)},onTopicLinkClicked:function(t){t.preventDefault(),t.stopPropagation();var e=$(t.target),n=e.attr("data-topic-id");this.resetAll(),this.state.activeTopicIds=[parseInt(n)],this.clearDetailResultCache(),this.triggerDelayedSearch(!0)},onTextTopicLinkClicked:function(t){t.preventDefault(),t.stopPropagation();var e=$(t.target),n=e.attr("data-text-topic-id");this.resetAll(),this.state.activeTextTopicIds=[parseInt(n)],this.clearDetailResultCache(),this.triggerDelayedSearch(!0)},onManagedTagLinkClicked:function(t){t.preventDefault(),t.stopPropagation();var e=$(t.target),n=e.attr("data-managed-tag-id");this.resetAll(),this.state.activeManagedTagsIds=[parseInt(n)],this.clearDetailResultCache(),this.triggerDelayedSearch(!0)},toggleSearchOnScrollClicked:function(t){this.state.searchOnScroll=!this.state.searchOnScroll,1==this.state.searchOnScroll&&this.state.resultsStale&&this.staleSearchButtonClicked(t)},staleSearchButtonClicked:function(t){t.preventDefault(),this.clearDetailResultCache(),this.triggerDelayedSearch(!0),this.state.resultsStale=!1,this.paginationControlView&&this.paginationControlView.render()},paginationForwardClicked:function(t){t&&t.preventDefault(),this.state.page.has_next&&(this.state.pageIndex+=1,this.triggerDelayedSearch(!0,!0,!1,"paginate-search"))},paginationBackClicked:function(t){t&&t.preventDefault(),this.state.page.has_previous&&this.state.pageIndex>0&&(this.state.pageIndex-=1,this.triggerDelayedSearch(!0,!0,!1,"paginate-search"))},openCreateIdeaView:function(t){var e=this;COSINNUS_IDEAS_ENABLED&&(e.createIdeaView?e.createIdeaView.$el.removeClass("hidden"):e.createIdeaView=new r({elParent:e.App.el},e.App,e).render(),Backbone.mediator.publish("ideas:create-view-opened"))},closeCreateIdeaView:function(t){var e=this;e.createIdeaView.$el.addClass("hidden"),e.untriggerMobileIdeaCreateView(t),Backbone.mediator.publish("ideas:create-view-closed")},_resetMobileView:function(t,e){this.detailResult&&!e&&this.displayDetailResult(null),this.App.$el.removeClass("mobile-view-map mobile-view-search mobile-view-list mobile-view-detail mobile-view-idea-create-1 mobile-view-idea-create-2")},triggerMobileDefaultView:function(t){this.options.splitscreen?this.triggerMobileMapView(t):this.triggerMobileListView(t)},triggerMobileListView:function(t){this._resetMobileView(),this.App.$el.addClass("mobile-view-list"),this.App.tileListView&&this.App.tileListView.gridRefresh()},triggerMobileSearchView:function(t){this._resetMobileView(),this.App.$el.addClass("mobile-view-search"),this.$el.find(".q").focus()},triggerMobileMapView:function(t){this._resetMobileView(),this.App.$el.addClass("mobile-view-map")},triggerMobileDetailView:function(t){this.state.lastViewBeforeDetailWasListView=this.App.$el.hasClass("mobile-view-list"),this._resetMobileView(t,!0),this.App.$el.addClass("mobile-view-detail")},triggerMobileIdeaCreate1View:function(t){this._resetMobileView(),this.openCreateIdeaView(t),this.App.$el.addClass("mobile-view-idea-create-1")},triggerMobileIdeaCreate2View:function(t){this._resetMobileView(),this.App.$el.addClass("mobile-view-idea-create-2")},untriggerMobileIdeaCreateView:function(t){this.triggerMobileDefaultView(t)},untriggerMobileDetailView:function(t){this.state.lastViewBeforeDetailWasListView?this.triggerMobileListView(t):this.triggerMobileMapView(t)},showHoverIcon:function(t){var e=$(t.target.querySelector("img"));e.removeClass("hover-image-icon-hidden")},hideHoverIcon:function(t){"IMG"==t.target.tagName?$(t.target).addClass("hover-image-icon-hidden"):$(t.target.querySelector("img")).addClass("hover-image-icon-hidden")},switchDisplayState:function(t,e){return t||e?(this.App.displayOptions.showMap=t,this.App.displayOptions.showTiles=e,this.options.splitscreen=t&&e,this.App.loadTileView(),void this.App.loadMapView()):void u.log("control-view.js: cant hide both tile and map views at the same time!")},triggerQuerySearch:function(){var t=this.$el.find(".q").val();this.state.q=t,this.applyFilters(),this.state.ignoreLocation=!this.$el.find(".check-ignore-location").is(":checked"),this.state.exchange=this.$el.find(".check-exchange").is(":checked"),this.clearDetailResultCache();var e="manual-search";this.triggerDelayedSearch(!0,!1,!1,e)},clearDetailResultCache:function(){self.detailResultCache={}},onResultLinkClicked:function(t,e,n){var o=this;t&&(t.preventDefault(),t.stopPropagation());var s=null;if(!e&&t){var a=$(t.target).closest(".result-link"),s={portal:a.attr("data-portal")||0,type:a.attr("data-type"),slug:a.attr("data-slug")};e=u.makeDirectItemId(s.portal,s.type,s.slug)}else var s=u.parseDirectItemId(e);if(u.log("tile-view.js: got a select click event! data: "+JSON.stringify(s)),"cloudfile"==s.type)return void window.open(s.slug);var r=null;if(e in o.detailResultCache)r=o.detailResultCache[e],o.displayDetailResult(r);else{var i=$.param(s),c=this.detailEndpointURL+"?"+i;o.currentDetailHttpRequest&&(u.log("control-view.js: New detail request! Aborting current request."),o.currentDetailHttpRequest.abort());var p=!1;o.currentDetailHttpRequest=$.ajax(c,{type:"GET",timeout:o.searchXHRTimeout,success:function(t,e){u.log("got resultssss for detail"),u.log(t),u.log(e),"result"in t?(r=new l(t.result),o.detailResultCache[r.id]=r,o.displayDetailResult(r),App.displayOptions.routeNavigation&&!n&&(u.log("control-view.js: +++++++++++++++++ since we are fullscreen, publishing detail router URL update!"),o.addCurrentHistoryState())):p=!0},error:function(t,e){u.log("control-view.js: Detail XHR failed."),"abort"!==e&&(p=!0)},complete:function(t,e){u.log("control-view.js: Search complete: "+e),"abort"!==e&&("success"!==e&&(p=!0),o.currentDetailHttpRequest=null,p&&(403==t.status?o.displayDetailResult(new l({type:"error-403"})):o.displayDetailResult(new l({type:"error"}))))}})}},triggerResultLikeOrUnlike:function(t){var e=this,n="/likefollowstar/",o=u.getAPIDataForDirectItemId(t.get("id"));if(null==o||"ideas"!=t.get("type")&&"events"!=t.get("type"))return void u.log("Liking cancelled - invalid result type for liking: "+t.get("type"));var s=t.get("liked")?"0":"1",a=t.get("participant_count")-(t.get("liked")?1:0);o.like=s,"0"==s&&"ideas"==t.get("type")&&(o.follow="0"),u.log('Sending like request for slug "'+t.get("slug")+'" and like: '+s);var r=!1;e.currentDetailHttpRequest=$.ajax(n,{type:"POST",timeout:e.searchXHRTimeout,data:o,success:function(n,o){u.log("got resultssss for like"),u.log(n),u.log(o),"liked"in n&&("ideas"==t.get("type")&&t.set("participant_count",a+(n.liked?1:0)),t.set("liked",n.liked),t.set("followed",n.followed),"ideas"==t.get("type")&&n.followed&&e.App.$el.find(".now-following-message").show())},error:function(t,e){u.log("control-view.js: Like XHR failed."),r=!0},complete:function(t,e){u.log("control-view.js: Like complete: "+e),"success"!==e&&(r=!0),r&&$(".like-button-error").show()}})},triggerResultFollowOrUnfollow:function(t){var e=this,n="/likefollowstar/",o=u.getAPIDataForDirectItemId(t.get("id"));if(null==o)return void u.log("Following cancelled - invalid result type for liking: "+t.get("type"));var s=t.get("followed")?"0":1;o.follow=s,u.log('Sending follow request for slug "'+t.get("slug")+'" and follow: '+s);var a=!1;e.currentDetailHttpRequest=$.ajax(n,{type:"POST",timeout:e.searchXHRTimeout,data:o,success:function(n,o){u.log("got resultssss for follow"),u.log(n),u.log(o),"followed"in n&&(t.set("followed",n.followed),n.followed&&e.App.$el.find(".now-following-message").show())},error:function(t,e){u.log("control-view.js: Follow XHR failed."),a=!0},complete:function(t,e){u.log("control-view.js: Follow complete: "+e),"success"!==e&&(a=!0),a&&$(".follow-button-error").show()}})},triggerResultStarOrUnstar:function(t){var e=this,n="/likefollowstar/",o=u.getAPIDataForDirectItemId(t.get("id"));if(null==o)return void u.log("Marking cancelled - invalid result type for starring: "+t.get("type"));var s=t.get("starred")?"0":1;o.star=s,u.log('Sending star request for slug "'+t.get("slug")+'" and star: '+s);var a=!1;e.currentDetailHttpRequest=$.ajax(n,{type:"POST",timeout:e.searchXHRTimeout,data:o,success:function(e,n){u.log("got resultssss for star"),u.log(e),u.log(n),"starred"in e&&t.set("starred",e.starred)},error:function(t,e){u.log("control-view.js: Star XHR failed."),a=!0},complete:function(t,e){u.log("control-view.js: Star complete: "+e),"success"!==e&&(a=!0),a&&$(".star-button-error").show()}})},displayDetailResult:function(t){if(!t)return this._setSelectedResult(null),this.detailResult=null,void Backbone.mediator.publish("result:detail-closed");var e=this.collection.get(t.id);e?this._setSelectedResult(e):this._setSelectedResult(null),this.detailResult=t,Backbone.mediator.publish("result:detail-opened",t)},toggleFilterPanel:function(t){t&&t.preventDefault(),this.state.filterPanelVisible?this.hideFilterPanel(t):this.showFilterPanel(t)},showFilterPanel:function(t){t&&t.preventDefault(),this.state.filterPanelVisible=!0,this.$el.find(".map-controls-filters").slideDown(250),this.$el.find(".icon-filters").addClass("open"),this.$el.parents().find(".controls").addClass("open"),this.toggleDateTimePicker()},hideFilterPanel:function(t){t&&t.preventDefault(),this.state.filterPanelVisible=!1,this.$el.find(".map-controls-filters").slideUp(250),this.$el.find(".icon-filters").removeClass("open"),this.$el.parents().find(".controls").removeClass("open")},handleTyping:function(t){var e=this;return u.isIgnorableKey(t)?(t.preventDefault(),!1):void e.markSearchBoxSearchable()},handleKeyDown:function(t){if(13==t.keyCode)return t.preventDefault(),this.triggerQuerySearch(),!1},markSearchBoxSearchable:function(){this.$el.find(".icon-search").addClass("active"),this.$el.find(".button-search").removeClass("disabled")},handleStartSearch:function(t){this.$el.find(".icon-loading").removeClass("hidden"),this.$el.find(".icon-reset").addClass("hidden"),this.$el.find(".q").blur(),this.options.paginationControlsUseInfiniteScroll&&"paginate-search"==t||_.each(this.App.contentViews,function(t){t.disableInput()})},handleEndSearch:function(t){this.$el.find(".icon-loading").addClass("hidden"),this.$el.find(".icon-reset").toggleClass("hidden",!this.state.filtersActive&&!this.state.q),_.each(this.App.contentViews,function(t){t.enableInput()})},handleAppReady:function(t){u.log("control-view.js: app is ready to search. starting search from URL!"),this.triggerSearchFromUrl()},afterRender:function(){var t=this;!t.paginationControlView&&t.options.paginationControlsEnabled&&t.App.tileListView&&(t.paginationControlView=new s({model:null,el:t.App.tileListView.$el.find(".pagination-controls"),fullscreen:t.App.displayOptions.fullscreen,splitscreen:t.App.displayOptions.showMap&&t.App.displayOptions.showTiles},t.App,t).render()),t.mobileControlView||(t.mobileControlView=new a({model:null,elParent:t.App.el},t.App,t).render());var e=$("#date-time-filter");e.find("#id_start_0").val(this.state.fromDate),e.find("#id_start_1").val(this.state.fromTime),e.find("#id_end_0").val(this.state.toDate),e.find("#id_end_1").val(this.state.toTime),this.toggleDateTimePicker()},triggerSearchFromUrl:function(t){this.resetAll();var e=this.parseUrl(window.location.href.replace(window.location.origin,""));this.options.paginationControlsUseInfiniteScroll&&"page"in e&&delete e.page,_.each(this.App.contentViews,function(t){t.applyUrlSearchParameters(e)}),this.determineActiveFilterStatuses(),COSINNUS_MATCHING_ENABLED&&this.state.matching&&_.extend(this.options,this.getMatchingOptions()),this.render(),this.triggerDelayedSearch(!0,!0,t,"initial-search")},handleStaleResults:function(t){if("viewport-changed"==t.reason?u.log("*** control-view.js: Received signal for stale results bc of viewport change"):"map-navigate"==t.reason&&u.log("*** control-view.js: Received signal for stale results bc of map-navigate"),"viewport-changed"==t.reason&&this.App.$el.hasClass("mobile-view-search"))return void u.log("*** control-view.js: Prevented refresh of results while search panel is open.");var e=this.state.resultsStale;if(this.state.resultsStale=!0,"map-navigate"==t.reason)this.triggerSearchFromUrl(!0);else if(this.state.searchOnScroll)if(this.$el.find(".q").is(":focus"))u.log("control-view.js: Prevented a search while input is focused!");else{var n="viewport-changed"==t.reason;this.triggerDelayedSearch(!1,n,!1,t.reason)}else e||this.paginationControlView&&this.paginationControlView.render()},addCurrentHistoryState:function(){var t=this;Backbone.mediator.publish("navigate:router",t.buildSearchQueryURL(!1).replace(t.searchEndpointURL,"/"))},processSearchResults:function(t,e){var n=this,o=[];if(_.each(t,function(t){var e=new l(t);o.push(e)}),n.selectedResult){var s=o.map(function(t){return t.id}).indexOf(n.selectedResult.id);s>-1?o[s].set("selected",!0):o.push(n.selectedResult)}if(n.hoveredResult){var s=o.map(function(t){return t.id}).indexOf(n.hoveredResult.id);s>-1?o[s].set("hovered",!0):o.push(n.hoveredResult)}u.log("control-view.js:processSearchResults: check that the currently selected object is kept in the collection!"),u.log("control-view.js: got the results back and updated the collection!"),u.log(n.collection.toJSON()),n.options.paginationControlsUseInfiniteScroll&&"paginate-search"==e?n.collection.add(o):(n.collection.reset(o),n.detailResult&&!n.state.urlSelectedResultId&&"viewport-changed"!=e&&n.displayDetailResult(null)),!n.state.urlSelectedResultId||n.detailResult&&n.state.urlSelectedResultId==n.detailResult.id||(n.onResultLinkClicked(null,n.state.urlSelectedResultId,!0),n.state.urlSelectedResultId=null)},_setSelectedResult:function(t){null!=this.selectedResult?(this.selectedResult.set("selected",!1),null!=t?Backbone.mediator.publish("result:reselected",t):Backbone.mediator.publish("result:unselected",this.selectedResult)):null!=t&&Backbone.mediator.publish("result:selected",t),this.selectedResult=t,null!=this.selectedResult&&(this.selectedResult.set("selected",!0),this.setHoveredResult(null))},setHoveredResult:function(t){t&&t==this.selectedResult||(null!=this.hoveredResult&&this.hoveredResult.set("hovered",!1),this.hoveredResult=t,null!=this.hoveredResult&&this.hoveredResult.set("hovered",!0))},getMatchingOptions:function(){var t={myGroups:[],myProjects:[],myOrganizations:[]},e=this,n=function(t){return t.is_open_for_cooperation},o=function(t){return function(n){return _.extend(n,{selected:e.state.matching===t+"."+n.slug})}};return $.ajax({url:"/api/v2/groups/mine?limit=100",success:function(e){var s=e.results.filter(function(t){return n(t)&&t.slug!==COSINNUS_FORUM_GROUP_SLUG});t.myGroups=s.map(o("groups"))},async:!1}),$.ajax({url:"/api/v2/projects/mine?limit=100",success:function(e){var s=e.results.filter(n);t.myProjects=s.map(o("projects"))},async:!1}),$.ajax({url:"/api/v2/organizations/mine?limit=100",success:function(e){var s=e.results.filter(n);t.myOrganizations=s.map(o("organizations"))},async:!1}),console.log(t),t},determineActiveFilterStatuses:function(){var t=this;t.state.filtersActive=!1,t.state.textTopicFiltersActive=!1,t.state.topicFiltersActive=!1,t.state.sdgFiltersActive=!1,t.state.managedTagsFiltersActive=!1,t.state.typeFiltersActive=!1,t.state.activeTopicIds.length>0&&(t.state.filtersActive=!0,t.state.topicFiltersActive=!0),t.state.activeTextTopicIds.length>0&&(t.state.filtersActive=!0,t.state.textTopicFiltersActive=!0),t.state.activeSDGIds.length>0&&(t.state.filtersActive=!0,t.state.sdgFiltersActive=!0),t.state.activeManagedTagsIds.length>0&&(t.state.filtersActive=!0,t.state.managedTagsFiltersActive=!0),_.each(Object.keys(t.options.availableFilters),function(e){t.options.availableFilters[e]!=t.state.activeFilters[e]&&(t.state.filtersActive=!0,t.state.typeFiltersActive=!0)})},search:function(t,e){var n=this;n.state.resultsStale=!1;var o=n.buildSearchQueryURL(!0);n.state.searching=!0,n.currentSearchHttpRequest&&(u.log("control-view.js: New search! Aborting current search request."),n.currentSearchHttpRequest.abort()),n.currentSearchHttpRequest=$.ajax(o,{type:"GET",timeout:n.searchXHRTimeout,success:function(o,s){!App.displayOptions.routeNavigation||t||n.selectedResult||(u.log("control-view.js: +++++++++++++++++ since we are fullscreen, publishing router URL update!"),n.addCurrentHistoryState()),u.log("got resultssss"),u.log(o),u.log(s);var a=o.results;n.processSearchResults(a,e),n.state.page=o.page,n.state.pageIndex=o.page&&o.page.index||0,n.state.searchHadErrors=!1},error:function(t,e){u.log("control-view.js: Search XHR failed."),"abort"!==e&&(Backbone.mediator.publish("error:search"),n.state.searchHadErrors=!0)},complete:function(t,o){u.log("control-view.js: Search complete: "+o),"abort"!==o&&("success"!==o&&(n.state.searchHadErrors=!0),n.state.searching=!1,n.options.controlsEnabled&&(n.determineActiveFilterStatuses(),n.refreshSearchControls(),"manual-search"==e&&n.hideFilterPanel(),n.renderActiveFilters(),n.paginationControlView&&n.paginationControlView.render(),"manual-search"==e&&n.triggerMobileDefaultView(event),("manual-search"==e||"reset-filters-search"==e||"paginate-search"==e&&!n.options.paginationControlsUseInfiniteScroll)&&$(".tile-contents").scrollTop(0)),n.currentSearchHttpRequest=null,Backbone.mediator.publish("end:search",e))}})},refreshSearchControls:function(){var t=this;t.$el.find(".icon-filters").toggleClass("active",t.state.filtersActive),t.$el.find(".icon-reset").toggleClass("hidden",!t.state.filtersActive&&!t.state.q),t.$el.find(".icon-search").removeClass("active"),t.$el.find(".button-search").addClass("disabled")},renderActiveFilters:function(){if(this.state.filtersActive||this.state.q){var t=this.getTemplateData(),e=this.activeFiltersTemplate.render(t);this.$el.find(".map-controls-active-filters").html(e).show()}else this.$el.find(".map-controls-active-filters").hide().empty()},applyUrlSearchParameters:function(t){if(_.extend(this.state,{activeFilters:{people:!!this.options.availableFilters.people&&u.ifundef(t.people,this.options.activeFilters.people),events:!!this.options.availableFilters.events&&u.ifundef(t.events,this.options.activeFilters.events),projects:!!this.options.availableFilters.projects&&u.ifundef(t.projects,this.options.activeFilters.projects),groups:!!this.options.availableFilters.groups&&u.ifundef(t.groups,this.options.activeFilters.groups)},q:u.ifundef(t.q,this.state.q),ignoreLocation:u.ifundef(t.ignore_location,this.state.ignoreLocation),exchange:u.ifundef(t.exchange,this.state.exchange),matching:u.ifundef(t.matching,this.state.matching),searchResultLimit:u.ifundef(t.limit,this.state.searchResultLimit),activeTopicIds:u.ifundef(t.topics,this.state.activeTopicIds),activeTextTopicIds:u.ifundef(t.text_topics,this.state.activeTextTopicIds),activeSDGIds:u.ifundef(t.sdgs,this.state.activeSDGIds),activeManagedTagsIds:u.ifundef(t.managed_tags,this.state.activeManagedTagsIds),pageIndex:u.ifundef(t.page,this.state.pageIndex),urlSelectedResultId:u.ifundef(t.item,this.state.urlSelectedResultId)}),COSINNUS_IDEAS_ENABLED&&(this.state.activeFilters.ideas=!!this.options.availableFilters.ideas&&u.ifundef(t.ideas,this.options.activeFilters.ideas)),COSINNUS_ORGANIZATIONS_ENABLED&&(this.state.activeFilters.organizations=!!this.options.availableFilters.organizations&&u.ifundef(t.organizations,this.options.activeFilters.organizations)),COSINNUS_CONFERENCES_ENABLED&&(this.state.activeFilters.conferences=!!this.options.availableFilters.conferences&&u.ifundef(t.conferences,this.options.activeFilters.conferences)),COSINNUS_CLOUD_ENABLED&&(this.state.activeFilters.cloudfiles=!!this.options.availableFilterList.cloudfiles&&u.ifundef(t.cloudfiles,this.options.activeFilters.cloudfiles)),cosinnus_active_user&&(this.options.showMine=u.ifundef(t.mine,this.options.showMine)),this.state.typeFiltersActive=Object.values(this.state.activeFilters).indexOf(!1)>-1,this.options.showManagedTagsOnTypesSelected.length>0){var e=this.state.activeFilters,n=_.some(this.options.showManagedTagsOnTypesSelected,function(t){if(e[t])return!0});this.state.displayManagedTagsFilter=n&&this.state.typeFiltersActive}if(this.options.showTextTopicsOnTypesSelected.length>0){var e=this.state.activeFilters,o=_.some(this.options.showTextTopicsOnTypesSelected,function(t){if(e[t])return!0});this.state.displayTextTopcFilter=o&&this.state.typeFiltersActive}var s=moment().format("YYYY-MM-DD"),a=moment().add(3,"M").format("YYYY-MM-DD");this.state.fromDate=u.ifundef(t.fromDate,s),this.state.fromTime=u.ifundef(t.fromTime,"00:00").replace("%3A",":"),this.state.toDate=u.ifundef(t.toDate,a),this.state.toTime=u.ifundef(t.toTime,"23:59").replace("%3A",":")},contributeToSearchParameters:function(t){var e={q:this.state.q,people:this.state.activeFilters.people,events:this.state.activeFilters.events,projects:this.state.activeFilters.projects,groups:this.state.activeFilters.groups};if(this.state.dateFiltersActive){var n=$("#date-time-filter"),o=n.find("#id_start_0").val()||this.state.fromDate,s=n.find("#id_start_1").val()||this.state.fromTime,a=n.find("#id_end_0").val()||this.state.toDate,r=n.find("#id_end_1").val()||this.state.fromDate;s.includes(":")||(s+=":00"),r.includes(":")||(r+=":00"),o&&(_.extend(e,{fromDate:o}),s&&_.extend(e,{fromTime:s})),a&&(_.extend(e,{toDate:a}),r&&_.extend(e,{toTime:r}))}return COSINNUS_IDEAS_ENABLED&&_.extend(e,{ideas:this.state.activeFilters.ideas}),COSINNUS_ORGANIZATIONS_ENABLED&&_.extend(e,{organizations:this.state.activeFilters.organizations}),COSINNUS_CONFERENCES_ENABLED&&_.extend(e,{conferences:this.state.activeFilters.conferences}),COSINNUS_CLOUD_ENABLED&&_.extend(e,{cloudfiles:this.state.activeFilters.cloudfiles}),this.state.activeTopicIds.length>0&&_.extend(e,{topics:this.state.activeTopicIds.join(",")}),this.state.activeTextTopicIds.length>0&&_.extend(e,{text_topics:this.state.activeTextTopicIds.join(",")}),this.state.activeSDGIds.length>0&&_.extend(e,{sdgs:this.state.activeSDGIds.join(",")}),this.state.activeManagedTagsIds.length>0&&_.extend(e,{managed_tags:this.state.activeManagedTagsIds.join(",")}),this.state.pageIndex>0&&_.extend(e,{page:this.state.pageIndex}),this.detailResult?_.extend(e,{item:this.detailResult.id}):this.state.urlSelectedResultId&&_.extend(e,{item:this.state.urlSelectedResultId}),this.options.showMine&&_.extend(e,{mine:1}),this.state.ignoreLocation&&_.extend(e,{ignore_location:1}),this.state.exchange&&_.extend(e,{exchange:1}),this.state.matching&&_.extend(e,{matching:this.state.matching}),t&&_.extend(e,{limit:this.state.searchResultLimit}),u.log("control-view.js: returning search params:"),u.log(e),e},buildSearchQueryURL:function(t){var e={};_.each(this.App.contentViews,function(n){_.extend(e,n.contributeToSearchParameters(t))});var n=$.param(e),o=this.searchEndpointURL;return this.options.filterGroup&&(o=o+this.options.filterGroup+"/"),o=o+"?"+n,u.log(" ************  BUILD SEARCH QUERY URL RETURNED (forAPI): "+t),u.log(o),o},applyFilters:function(){var t=this,e=!0;t.$el.find(".result-filter-button").each(function(){var n=$(this),o=n.attr("data-result-filter-type"),s=n.hasClass("selected");t.state.activeFilters[o]=s,s&&(e=!1)}),e&&t.resetTypeFilters(),t.resetTopics(),t.$el.find(".topic-button.selected").each(function(){var e=$(this),n=parseInt(e.attr("data-topic-id"));t.state.activeTopicIds.push(n)}),t.resetTextTopics(),t.$el.find(".text-topic-button.selected").each(function(){var e=$(this),n=parseInt(e.attr("data-text-topic-id"));t.state.activeTextTopicIds.push(n)}),t.resetSDGS(),t.$el.find(".sdg-button.selected").each(function(){var e=$(this),n=parseInt(e.attr("data-sdg-id"));t.state.activeSDGIds.push(n)}),t.resetManagedTags(),t.$el.find(".managed-tag-button.selected").each(function(){var e=$(this),n=parseInt(e.attr("data-managed-tag-id"));t.state.activeManagedTagsIds.push(n)})},toggleFilter:function(t){var e=this.state.activeFilters;e[t]=!e[t],this.state.activeFilters=e,this.triggerDelayedSearch(!0)},triggerDelayedSearch:function(t,e,n,o){var s=this,a=s.searchDelay;t&&(a=0),e||(s.state.pageIndex=0),clearTimeout(this.searchTimeout),Backbone.mediator.publish("want:search",o),s.searchTimeout=setTimeout(function(){s.search(n,o)},a)},activeFilterList:function(){return _(_(this.state.activeFilters).keys()).select(function(t){return!!t})}})},function(t,e,n){"use strict";var o=n(4);t.exports=o.extend({template:n(16),initialize:function(t){var e=this;o.prototype.initialize.call(e,t),this.state.message=t.message}})},function(t,e,n){var o,s=n(8);o=s.currentEnv?s.currentEnv:s.currentEnv=new s.Environment([],void 0);var a=(n(9)(o),s.webpackDependencies||(s.webpackDependencies={})),r=n(10);!function(){(s.nunjucksPrecompiled=s.nunjucksPrecompiled||{})["cosinnus/templates/cosinnus/universal/xhr-error.html"]=function(){function t(t,e,n,o,s){var a=null,r=null,i="";try{var l=null;i+='<div class="error">\n    ',
i+=o.suppressValue(o.contextOrFrameLookup(e,n,"message"),t.opts.autoescape),i+="\n</div>\n",l?l.rootRenderFunc(t,e,n,o,s):s(null,i)}catch(t){s(o.handleError(t,a,r))}}return{root:t}}()}(),t.exports=r(s,o,s.nunjucksPrecompiled["cosinnus/templates/cosinnus/universal/xhr-error.html"],a)},function(t,e,n){"use strict";var o=n(4),s=(n(5),n(18));t.exports=o.extend({App:null,controlView:null,template:s,defaults:{infiniteScrollHasTriggered:!1},events:{"click .toggle-search-on-scroll":"toggleSearchOnScrollClicked","click .stale-search-button":"staleSearchButtonClicked","click .trigger-pagination-forward":"paginationForwardClicked","click .trigger-pagination-backward":"paginationBackClicked","click .trigger-create-idea":"createIdeaClicked"},initialize:function(t,e,n){var s=this;o.prototype.initialize.call(s,t),s.App=e,s.controlView=n,s.controlView.options.paginationControlsUseInfiniteScroll&&Backbone.mediator.subscribe("tile-list:scroll-end-reached",s.handleInfiniteScrollTriggered,s)},getTemplateData:function(){var t=this,e=o.prototype.getTemplateData.call(t),n=COSINNUS_IDEAS_ENABLED&&t.App.displayOptions.showMap&&!t.App.mapView.draggableMarker;return e=_.extend(e,t.controlView.options,t.controlView.state,{show_idea_button:n})},afterRender:function(){var t=this;t.state.infiniteScrollHasTriggered=!1},handleInfiniteScrollTriggered:function(t){this.controlView.state.searching||this.state.infiniteScrollHasTriggered||(this.state.infiniteScrollHasTriggered=!0,this.paginationForwardClicked())},toggleSearchOnScrollClicked:function(t){this.controlView.toggleSearchOnScrollClicked(t)},staleSearchButtonClicked:function(t){this.controlView.staleSearchButtonClicked(t)},paginationForwardClicked:function(t){this.controlView.paginationForwardClicked(t)},paginationBackClicked:function(t){this.controlView.paginationBackClicked(t)},createIdeaClicked:function(t){this.controlView.openCreateIdeaView(t)}})},function(t,e,n){var o,s=n(8);o=s.currentEnv?s.currentEnv:s.currentEnv=new s.Environment([],void 0);var a=(n(9)(o),s.webpackDependencies||(s.webpackDependencies={})),r=n(10);!function(){(s.nunjucksPrecompiled=s.nunjucksPrecompiled||{})["cosinnus/templates/cosinnus/universal/map/pagination-controls.html"]=function(){function t(t,e,n,o,s){var a=null,r=null,i="";try{var l=null;i+=o.suppressValue(t.getExtension("passThrough").run(e,o.contextOrFrameLookup(e,n,"i18n")),t.opts.autoescape),i+="\n\n",o.contextOrFrameLookup(e,n,"paginationControlsEnabled")&&!o.contextOrFrameLookup(e,n,"paginationControlsUseInfiniteScroll")&&(i+='\n    <div class="map-pagination-controls mobile-view mobile-view-list-visible-block">\n        <div class="line">\n            ',o.contextOrFrameLookup(e,n,"page")?(i+='\n                <div class="rounded-button rounded-button-circular button-action trigger-pagination-backward ',o.memberLookup(o.contextOrFrameLookup(e,n,"page"),"has_previous")||(i+="disabled "),i+='">\n                    <span class="rounded-button-inner">\n                        <i class="fa fa-fw fa-chevron-left"></i>\n                    </span>\n                </div>\n                <div class="inline-spacer">\n                    <span>\n                        ',i+=o.suppressValue(o.memberLookup(o.contextOrFrameLookup(e,n,"page"),"start"),t.opts.autoescape),i+=" - ",i+=o.suppressValue(o.memberLookup(o.contextOrFrameLookup(e,n,"page"),"end"),t.opts.autoescape),i+="\n                    </span>\n                    ",i+="\n                        ",i+="\n                        ",i+=o.suppressValue(t.getExtension("translation").run(e,"of"),t.opts.autoescape),i+="\n                        ",i+=o.suppressValue(o.memberLookup(o.contextOrFrameLookup(e,n,"page"),"total_count"),t.opts.autoescape),i+="\n                    ",i+="\n                    <span>\n                        ",i+="\n                        ",i+=o.suppressValue(t.getExtension("translation").run(e,"Results"),t.opts.autoescape),i+='\n                    </span>\n                </div>\n                <div class="inline-spacer rounded-button rounded-button-circular button-action trigger-pagination-forward ',o.memberLookup(o.contextOrFrameLookup(e,n,"page"),"has_next")||(i+="disabled "),i+='">\n                    <span class="rounded-button-inner">\n                        <i class="fa fa-fw fa-chevron-right"></i>\n                    </span>\n                </div>\n            '):(i+='\n                <div class="spacer"></div>\n                <i>\n                    ',i+="\n                    ",i+=o.suppressValue(t.getExtension("translation").run(e,"No results found."),t.opts.autoescape),i+="\n                </i>\n            "),i+="\n            \n            \n        ",o.contextOrFrameLookup(e,n,"searchHadErrors")&&(i+='\n            <div class="message-error">\n                <i class="fa fa-warning"></i>\n                ',i+="\n                ",i+=o.suppressValue(t.getExtension("translation").run(e,"Could not complete the search due to an error."),t.opts.autoescape),i+="\n            </div>\n        "),i+="\n        \n        </div>\n    </div>\n"),i+="\n\n",i+="\n",i+='\n\n            \n<div class="map-create-idea-button-frame mobile-hidden">\n    ',o.contextOrFrameLookup(e,n,"show_idea_button")&&(i+="\n        ",i+="\n\t    \n\t    \n\t    <a ",i+=o.contextOrFrameLookup(e,n,"cosinnus_active_user")?'class="trigger-create-idea':'href="/signup/?acc_req_msg=1&next=/map/" class="',i+=' rounded-button button-color-ideas-inverted shadowed-button">\n\t        <span class="rounded-button-inner">\n\t            <i class="fa fa-lightbulb-o"></i>\n\t            ',i+="\n\t            ",i+=o.suppressValue(t.getExtension("translation").run(e,"Create Idea"),t.opts.autoescape),i+="\n\t        </span>\n\t    </a>\n    "),i+="\n    \n    ",o.contextOrFrameLookup(e,n,"splitscreen")&&o.contextOrFrameLookup(e,n,"COSINNUS_SHOW_PROJECT_AND_GROUP_CREATE_BUTTONS")&&(i+='\n\t    <a href="',o.contextOrFrameLookup(e,n,"cosinnus_active_user")||(i+="/signup/?acc_req_msg=1&next="),i+='/projects/add/" class="rounded-button button-color-projects-inverted shadowed-button">\n\t        <span class="rounded-button-inner">\n\t            <i class="fa fa-group"></i>\n\t            ',i+="\n\t            ",i+=o.suppressValue(t.getExtension("translation").run(e,"Create Project"),t.opts.autoescape),i+="\n\t        </span>\n\t    </a>\n    "),i+="\n\n    ",o.contextOrFrameLookup(e,n,"splitscreen")&&o.contextOrFrameLookup(e,n,"COSINNUS_MATCHING_ENABLED")&&(i+='\n\t    <a href="',o.contextOrFrameLookup(e,n,"cosinnus_active_user")||(i+="/signup/?acc_req_msg=1&next="),i+='/map/?matching=true" class="rounded-button button-color-primary-inverted shadowed-button">\n\t        <span class="rounded-button-inner">\n\t            <i class="fa fa-puzzle-piece"></i>\n\t            ',i+="\n\t            ",i+=o.suppressValue(t.getExtension("translation").run(e,"Find partners"),t.opts.autoescape),i+="\n\t        </span>\n\t    </a>\n    "),i+="\n</div>\n",l?l.rootRenderFunc(t,e,n,o,s):s(null,i)}catch(t){s(o.handleError(t,a,r))}}return{root:t}}()}(),t.exports=r(s,o,s.nunjucksPrecompiled["cosinnus/templates/cosinnus/universal/map/pagination-controls.html"],a)},function(t,e,n){"use strict";var o=n(4),s=(n(5),n(20));t.exports=o.extend({App:null,controlView:null,template:s,events:{"click .trigger-mobile-list-view":"triggerMobileListView","click .trigger-mobile-search-view":"triggerMobileSearchView","click .trigger-mobile-map-view":"triggerMobileMapView","click .trigger-mobile-idea-create-1-view":"triggerMobileIdeaCreate1View","click .trigger-mobile-idea-create-2-view":"triggerMobileIdeaCreate2View"},initialize:function(t,e,n){var s=this;o.prototype.initialize.call(s,t),s.App=e,s.controlView=n},getTemplateData:function(){var t=this,e=o.prototype.getTemplateData.call(t);return e=_.extend(e,t.controlView.options,t.controlView.state)},triggerMobileListView:function(t){this.controlView.triggerMobileListView()},triggerMobileSearchView:function(t){this.controlView.triggerMobileSearchView()},triggerMobileMapView:function(t){this.controlView.triggerMobileMapView()},triggerMobileIdeaCreate1View:function(t){this.controlView.triggerMobileIdeaCreate1View()},triggerMobileIdeaCreate2View:function(t){this.controlView.triggerMobileIdeaCreate2View()}})},function(t,e,n){var o,s=n(8);o=s.currentEnv?s.currentEnv:s.currentEnv=new s.Environment([],void 0);var a=(n(9)(o),s.webpackDependencies||(s.webpackDependencies={})),r=n(10);!function(){(s.nunjucksPrecompiled=s.nunjucksPrecompiled||{})["cosinnus/templates/cosinnus/universal/map/mobile-controls.html"]=function(){function t(t,e,n,o,s){var a=null,r=null,i="";try{var l=null;o.contextOrFrameLookup(e,n,"COSINNUS_IDEAS_ENABLED")&&(i+='\n\t<div class="map-mobile-controls left-side mobile-only mobile-view mobile-view-map-visible-block">\n\t\t<a ',i+=o.contextOrFrameLookup(e,n,"cosinnus_active_user")?'class="trigger-mobile-idea-create-1-view':'href="/signup/?acc_req_msg=1&next=/map/" class="',i+=' pull-left rounded-button button-action-faded shadowed-button">\n\t\t    <span class="rounded-button-inner">\n\t\t        <i class="fa fa-fw fa-lightbulb-o apply-color-ideas"></i>\n\t\t        ',i+="\n\t\t        ",i+=o.suppressValue(t.getExtension("translation").run(e,"Create idea"),t.opts.autoescape),i+='\n\t\t    </span>\n\t\t</a>\n\t</div>\n\t\n\t<div class="map-mobile-controls map-pagination-controls full-width vertical-center-parent   mobile-only mobile-view mobile-view-idea-create-1-visible-block">\n        <a class="trigger-mobile-idea-create-2-view rounded-button button-color-action pull-right inline-spacer vertical-center-child">\n            <span class="rounded-button-inner">\n                ',i+="\n                ",i+=o.suppressValue(t.getExtension("translation").run(e,"Next"),t.opts.autoescape),i+='\n            </span>\n        </a>\n\t    <div class="controls-description vertical-center-child">\n\t        ',i+="\n            ",i+=o.suppressValue(t.getExtension("translation").run(e,"Choose a location for your idea by dragging the marker!"),t.opts.autoescape),i+="\n\t    </div>\n    </div>\n\t\n"),i+='\n\n<div class="map-mobile-controls mobile-only">\n    ',o.contextOrFrameLookup(e,n,"fullscreen")||(i+='\n    <div class="rounded-button rounded-button-circular button-action-faded shadowed-button trigger-mobile-search-view   mobile-view mobile-view-list-visible-inline-block  mobile-view-map-visible-inline-block mobile-view-detail-visible-inline-block">\n        <span class="rounded-button-inner">\n            <i class="fa fa-fw fa-search"></i>\n        </span>\n    </div>\n    '),i+="\n    ",o.contextOrFrameLookup(e,n,"splitscreen")&&(i+='\n\t    <div class="rounded-button rounded-button-circular button-action-faded shadowed-button trigger-mobile-map-view   mobile-view mobile-view-search-visible-inline-block  mobile-view-list-visible-inline-block mobile-view-detail-visible-inline-block">\n\t        <span class="rounded-button-inner">\n\t            <i class="fa fa-fw fa-map-marker"></i>\n\t        </span>\n\t    </div>\n    '),i+='\n    <div class="rounded-button rounded-button-circular button-action-faded shadowed-button trigger-mobile-list-view   mobile-view mobile-view-map-visible-inline-block  mobile-view-search-visible-inline-block mobile-view-detail-visible-inline-block">\n        <span class="rounded-button-inner">\n            <i class="fa fa-fw fa-list-ul"></i>\n        </span>\n    </div>\n</div>',l?l.rootRenderFunc(t,e,n,o,s):s(null,i)}catch(t){s(o.handleError(t,a,r))}}return{root:t}}()}(),t.exports=r(s,o,s.nunjucksPrecompiled["cosinnus/templates/cosinnus/universal/map/mobile-controls.html"],a)},function(t,e,n){"use strict";var o=n(4);n(5);t.exports=o.extend({App:null,controlView:null,model:null,template:n(22),events:{"click .tile-close-button":"onCloseClicked","click .trigger-create-idea-submit":"onSubmitClicked","click .trigger-mobile-idea-back":"onMobileIdeaBackClicked"},initialize:function(t,e,n){var s=this;o.prototype.initialize.call(s,t),s.App=e,s.controlView=n,Backbone.mediator.subscribe("ideas:create-view-opened",s.onViewOpened,s),Backbone.mediator.subscribe("ideas:create-view-closed",s.onViewClosed,s)},getTemplateData:function(){var t=this,e=o.prototype.getTemplateData.call(t);return e.controlView=_.extend({},t.App.controlView.options,t.App.controlView.state),e},afterRender:function(){init_simplemde($("#idea-create-description")[0])},onViewOpened:function(){this.$el.find("#idea-create-title").focus(),this.App.mapView.activateDraggableMarker("ideas"),$(".trigger-create-idea").hide(),Backbone.mediator.publish("tile-detail:opened")},onViewClosed:function(){this.App.mapView.deactivateDraggableMarker(),$(".trigger-create-idea").show(),Backbone.mediator.publish("tile-detail:closed")},onCloseClicked:function(t){this.controlView.closeCreateIdeaView(t)},onSubmitClicked:function(t){var e=this.$el.find("#idea-create-title").val(),n=inited_simplemde.value(),o=this.App.mapView.getDraggableMarkerLatLng(),s="/ideas/add/?title="+encodeURIComponent(e)+"&lat="+o.lat+"&lon="+o.lng+"&description="+encodeURIComponent(n);window.location.href=s},onMobileIdeaBackClicked:function(t){this.controlView.triggerMobileIdeaCreate1View(t)}})},function(t,e,n){var o,s=n(8);o=s.currentEnv?s.currentEnv:s.currentEnv=new s.Environment([],void 0);var a=(n(9)(o),s.webpackDependencies||(s.webpackDependencies={}));a["include/macros.html"]=n(23);var r=n(10);!function(){(s.nunjucksPrecompiled=s.nunjucksPrecompiled||{})["cosinnus/templates/cosinnus/universal/tiles/tile-detail-create-idea.html"]=function(){function t(t,e,n,o,s){var a=null,r=null,i="";try{var l=null;t.getTemplate("include/macros.html",!1,"cosinnus/templates/cosinnus/universal/tiles/tile-detail-create-idea.html",!1,function(a,r){return a?void s(a):void r.getExported(function(a,r){return a?void s(a):(e.setVariable("macros",r),i+='\n\n<div class="tile-detail tile-idea tile-create-idea mobile-view mobile-view-idea-create-2-visible-block">\n    <div class="tile-close-button more-padding">\n        <i class="fa fa-fw fa-close"></i>\n    </div>\n    \n    \n    ',void(l?function(t,e,n,o,s){s("")}:e.getBlock("title"))(t,e,n,o,function(a,r){return a?void s(a):(i+=r,i+="\n    \n    ",void(l?function(t,e,n,o,s){s("")}:e.getBlock("form"))(t,e,n,o,function(a,r){return a?void s(a):(i+=r,i+="\n        \n    \n    ",i+='\n    <div class="spacer mobile-only">&nbsp;</div>\n    <div class="spacer mobile-only">&nbsp;</div>\n    <div class="spacer mobile-only">&nbsp;</div>\n</div>\n',void(l?l.rootRenderFunc(t,e,n,o,s):s(null,i)))}))}))})})}catch(t){s(o.handleError(t,a,r))}}function e(t,e,n,o,s){var a=null,r=null,i="";try{i+='\n        <div class="tile-section no-top-spacing title">\n            <h1>\n                ',i+="\n                ",i+=o.suppressValue(t.getExtension("translation").run(e,"Create idea"),t.opts.autoescape),i+='\n            </h1>\n        </div>\n        \n        <div class="tile-section mobile-hidden">\n            <div class="pull-left multi-span non-map-placemark placemark l icon ideas"></div>\n            <div style="overflow: hidden;">\n                ',i+="\n                ",i+=o.suppressValue(t.getExtension("translation").run(e,"Choose a location for your idea by dragging & dropping the marker. You can still change this location later on."),t.opts.autoescape),i+="\n            </div>\n        </div>\n        \n    ",s(null,i)}catch(t){s(o.handleError(t,a,r))}}function n(t,e,n,o,s){var a=null,r=null,i="";try{i+='\n        <div class="tile-detail-form">\n\t        <div class="tile-section">\n\t            <label class="caps" for="idea-create-title">\n\t                ',i+="\n\t                ",i+=o.suppressValue(t.getExtension("translation").run(e,"Title"),t.opts.autoescape),i+='\n\t            </label> \n\t            <input id="idea-create-title" type="text" />\n\t        </div>\n\t        \n\t        <div class="tile-section">\n\t            <label class="caps" for="idea-create-description">\n\t                ',i+="\n\t                ",i+=o.suppressValue(t.getExtension("translation").run(e,"Description"),t.opts.autoescape),i+='\n\t            </label> \n\t            <textarea id="idea-create-description" name="description"></textarea>\n\t        </div>\n\t        \n\t        <div class="tile-section tile-section-button-list">\n\t            <a class="pull-right rounded-button button-color-action trigger-create-idea-submit">\n                    <span class="rounded-button-inner">\n                        ',i+="\n                        ",i+=o.suppressValue(t.getExtension("translation").run(e,"Next"),t.opts.autoescape),i+='\n                    </span>\n                </a>\n                <a class="pull-right rounded-button button-action trigger-mobile-idea-back mobile-only">\n                    <span class="rounded-button-inner">\n                        ',i+="\n                        ",i+=o.suppressValue(t.getExtension("translation").run(e,"Back to location selection"),t.opts.autoescape),i+="\n                    </span>\n                </a>\n\t        </div>\n        </div>\n    ",s(null,i)}catch(t){s(o.handleError(t,a,r))}}return{b_title:e,b_form:n,root:t}}()}(),t.exports=r(s,o,s.nunjucksPrecompiled["cosinnus/templates/cosinnus/universal/tiles/tile-detail-create-idea.html"],a)},function(t,e,n){var o,s=n(8);o=s.currentEnv?s.currentEnv:s.currentEnv=new s.Environment([],void 0);var a=(n(9)(o),s.webpackDependencies||(s.webpackDependencies={})),r=n(10);!function(){(s.nunjucksPrecompiled=s.nunjucksPrecompiled||{})["cosinnus/templates/cosinnus/universal/include/macros.html"]=function(){function t(t,e,n,o,s){var a=null,r=null,i="";try{var l=null,u=o.makeMacro(["type"],["classes","singular","button","useStyles","colon","showIcon","mine","all","create","COSINNUS_TRANS"],function(s,a){n=n.push(!0),a=a||{},a.hasOwnProperty("caller")&&n.set("caller",a.caller),n.set("type",s),n.set("classes",a.hasOwnProperty("classes")?a.classes:""),n.set("singular",a.hasOwnProperty("singular")?a.singular:0),n.set("button",a.hasOwnProperty("button")?a.button:0),n.set("useStyles",a.hasOwnProperty("useStyles")?a.useStyles:1),n.set("colon",a.hasOwnProperty("colon")?a.colon:0),n.set("showIcon",a.hasOwnProperty("showIcon")?a.showIcon:1),n.set("mine",!!a.hasOwnProperty("mine")&&a.mine),n.set("all",!!a.hasOwnProperty("all")&&a.all),n.set("create",!!a.hasOwnProperty("create")&&a.create),n.set("COSINNUS_TRANS",a.hasOwnProperty("COSINNUS_TRANS")?a.COSINNUS_TRANS:{});var r="";return r+='\n    <span class="',1==o.contextOrFrameLookup(e,n,"useStyles")&&(r+="result-type-span ",r+=o.contextOrFrameLookup(e,n,"button")?"button":"apply",r+="-color-",r+=o.suppressValue(s,t.opts.autoescape)),r+=" ",r+=o.suppressValue(o.contextOrFrameLookup(e,n,"classes"),t.opts.autoescape),r+='">\n        ',o.contextOrFrameLookup(e,n,"mine")?(r+="\n            ","people"==s?(r+="\n                ",1==o.contextOrFrameLookup(e,n,"showIcon")&&(r+='<i class="fa fa-user"></i>'),r+="\n                ",r+="\n                ",r+=o.suppressValue(t.getExtension("translation").run(e,"My Users"),t.opts.autoescape),1==o.contextOrFrameLookup(e,n,"colon")&&(r+=":"),r+="\n            "):"events"==s?(r+="\n                ",1==o.contextOrFrameLookup(e,n,"showIcon")&&(r+='<i class="fa fa-calendar"></i>'),r+="\n                ",r+="\n                ",r+=o.suppressValue(t.getExtension("translation").run(e,"My Events"),t.opts.autoescape),1==o.contextOrFrameLookup(e,n,"colon")&&(r+=":"),r+="\n            "):"projects"==s?(r+="\n                ",1==o.contextOrFrameLookup(e,n,"showIcon")&&(r+='<i class="fa fa-group"></i>'),r+="\n                ",r+="\n                ",r+=o.suppressValue(t.getExtension("translation").run(e,"My Projects"),t.opts.autoescape),1==o.contextOrFrameLookup(e,n,"colon")&&(r+=":"),r+="\n            "):"groups"==s?(r+="\n                ",1==o.contextOrFrameLookup(e,n,"showIcon")&&(r+='<i class="fa fa-sitemap"></i>'),r+="\n                ",r+="\n                ",r+=o.suppressValue(t.getExtension("translation").run(e,"My Groups"),t.opts.autoescape),1==o.contextOrFrameLookup(e,n,"colon")&&(r+=":"),r+="\n            "):"conferences"==s?(r+="\n                ",1==o.contextOrFrameLookup(e,n,"showIcon")&&(r+='<i class="fa fa-calendar"></i>'),r+="\n                ",r+=o.suppressValue(o.memberLookup(o.contextOrFrameLookup(e,n,"COSINNUS_TRANS"),"COSINNUS_TRANS_MY_CONFERENCES"),t.opts.autoescape),1==o.contextOrFrameLookup(e,n,"colon")&&(r+=":"),r+="\n            "):"ideas"==s?(r+="\n                ",1==o.contextOrFrameLookup(e,n,"showIcon")&&(r+='<i class="fa fa-lightbulb-o"></i>'),r+="\n                ",r+="\n                ",r+=o.suppressValue(t.getExtension("translation").run(e,"My Ideas"),t.opts.autoescape),1==o.contextOrFrameLookup(e,n,"colon")&&(r+=":"),r+="\n            "):"organizations"==s?(r+="\n                ",1==o.contextOrFrameLookup(e,n,"showIcon")&&(r+='<i class="fa fa-building"></i>'),r+="\n                ",r+="\n                ",r+=o.suppressValue(t.getExtension("translation").run(e,"My Organizations"),t.opts.autoescape),1==o.contextOrFrameLookup(e,n,"colon")&&(r+=":"),r+="\n            "):"cloudfiles"==s&&(r+="\n                ",1==o.contextOrFrameLookup(e,n,"showIcon")&&(r+='<i class="fa fa-cloud"></i>'),r+="\n                ",r+="\n                ",r+=o.suppressValue(t.getExtension("translation").run(e,"My Cloud Files"),t.opts.autoescape),1==o.contextOrFrameLookup(e,n,"colon")&&(r+=":"),r+="\n            "),r+="\n        "):o.contextOrFrameLookup(e,n,"all")?(r+="\n            ","people"==s?(r+="\n                ",1==o.contextOrFrameLookup(e,n,"showIcon")&&(r+='<i class="fa fa-user"></i>'),r+="\n                ",r+="\n                ",r+=o.suppressValue(t.getExtension("translation").run(e,"All Users"),t.opts.autoescape),1==o.contextOrFrameLookup(e,n,"colon")&&(r+=":"),r+="\n            "):"events"==s?(r+="\n                ",1==o.contextOrFrameLookup(e,n,"showIcon")&&(r+='<i class="fa fa-calendar"></i>'),r+="\n                ",r+="\n                ",r+=o.suppressValue(t.getExtension("translation").run(e,"All Events"),t.opts.autoescape),1==o.contextOrFrameLookup(e,n,"colon")&&(r+=":"),r+="\n            "):"projects"==s?(r+="\n                ",1==o.contextOrFrameLookup(e,n,"showIcon")&&(r+='<i class="fa fa-group"></i>'),r+="\n                ",r+="\n                ",r+=o.suppressValue(t.getExtension("translation").run(e,"All Projects"),t.opts.autoescape),1==o.contextOrFrameLookup(e,n,"colon")&&(r+=":"),r+="\n            "):"groups"==s?(r+="\n                ",1==o.contextOrFrameLookup(e,n,"showIcon")&&(r+='<i class="fa fa-sitemap"></i>'),r+="\n                ",r+="\n                ",r+=o.suppressValue(t.getExtension("translation").run(e,"All Groups"),t.opts.autoescape),1==o.contextOrFrameLookup(e,n,"colon")&&(r+=":"),r+="\n            "):"conferences"==s?(r+="\n                ",1==o.contextOrFrameLookup(e,n,"showIcon")&&(r+='<i class="fa fa-calendar"></i>'),r+="\n                ",r+=o.suppressValue(o.memberLookup(o.contextOrFrameLookup(e,n,"COSINNUS_TRANS"),"COSINNUS_TRANS_ALL_CONFERENCES"),t.opts.autoescape),1==o.contextOrFrameLookup(e,n,"colon")&&(r+=":"),r+="\n            "):"ideas"==s?(r+="\n                ",1==o.contextOrFrameLookup(e,n,"showIcon")&&(r+='<i class="fa fa-lightbulb-o"></i>'),r+="\n                ",r+="\n                ",r+=o.suppressValue(t.getExtension("translation").run(e,"All Ideas"),t.opts.autoescape),1==o.contextOrFrameLookup(e,n,"colon")&&(r+=":"),r+="\n            "):"organizations"==s?(r+="\n                ",1==o.contextOrFrameLookup(e,n,"showIcon")&&(r+='<i class="fa fa-building"></i>'),r+="\n                ",r+="\n                ",r+=o.suppressValue(t.getExtension("translation").run(e,"All Organizations"),t.opts.autoescape),1==o.contextOrFrameLookup(e,n,"colon")&&(r+=":"),r+="\n            "):"cloudfiles"==s&&(r+="\n                ",1==o.contextOrFrameLookup(e,n,"showIcon")&&(r+='<i class="fa fa-cloud"></i>'),r+="\n                ",r+="\n                ",r+=o.suppressValue(t.getExtension("translation").run(e,"Cloud Files"),t.opts.autoescape),1==o.contextOrFrameLookup(e,n,"colon")&&(r+=":"),r+="\n            "),r+="\n        "):o.contextOrFrameLookup(e,n,"singular")?(r+="\n            ","people"==s?(r+="\n                ",1==o.contextOrFrameLookup(e,n,"showIcon")&&(r+='<i class="fa fa-user"></i>'),r+="\n                ",r+="\n                ",r+=o.suppressValue(t.getExtension("translation").run(e,"User"),t.opts.autoescape),1==o.contextOrFrameLookup(e,n,"colon")&&(r+=":"),r+="\n            "):"events"==s?(r+="\n                ",1==o.contextOrFrameLookup(e,n,"showIcon")&&(r+='<i class="fa fa-calendar"></i>'),r+="\n                ",r+="\n                ",r+=o.suppressValue(t.getExtension("translation").run(e,"Event"),t.opts.autoescape),1==o.contextOrFrameLookup(e,n,"colon")&&(r+=":"),r+="\n            "):"projects"==s?(r+="\n                ",1==o.contextOrFrameLookup(e,n,"showIcon")&&(r+='<i class="fa fa-group"></i>'),r+="\n                ",r+="\n                ",r+=o.suppressValue(t.getExtension("translation").run(e,"Project"),t.opts.autoescape),1==o.contextOrFrameLookup(e,n,"colon")&&(r+=":"),r+="\n            "):"groups"==s?(r+="\n                ",1==o.contextOrFrameLookup(e,n,"showIcon")&&(r+='<i class="fa fa-sitemap"></i>'),r+="\n                ",r+="\n                ",r+=o.suppressValue(t.getExtension("translation").run(e,"Group"),t.opts.autoescape),1==o.contextOrFrameLookup(e,n,"colon")&&(r+=":"),r+="\n            "):"conferences"==s?(r+="\n                ",1==o.contextOrFrameLookup(e,n,"showIcon")&&(r+='<i class="fa fa-calendar"></i>'),r+="\n                ",r+=o.suppressValue(o.memberLookup(o.contextOrFrameLookup(e,n,"COSINNUS_TRANS"),"COSINNUS_TRANS_CONFERENCE"),t.opts.autoescape),1==o.contextOrFrameLookup(e,n,"colon")&&(r+=":"),r+="\n            "):"ideas"==s?(r+="\n                ",1==o.contextOrFrameLookup(e,n,"showIcon")&&(r+='<i class="fa fa-lightbulb-o"></i>'),r+="\n                ",r+="\n                ",r+=o.suppressValue(t.getExtension("translation").run(e,"Idea"),t.opts.autoescape),1==o.contextOrFrameLookup(e,n,"colon")&&(r+=":"),r+="\n            "):"organizations"==s?(r+="\n                ",1==o.contextOrFrameLookup(e,n,"showIcon")&&(r+='<i class="fa fa-building"></i>'),r+="\n                ",r+="\n                ",r+=o.suppressValue(t.getExtension("translation").run(e,"Organization"),t.opts.autoescape),1==o.contextOrFrameLookup(e,n,"colon")&&(r+=":"),r+="\n            "):"cloudfiles"==s&&(r+="\n                ",1==o.contextOrFrameLookup(e,n,"showIcon")&&(r+='<i class="fa fa-cloud"></i>'),r+="\n                ",r+="\n                ",r+=o.suppressValue(t.getExtension("translation").run(e,"Cloud File"),t.opts.autoescape),1==o.contextOrFrameLookup(e,n,"colon")&&(r+=":"),r+="\n            "),r+="\n        "):o.contextOrFrameLookup(e,n,"create")?(r+="\n            ","people"==s?(r+="\n                ",1==o.contextOrFrameLookup(e,n,"showIcon")&&(r+='<i class="fa fa-user"></i>'),r+="\n                ",r+="\n                ",r+=o.suppressValue(t.getExtension("translation").run(e,"Create User"),t.opts.autoescape),1==o.contextOrFrameLookup(e,n,"colon")&&(r+=":"),r+="\n            "):"events"==s?(r+="\n                ",1==o.contextOrFrameLookup(e,n,"showIcon")&&(r+='<i class="fa fa-calendar"></i>'),r+="\n                ",r+="\n                ",r+=o.suppressValue(t.getExtension("translation").run(e,"Create Event"),t.opts.autoescape),1==o.contextOrFrameLookup(e,n,"colon")&&(r+=":"),r+="\n            "):"projects"==s?(r+="\n                ",1==o.contextOrFrameLookup(e,n,"showIcon")&&(r+='<i class="fa fa-group"></i>'),r+="\n                ",r+="\n                ",r+=o.suppressValue(t.getExtension("translation").run(e,"Create Project"),t.opts.autoescape),1==o.contextOrFrameLookup(e,n,"colon")&&(r+=":"),r+="\n            "):"groups"==s?(r+="\n                ",1==o.contextOrFrameLookup(e,n,"showIcon")&&(r+='<i class="fa fa-sitemap"></i>'),r+="\n                ",r+="\n                ",r+=o.suppressValue(t.getExtension("translation").run(e,"Create Group"),t.opts.autoescape),1==o.contextOrFrameLookup(e,n,"colon")&&(r+=":"),r+="\n            "):"conferences"==s?(r+="\n                ",1==o.contextOrFrameLookup(e,n,"showIcon")&&(r+='<i class="fa fa-calendar"></i>'),r+="\n                ",r+=o.suppressValue(o.memberLookup(o.contextOrFrameLookup(e,n,"COSINNUS_TRANS"),"COSINNUS_TRANS_CREATE_CONFERENCE"),t.opts.autoescape),1==o.contextOrFrameLookup(e,n,"colon")&&(r+=":"),r+="\n            "):"ideas"==s?(r+="\n                ",1==o.contextOrFrameLookup(e,n,"showIcon")&&(r+='<i class="fa fa-lightbulb-o"></i>'),r+="\n                ",r+="\n                ",r+=o.suppressValue(t.getExtension("translation").run(e,"Create Idea"),t.opts.autoescape),1==o.contextOrFrameLookup(e,n,"colon")&&(r+=":"),r+="\n            "):"organizations"==s&&(r+="\n                ",1==o.contextOrFrameLookup(e,n,"showIcon")&&(r+='<i class="fa fa-building"></i>'),r+="\n                ",r+="\n                ",r+=o.suppressValue(t.getExtension("translation").run(e,"Create Organization"),t.opts.autoescape),1==o.contextOrFrameLookup(e,n,"colon")&&(r+=":"),r+="\n            "),r+="\n        "):(r+="\n            ","people"==s?(r+="\n                ",1==o.contextOrFrameLookup(e,n,"showIcon")&&(r+='<i class="fa fa-user"></i>'),r+="\n                ",r+="\n                ",r+=o.suppressValue(t.getExtension("translation").run(e,"People"),t.opts.autoescape),1==o.contextOrFrameLookup(e,n,"colon")&&(r+=":"),r+="\n            "):"events"==s?(r+="\n                ",1==o.contextOrFrameLookup(e,n,"showIcon")&&(r+='<i class="fa fa-calendar"></i>'),r+="\n                ",r+="\n                ",r+=o.suppressValue(t.getExtension("translation").run(e,"Events"),t.opts.autoescape),1==o.contextOrFrameLookup(e,n,"colon")&&(r+=":"),r+="\n            "):"projects"==s?(r+="\n                ",1==o.contextOrFrameLookup(e,n,"showIcon")&&(r+='<i class="fa fa-group"></i>'),r+="\n                ",r+="\n                ",r+=o.suppressValue(t.getExtension("translation").run(e,"Projects"),t.opts.autoescape),1==o.contextOrFrameLookup(e,n,"colon")&&(r+=":"),r+="\n            "):"groups"==s?(r+="\n                ",1==o.contextOrFrameLookup(e,n,"showIcon")&&(r+='<i class="fa fa-sitemap"></i>'),r+="\n                ",r+="\n                ",r+=o.suppressValue(t.getExtension("translation").run(e,"Groups"),t.opts.autoescape),1==o.contextOrFrameLookup(e,n,"colon")&&(r+=":"),r+="\n            "):"conferences"==s?(r+="\n                ",1==o.contextOrFrameLookup(e,n,"showIcon")&&(r+='<i class="fa fa-calendar"></i>'),r+="\n                ",r+=o.suppressValue(o.memberLookup(o.contextOrFrameLookup(e,n,"COSINNUS_TRANS"),"COSINNUS_TRANS_CONFERENCES"),t.opts.autoescape),1==o.contextOrFrameLookup(e,n,"colon")&&(r+=":"),r+="\n            "):"ideas"==s?(r+="\n                ",1==o.contextOrFrameLookup(e,n,"showIcon")&&(r+='<i class="fa fa-lightbulb-o"></i>'),r+="\n                ",r+="\n                ",r+=o.suppressValue(t.getExtension("translation").run(e,"Ideas"),t.opts.autoescape),1==o.contextOrFrameLookup(e,n,"colon")&&(r+=":"),r+="\n            "):"organizations"==s?(r+="\n                ",1==o.contextOrFrameLookup(e,n,"showIcon")&&(r+='<i class="fa fa-building"></i>'),r+="\n                ",r+="\n                ",r+=o.suppressValue(t.getExtension("translation").run(e,"Organizations"),t.opts.autoescape),1==o.contextOrFrameLookup(e,n,"colon")&&(r+=":"),r+="\n            "):"cloudfiles"==s&&(r+="\n                ",1==o.contextOrFrameLookup(e,n,"showIcon")&&(r+='<i class="fa fa-cloud"></i>'),r+="\n                ",r+="\n                ",r+=o.suppressValue(t.getExtension("translation").run(e,"Cloud Files"),t.opts.autoescape),1==o.contextOrFrameLookup(e,n,"colon")&&(r+=":"),r+="\n            "),r+="\n        "),r+="\n    </span>\n",n=n.pop(),new o.SafeString(r)});e.addExport("typeLabel"),e.setVariable("typeLabel",u),i+="\n\n";var c=o.makeMacro(["portal","slug","name","type"],["group_slug","inline_only"],function(s,a,r,i,l){
n=n.push(!0),l=l||{},l.hasOwnProperty("caller")&&n.set("caller",l.caller),n.set("portal",s),n.set("slug",a),n.set("name",r),n.set("type",i),n.set("group_slug",l.hasOwnProperty("group_slug")?l.group_slug:o.contextOrFrameLookup(e,n,"null")),n.set("inline_only",l.hasOwnProperty("inline_only")?l.inline_only:0);var u="";return u+="\n    ",1==o.contextOrFrameLookup(e,n,"inline_only")?(u+='\n        data-portal="',u+=o.suppressValue(s,t.opts.autoescape),u+='" data-slug="',"events"==i&&o.contextOrFrameLookup(e,n,"group_slug")&&(u+=o.suppressValue(o.contextOrFrameLookup(e,n,"group_slug"),t.opts.autoescape),u+="*"),u+=o.suppressValue(a,t.opts.autoescape),u+='" data-type="',u+=o.suppressValue(i,t.opts.autoescape),u+='"\n    '):(u+='\n        <a class="result-link" data-portal="',u+=o.suppressValue(s,t.opts.autoescape),u+='" data-slug="',"events"==i&&o.contextOrFrameLookup(e,n,"group_slug")&&(u+=o.suppressValue(o.contextOrFrameLookup(e,n,"group_slug"),t.opts.autoescape),u+="*"),u+=o.suppressValue(a,t.opts.autoescape),u+='" data-type="',u+=o.suppressValue(i,t.opts.autoescape),u+='">',u+=o.suppressValue(r,t.opts.autoescape),u+="</a>\n    "),u+="\n",n=n.pop(),new o.SafeString(u)});e.addExport("resultLink"),e.setVariable("resultLink",c),i+="\n\n";var p=o.makeMacro(["portal","slug","title","type"],["imageUrl","slot1data","slot1icon","slot2data","slot2icon","cosinnus_active_user","group_slug"],function(s,i,l,u,p){n=n.push(!0),p=p||{},p.hasOwnProperty("caller")&&n.set("caller",p.caller),n.set("portal",s),n.set("slug",i),n.set("title",l),n.set("type",u),n.set("imageUrl",p.hasOwnProperty("imageUrl")?p.imageUrl:o.contextOrFrameLookup(e,n,"null")),n.set("slot1data",p.hasOwnProperty("slot1data")?p.slot1data:o.contextOrFrameLookup(e,n,"null")),n.set("slot1icon",p.hasOwnProperty("slot1icon")?p.slot1icon:o.contextOrFrameLookup(e,n,"null")),n.set("slot2data",p.hasOwnProperty("slot2data")?p.slot2data:o.contextOrFrameLookup(e,n,"null")),n.set("slot2icon",p.hasOwnProperty("slot2icon")?p.slot2icon:o.contextOrFrameLookup(e,n,"null")),n.set("cosinnus_active_user",p.hasOwnProperty("cosinnus_active_user")?p.cosinnus_active_user:o.contextOrFrameLookup(e,n,"null")),n.set("group_slug",p.hasOwnProperty("group_slug")?p.group_slug:o.contextOrFrameLookup(e,n,"null"));var d="";return d+='\n    <div class="card ',"people"!=u||o.contextOrFrameLookup(e,n,"cosinnus_active_user")?(d+='result-link" ',d+=o.suppressValue((a=176,r=159,o.callWrap(c,"resultLink",e,[s,i,l,u,o.makeKeywordArgs({inline_only:1,group_slug:o.contextOrFrameLookup(e,n,"group_slug")})])),t.opts.autoescape)):d+='" href="/signup/?acc_req_msg=1&next=/map/" target="_blank"',d+=">\n        ",o.contextOrFrameLookup(e,n,"imageUrl")&&(d+='\n            <div class="card-image">\n                <img src="',d+=o.suppressValue(o.contextOrFrameLookup(e,n,"imageUrl"),t.opts.autoescape),d+='">\n            </div>\n        '),d+='\n        <div class="card-title">\n            ',"people"!=u||o.contextOrFrameLookup(e,n,"cosinnus_active_user")?(d+="\n                ",d+=o.suppressValue((a=186,r=27,o.callWrap(c,"resultLink",e,[s,i,l,u,o.makeKeywordArgs({group_slug:o.contextOrFrameLookup(e,n,"group_slug")})])),t.opts.autoescape),d+="\n            "):(d+='\n                <a href="/signup/?acc_req_msg=1&next=/map/" target="_blank">',d+=o.suppressValue(l,t.opts.autoescape),d+="</a>\n            "),d+='\n        </div>\n        <div class="card-data">\n            ',o.contextOrFrameLookup(e,n,"slot1data")||o.contextOrFrameLookup(e,n,"slot2data")?(d+="\n               ",o.contextOrFrameLookup(e,n,"slot1data")&&o.contextOrFrameLookup(e,n,"slot1icon")&&(d+='\n                   <i class="fa ',d+=o.suppressValue(o.contextOrFrameLookup(e,n,"slot1icon"),t.opts.autoescape),d+='"></i>\n                   <span>',d+=o.suppressValue(o.contextOrFrameLookup(e,n,"slot1data"),t.opts.autoescape),d+="</span>\n               "),d+="\n               ",o.contextOrFrameLookup(e,n,"slot2data")&&o.contextOrFrameLookup(e,n,"slot2icon")&&(d+='\n                   <i class="fa ',d+=o.suppressValue(o.contextOrFrameLookup(e,n,"slot2icon"),t.opts.autoescape),d+='"></i>\n                   <span>',d+=o.suppressValue(o.contextOrFrameLookup(e,n,"slot2data"),t.opts.autoescape),d+="</span>\n               "),d+="\n            "):d+="\n               <p></p>\n            ",d+="\n        </div>\n    </div>\n",n=n.pop(),new o.SafeString(d)});e.addExport("itemCard"),e.setVariable("itemCard",p),i+="\n\n\n";var d=o.makeMacro(["text","url","icon"],["subtext","annotation","annotationIcon","includeUnderdrop","is_emphasized","inactive","padded","makeSafe"],function(s,a,r,i){n=n.push(!0),i=i||{},i.hasOwnProperty("caller")&&n.set("caller",i.caller),n.set("text",s),n.set("url",a),n.set("icon",r),n.set("subtext",i.hasOwnProperty("subtext")?i.subtext:o.contextOrFrameLookup(e,n,"null")),n.set("annotation",i.hasOwnProperty("annotation")?i.annotation:o.contextOrFrameLookup(e,n,"null")),n.set("annotationIcon",i.hasOwnProperty("annotationIcon")?i.annotationIcon:o.contextOrFrameLookup(e,n,"null")),n.set("includeUnderdrop",!!i.hasOwnProperty("includeUnderdrop")&&i.includeUnderdrop),n.set("is_emphasized",!!i.hasOwnProperty("is_emphasized")&&i.is_emphasized),n.set("inactive",!!i.hasOwnProperty("inactive")&&i.inactive),n.set("padded",!!i.hasOwnProperty("padded")&&i.padded),n.set("makeSafe",!i.hasOwnProperty("makeSafe")||i.makeSafe);var l="";return l+='\n    <li>\n\t\t<a class="list-item ',o.contextOrFrameLookup(e,n,"padded")&&(l+="list-item-padded "),o.contextOrFrameLookup(e,n,"inactive")&&(l+="inactive no-select "),l+='" href="',l+=o.suppressValue(a,t.opts.autoescape),l+='" role="button" titledby="',l+=o.contextOrFrameLookup(e,n,"subtext")?".item-text-primary":".item-text",l+='"> \n\t\t\t<div class="item-icon ',o.contextOrFrameLookup(e,n,"subtext")&&(l+="item-icon-offset"),l+='">\n    \t\t\t',r&&o.inOperator("/",r)?(l+='\n                    <img src="',l+=o.suppressValue(r,t.opts.autoescape),l+='"></img>\n                '):(l+='\n                    <i class="fas fa-fw ',l+=o.suppressValue(r,t.opts.autoescape),l+='"></i>\n                '),l+="\n    \t\t</div>\n    \t\t",o.contextOrFrameLookup(e,n,"subtext")?(l+='\n\t    \t\t<div class="item-text item-text-dual">\n\t    \t\t\t<div class="item-text-primary text-bold">\n\t    \t\t\t\t',o.contextOrFrameLookup(e,n,"makeSafe")?(l+="\n\t    \t\t\t\t\t",l+=o.suppressValue(t.getFilter("safe").call(e,s),t.opts.autoescape),l+="\n\t\t\t\t\t\t"):(l+="\n\t\t    \t\t\t\t",l+=o.suppressValue(s,t.opts.autoescape),l+=" \n\t    \t\t\t\t"),l+="\n    \t\t\t\t</div>\n\t    \t\t\t",o.memberLookup(o.contextOrFrameLookup(e,n,"subtext"),"is_date")?(l+='\n\t    \t\t\t\t<div class="moment-data-date" data-date="',l+=o.suppressValue(o.memberLookup(o.contextOrFrameLookup(e,n,"subtext"),"date"),t.opts.autoescape),l+='"></div>\n\t    \t\t\t'):(l+="\n\t    \t\t\t\t<div>\n\t\t    \t\t\t\t",o.contextOrFrameLookup(e,n,"makeSafe")?(l+="\n\t                            ",l+=o.suppressValue(t.getFilter("safe").call(e,o.contextOrFrameLookup(e,n,"subtext")),t.opts.autoescape),l+="\n\t                        "):(l+="\n\t                            ",l+=o.suppressValue(o.contextOrFrameLookup(e,n,"subtext"),t.opts.autoescape),l+=" \n\t                        "),l+="\n                        </div>\n\t    \t\t\t"),l+="\n\t    \t\t</div>\n    \t\t"):(l+='\n    \t\t\t<div class="item-text ',o.contextOrFrameLookup(e,n,"is_emphasized")&&(l+="text-bold"),l+='">\n    \t\t\t\t',o.contextOrFrameLookup(e,n,"makeSafe")?(l+="\n    \t\t\t\t\t",l+=o.suppressValue(t.getFilter("safe").call(e,s),t.opts.autoescape),l+="\n\t\t\t\t\t"):(l+="\n\t    \t\t\t\t",l+=o.suppressValue(s,t.opts.autoescape),l+=" \n    \t\t\t\t"),l+="\n\t    \t\t</div>\n    \t\t"),l+="\n    \t\t",o.contextOrFrameLookup(e,n,"annotation")&&(l+='\n    \t\t\t<div class="right-side-annotation truncated-oneline">\n    \t\t\t\t',o.contextOrFrameLookup(e,n,"annotationIcon")&&(l+='\n    \t\t\t\t\t<i class="fas fa-fw ',l+=o.suppressValue(o.contextOrFrameLookup(e,n,"annotationIcon"),t.opts.autoescape),l+='"></i>\n    \t\t\t\t'),l+="\n\t    \t\t\t",o.contextOrFrameLookup(e,n,"makeSafe")?(l+="\n    \t\t\t\t\t",l+=o.suppressValue(t.getFilter("safe").call(e,o.contextOrFrameLookup(e,n,"annotation")),t.opts.autoescape),l+="\n\t\t\t\t\t"):(l+="\n\t    \t\t\t\t",l+=o.suppressValue(o.contextOrFrameLookup(e,n,"annotation"),t.opts.autoescape),l+=" \n    \t\t\t\t"),l+="\n\t    \t\t</div>\n    \t\t"),l+="\n    \t\t",o.contextOrFrameLookup(e,n,"includeUnderdrop")&&(l+='\n    \t\t\t<div class="li-underdrop"></div>\n    \t\t'),l+="\n\t\t</a>\n\t</li>\n",n=n.pop(),new o.SafeString(l)});e.addExport("listItem"),e.setVariable("listItem",d),i+="\n\n";var m=o.makeMacro(["item"],["makeSafe"],function(s,a){n=n.push(!0),a=a||{},a.hasOwnProperty("caller")&&n.set("caller",a.caller),n.set("item",s),n.set("makeSafe",!a.hasOwnProperty("makeSafe")||a.makeSafe);var r="";return r+='\n<li>\n    <a class="list-item" href="',r+=o.suppressValue(o.memberLookup(s,"url"),t.opts.autoescape),r+='" titledby=".item-text">\n        <div class="item-icon">\n            ',o.memberLookup(s,"icon")&&o.inOperator("/",o.memberLookup(s,"icon"))?(r+='\n                <img src="',r+=o.suppressValue(o.memberLookup(s,"icon"),t.opts.autoescape),r+='"></img>\n            '):(r+='\n                <i class="fas fa-fw ',r+=o.suppressValue(o.memberLookup(s,"icon"),t.opts.autoescape),r+='"></i>\n            '),r+='\n        </div>\n        <div class="item-text">\n            ',o.contextOrFrameLookup(e,n,"makeSafe")?(r+="\n                ",r+=o.suppressValue(t.getFilter("safe").call(e,o.memberLookup(s,"text")),t.opts.autoescape),r+="\n            "):(r+="\n                ",r+=o.suppressValue(o.memberLookup(s,"text"),t.opts.autoescape),r+=" \n            "),r+='\n        </div>\n        <div class="right-side-annotation right-side-action truncated-oneline">\n            <div class="likefollowstar-button action-do-likefollowstar likefollowstar-button-simple selected" data-type="star" data-ct="',r+=o.suppressValue(o.memberLookup(s,"ct"),t.opts.autoescape),r+='" data-id="',r+=o.suppressValue(o.memberLookup(s,"id"),t.opts.autoescape),r+='">\n                <span class="show-unselected">\n                    <i class="far fa-star prevent-click"></i>\n                </span>\n                <span class="show-selected">\n                    <i class="fas fa-star prevent-click"></i>\n                </span>\n            </div>\n        </div>\n    </a>\n</li>\n',n=n.pop(),new o.SafeString(r)});e.addExport("starredlistItem"),e.setVariable("starredlistItem",m),i+="\n\n";var f=o.makeMacro(["item"],["makeSafe"],function(s,a){n=n.push(!0),a=a||{},a.hasOwnProperty("caller")&&n.set("caller",a.caller),n.set("item",s),n.set("makeSafe",!a.hasOwnProperty("makeSafe")||a.makeSafe);var r="";return r+='\n<li>\n    <a class="list-item" href="',r+=o.suppressValue(o.memberLookup(s,"url"),t.opts.autoescape),r+='" titledby=".item-text">\n        <div class="item-icon">\n            ',o.memberLookup(s,"icon")&&o.inOperator("/",o.memberLookup(s,"icon"))?(r+='\n                <img src="',r+=o.suppressValue(o.memberLookup(s,"icon"),t.opts.autoescape),r+='"></img>\n            '):(r+='\n                <i class="fas fa-fw ',r+=o.suppressValue(o.memberLookup(s,"icon"),t.opts.autoescape),r+='"></i>\n            '),r+='\n        </div>\n        <div class="item-text">\n            ',o.contextOrFrameLookup(e,n,"makeSafe")?(r+="\n                ",r+=o.suppressValue(t.getFilter("safe").call(e,o.memberLookup(s,"text")),t.opts.autoescape),r+="\n            "):(r+="\n                ",r+=o.suppressValue(o.memberLookup(s,"text"),t.opts.autoescape),r+=" \n            "),r+='\n        </div>\n        <div class="right-side-annotation right-side-action truncated-oneline">\n            <div class="likefollowstar-button action-do-likefollowstar likefollowstar-button-simple selected" data-type="follow" data-ct="',r+=o.suppressValue(o.memberLookup(s,"ct"),t.opts.autoescape),r+='" data-id="',r+=o.suppressValue(o.memberLookup(s,"id"),t.opts.autoescape),r+='">\n                <span class="show-unselected">\n                    <i class="far fa-bell prevent-click"></i>\n                </span>\n                <span class="show-selected">\n                    <i class="fas fa-bell prevent-click"></i>\n                </span>\n            </div>\n        </div>\n    </a>\n</li>\n',n=n.pop(),new o.SafeString(r)});e.addExport("followedlistItem"),e.setVariable("followedlistItem",f),i+="\n\n",l?l.rootRenderFunc(t,e,n,o,s):s(null,i)}catch(t){s(o.handleError(t,a,r))}}return{root:t}}()}(),t.exports=r(s,o,s.nunjucksPrecompiled["cosinnus/templates/cosinnus/universal/include/macros.html"],a)},function(t,e,n){"use strict";var o=n(25);n(5);t.exports=Backbone.Collection.extend({model:o,comparator:function(t,e){return t.get("relevance")==e.get("relevance")?0:t.get("relevance")>e.get("relevance")?-1:1}})},function(t,e,n){"use strict";n(5);t.exports=Backbone.Model.extend({defaults:{type:null,hovered:!1,selected:!1,lat:null,lon:null,relevance:0},initialize:function(){},locEquals:function(t){return null!=this.get("lat")&&null!=this.get("lon")&&t.get("lat")==this.get("lat")&&t.get("lon")==this.get("lon")},getLocs:function(){return[this.get("lat"),this.get("lon")]}})},function(t,e,n){var o,s=n(8);o=s.currentEnv?s.currentEnv:s.currentEnv=new s.Environment([],void 0);var a=(n(9)(o),s.webpackDependencies||(s.webpackDependencies={}));a["include/macros.html"]=n(23);var r=n(10);!function(){(s.nunjucksPrecompiled=s.nunjucksPrecompiled||{})["cosinnus/templates/cosinnus/universal/map/map-controls.html"]=function(){function t(t,e,n,o,s){var a=null,r=null,i="";try{var l=null;i+=o.suppressValue(t.getExtension("passThrough").run(e,o.contextOrFrameLookup(e,n,"i18n")),t.opts.autoescape),i+="\n",t.getTemplate("include/macros.html",!1,"cosinnus/templates/cosinnus/universal/map/map-controls.html",!1,function(u,c){return u?void s(u):void c.getExported(function(u,c){if(u)return void s(u);if(e.setVariable("macros",c),i+='\n\n<div class="map-controls mobile-view mobile-view-search-visible-block">\n     <div class="map-controls-search"',o.contextOrFrameLookup(e,n,"matching")&&(i+=' style="display:none"'),i+='>\n         <div class="search-box">\n            <input type="text" class="q" name="q"\n\n',o.contextOrFrameLookup(e,n,"splitscreen")?(i+='\nplaceholder="',i+="\n",i+=o.suppressValue(t.getExtension("translation").run(e,"Search for Names, Topics and Places..."),t.opts.autoescape),i+='"\n'):(i+='\nplaceholder="',i+="\n",i+=o.suppressValue(t.getExtension("translation").run(e,"Search for Names and Topics..."),t.opts.autoescape),i+='"\n'),i+='\n                    value="',i+=o.suppressValue(o.contextOrFrameLookup(e,n,"q"),t.opts.autoescape),i+='" autocomplete="off" />\n            <i class="fa fa-search clickable-button query-search-button icon-search ',o.contextOrFrameLookup(e,n,"wantsToSearch")&&(i+="hidden"),i+='"></i>\n         </div>\n         <span class="clickable-button icon-filters ',o.contextOrFrameLookup(e,n,"filterPanelVisible")&&(i+="open"),i+='">\n             <i class="fa fa-bars visible-default"></i>\n             <i class="fa fa-chevron-up visible-open"></i>\n             <i class="fa fa-chevron-up visible-open-hover"></i>\n         </span>\n         <i class="fa fa-close clickable-button reset-all icon-reset ',o.contextOrFrameLookup(e,n,"filtersActive")||o.contextOrFrameLookup(e,n,"q")||(i+="hidden"),i+='"></i>\n         <i class="fa fa-spinner fa-pulse icon-loading ',o.contextOrFrameLookup(e,n,"wantsToSearch")||(i+=" hidden"),i+='"></i>\n         <div class="icon-box filter-button-box">\n         </div>\n     </div>\n\n     <div class="map-controls-active-filters"></div>\n\n     <div class="map-controls-filters mobile-always-visible" ',o.contextOrFrameLookup(e,n,"filterPanelVisible")||(i+='style="display: none;"'),i+='>\n        <div class="map-controls-filter-fields">\n\t\t\t',t.getFilter("length").call(e,o.contextOrFrameLookup(e,n,"availableFilterList"))>1){i+='\n\t\t\t\t<div class="button-list">\n\t\t\t\t\t',n=n.push();var p=o.contextOrFrameLookup(e,n,"availableFilterList");if(p)for(var d=p.length,m=0;m<p.length;m++){var f=p[m];n.set("filter_type",f),n.set("loop.index",m+1),n.set("loop.index0",m),n.set("loop.revindex",d-m),n.set("loop.revindex0",d-m-1),n.set("loop.first",0===m),n.set("loop.last",m===d-1),n.set("loop.length",d),i+='\n\t\t\t\t\t\t<a class="rounded-button button-color-',i+=o.suppressValue(f,t.opts.autoescape),i+=" result-filter-button ",o.contextOrFrameLookup(e,n,"typeFiltersActive")&&o.memberLookup(o.contextOrFrameLookup(e,n,"activeFilters"),f)&&(i+="selected"),i+='" data-result-filter-type="',i+=o.suppressValue(f,t.opts.autoescape),i+='">\n\t\t\t\t\t\t\t',i+=o.suppressValue((a=37,r=24,o.callWrap(o.memberLookup(c,"typeLabel"),'macros["typeLabel"]',e,[f,"rounded-button-inner",o.makeKeywordArgs({button:1,COSINNUS_TRANS:o.contextOrFrameLookup(e,n,"COSINNUS_TRANS")})])),t.opts.autoescape),i+="\n\t\t\t\t\t\t</a>\n\t\t\t\t\t"}n=n.pop(),i+="\n\t\t\t\t</div>\n\t\t\t"}if(i+='\n\n\t\t\t<ol id="date-time-filter" class="input-area"  style="display: ',i+=o.contextOrFrameLookup(e,n,"dateFiltersActive")?" block ":" none ",i+=';">\n\t\t\t\t<li class="calendar-date-time-chooser">\n\t\t\t\t\t',i+="\n\t\t\t\t\t",i+=o.suppressValue(t.getExtension("translation").run(e,"From"),t.opts.autoescape),i+='\n\t\t\t\t\t<i class="fa fa-calendar"></i>\n\t\t\t\t\t<input readonly ="readonly" class="calendar-date-time-chooser-date" />\n\t\t\t\t\t<input class="calendar-date-time-chooser-hiddendate" id="id_start_0" name="start_0"\n\t\t\t\t\t\ttype="hidden" value="',i+=o.suppressValue(o.contextOrFrameLookup(e,n,"fromDate"),t.opts.autoescape),i+='"\n\t\t\t\t\t>\n\t\t\t\t\t<input class="calendar-date-time-chooser-time" id="id_start_1" name="start_1"\n\t\t\t\t\t\tplaceholder="00:00" type="text" value="',i+=o.suppressValue(o.contextOrFrameLookup(e,n,"fromTime"),t.opts.autoescape),i+='"\n\t\t\t\t\t>\n\t\t\t\t\t<div class="small-calendar"></div>\n\t\t\t\t</li>\n\n\t\t\t\t<li class="calendar-date-time-chooser">\n\t\t\t\t\t',i+="\n\t\t\t\t\t",i+=o.suppressValue(t.getExtension("translation").run(e,"Until"),t.opts.autoescape),i+='\n\t\t\t\t\t<i class="fa fa-calendar"></i>\n\t\t\t\t\t<input readonly ="readonly" class="calendar-date-time-chooser-date" />\n\t\t\t\t\t<input class="calendar-date-time-chooser-hiddendate" id="id_end_0" name="end_0"\n\t\t\t\t\t\ttype="hidden" value="',i+=o.suppressValue(o.contextOrFrameLookup(e,n,"toDate"),t.opts.autoescape),i+='"\n\t\t\t\t\t>\n\t\t\t\t\t<input class="calendar-date-time-chooser-time" id="id_end_1" name="end_1"\n\t\t\t\t\t\tplaceholder="00:00" type="text" value="',i+=o.suppressValue(o.contextOrFrameLookup(e,n,"toTime"),t.opts.autoescape),i+='"\n\t\t\t\t\t>\n\t\t\t\t\t<div class="small-calendar"></div>\n\t\t\t\t</li>\n\t\t\t</ol>\n\n\n\t\t\t',t.getFilter("length").call(e,o.contextOrFrameLookup(e,n,"allSDGS"))>0){i+="\n\t\t\t\t<h1>\n\t\t\t\t\t",i+="\n\t\t\t\t\t",i+=o.suppressValue(t.getExtension("translation").run(e,"Sustainable Development Goals"),t.opts.autoescape),i+='\n\t\t\t\t</h1>\n\n\t\t\t\t<div class="button-list">\n\t\t\t\t\t',n=n.push();var h=o.contextOrFrameLookup(e,n,"allSDGS");if(h)for(var v=h.length,g=0;g<h.length;g++){var k=h[g];n.set("sdg",k),n.set("loop.index",g+1),n.set("loop.index0",g),n.set("loop.revindex",v-g),n.set("loop.revindex0",v-g-1),n.set("loop.first",0===g),n.set("loop.last",g===v-1),n.set("loop.length",v),i+="\n\t\t\t\t\t\t",""!=o.memberLookup(k,"id")&&k&&(i+='\n\t\t\t\t\t\t\t<a class="rounded-button button-color-topic sdg-button hover-image-button ',o.inOperator(o.memberLookup(k,"id"),o.contextOrFrameLookup(e,n,"activeSDGIds"))&&(i+="selected"),i+='" data-sdg-id="',i+=o.suppressValue(o.memberLookup(k,"id"),t.opts.autoescape),i+='">\n\t\t\t\t\t\t\t\t<span class="rounded-button-inner hover-image-button-inner">\n\t\t\t\t\t\t\t\t\t',i+=o.suppressValue(o.memberLookup(k,"name"),t.opts.autoescape),i+='\n\t\t\t\t\t\t\t\t\t<img class="hover-image-icon hover-image-icon-pos-abs hover-image-icon-hidden" src="',i+=o.suppressValue(o.memberLookup(k,"icon"),t.opts.autoescape),i+='">\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t'),i+="\n\t\t\t\t\t"}n=n.pop(),i+="\n\t\t\t\t</div>\n\t\t\t"}if(i+="\n\n\t\t\t",t.getFilter("length").call(e,o.contextOrFrameLookup(e,n,"allManagedTags"))>0){i+='\n\t\t\t\t<div class="managed-tags-buttons" ',t.getFilter("length").call(e,o.contextOrFrameLookup(e,n,"showManagedTagsOnTypesSelected"))>0&&!o.contextOrFrameLookup(e,n,"displayManagedTagsFilter")&&(i+='style="display: none;"'),i+=">\n\t\t\t\t\t<h1>\n\t\t\t\t\t\t",i+=o.suppressValue(o.memberLookup(o.contextOrFrameLookup(e,n,"managedTagsLabels"),"MANAGED_TAG_MAP_LABEL"),t.opts.autoescape),i+='\n\t\t\t\t\t</h1>\n\n\t\t\t\t\t<div class="button-list">\n\t\t\t\t\t\t',n=n.push();var b=o.contextOrFrameLookup(e,n,"allManagedTags");if(b)for(var x=b.length,L=0;L<b.length;L++){var _=b[L];n.set("managed_tag",_),n.set("loop.index",L+1),n.set("loop.index0",L),n.set("loop.revindex",x-L),n.set("loop.revindex0",x-L-1),n.set("loop.first",0===L),n.set("loop.last",L===x-1),n.set("loop.length",x),i+="\n\t\t\t\t\t\t\t",""!=o.memberLookup(_,"id")&&_&&(i+='\n\t\t\t\t\t\t\t\t<a class="rounded-button button-color-topic managed-tag-button hover-image-button ',o.inOperator(o.memberLookup(_,"id"),o.contextOrFrameLookup(e,n,"activeManagedTagsIds"))&&(i+="selected"),i+='" data-managed-tag-id="',i+=o.suppressValue(o.memberLookup(_,"id"),t.opts.autoescape),i+='">\n\t\t\t\t\t\t\t\t\t<span class="rounded-button-inner hover-image-button-inner">\n\t\t\t\t\t\t\t\t\t\t',i+=o.suppressValue(o.memberLookup(_,"name"),t.opts.autoescape),i+="\n\t\t\t\t\t\t\t\t\t\t",o.memberLookup(_,"image")&&(i+='\n\t\t\t\t\t\t\t\t\t\t\t<img class="over-image-icon hover-image-icon-pos-abs hover-image-icon-hidden" src="',i+=o.suppressValue(o.memberLookup(_,"image"),t.opts.autoescape),i+='">\n\t\t\t\t\t\t\t\t\t\t'),i+="\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t"),i+="\n\t\t\t\t\t\t"}n=n.pop(),i+="\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t"}if(i+="\n\n\t\t\t",t.getFilter("length").call(e,o.contextOrFrameLookup(e,n,"allTextTopics"))>0){i+='\n\t\t\t\t<div class="text-topic-buttons" ',t.getFilter("length").call(e,o.contextOrFrameLookup(e,n,"showTextTopicsOnTypesSelected"))>0&&!o.contextOrFrameLookup(e,n,"displayTextTopcFilter")&&(i+='style="display: none;"'),i+=">\n\t\t\t\t\t<h1>\n\t\t\t\t\t\t",i+="\n\t\t\t\t\t\t",i+=o.suppressValue(t.getExtension("translation").run(e,"Categories"),t.opts.autoescape),i+='\n\t\t\t\t\t</h1>\n\n\t\t\t\t\t<div class="button-list">\n\t\t\t\t\t\t',n=n.push();var O=o.contextOrFrameLookup(e,n,"allTextTopics");if(O){var w;if(o.isArray(O)){var y=O.length;for(w=0;w<O.length;w++){var F=O[w][0];n.set("textTopic_id",O[w][0]);var S=O[w][1];n.set("textTopic",O[w][1]),n.set("loop.index",w+1),n.set("loop.index0",w),n.set("loop.revindex",y-w),n.set("loop.revindex0",y-w-1),n.set("loop.first",0===w),n.set("loop.last",w===y-1),n.set("loop.length",y),i+="\n\t\t\t\t\t\t\t",""!=F&&S&&(i+='\n\t\t\t\t\t\t\t\t<a class="rounded-button button-color-topic text-topic-button ',o.inOperator(t.getFilter("int").call(e,F),o.contextOrFrameLookup(e,n,"activeTextTopicIds"))&&(i+="selected"),i+='" data-text-topic-id="',i+=o.suppressValue(F,t.opts.autoescape),i+='">\n\t\t\t\t\t\t\t\t\t<span class="rounded-button-inner">\n\t\t\t\t\t\t\t\t\t\t',i+=o.suppressValue(S,t.opts.autoescape),i+="\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t"),i+="\n\t\t\t\t\t\t"}}else{w=-1;var y=o.keys(O).length;for(var E in O){w++;var V=O[E];n.set("textTopic_id",E),n.set("textTopic",V),n.set("loop.index",w+1),n.set("loop.index0",w),n.set("loop.revindex",y-w),n.set("loop.revindex0",y-w-1),n.set("loop.first",0===w),n.set("loop.last",w===y-1),n.set("loop.length",y),i+="\n\t\t\t\t\t\t\t",""!=E&&V&&(i+='\n\t\t\t\t\t\t\t\t<a class="rounded-button button-color-topic text-topic-button ',o.inOperator(t.getFilter("int").call(e,E),o.contextOrFrameLookup(e,n,"activeTextTopicIds"))&&(i+="selected"),i+='" data-text-topic-id="',i+=o.suppressValue(E,t.opts.autoescape),i+='">\n\t\t\t\t\t\t\t\t\t<span class="rounded-button-inner">\n\t\t\t\t\t\t\t\t\t\t',i+=o.suppressValue(V,t.opts.autoescape),i+="\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t"),i+="\n\t\t\t\t\t\t"}}}n=n.pop(),i+="\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t"}if(i+="\n\n\t\t\t",t.getFilter("length").call(e,o.contextOrFrameLookup(e,n,"allTopics"))>0&&!o.contextOrFrameLookup(e,n,"hideTopics")){i+="\n\t\t\t\t<h1>\n\t\t\t\t\t",i+="\n\t\t\t\t\t",i+=o.suppressValue(t.getExtension("translation").run(e,"Topics"),t.opts.autoescape),i+='\n\t\t\t\t</h1>\n\n\t\t\t\t<div class="button-list">\n\t\t\t\t\t',n=n.push();var C=o.contextOrFrameLookup(e,n,"allTopics");if(C){var T;if(o.isArray(C)){var N=C.length;for(T=0;T<C.length;T++){var I=C[T][0];n.set("topic_id",C[T][0]);var A=C[T][1];n.set("topic",C[T][1]),n.set("loop.index",T+1),n.set("loop.index0",T),n.set("loop.revindex",N-T),n.set("loop.revindex0",N-T-1),n.set("loop.first",0===T),n.set("loop.last",T===N-1),n.set("loop.length",N),i+="\n\t\t\t\t\t\t",""!=I&&A&&(i+='\n\t\t\t\t\t\t\t<a class="rounded-button button-color-topic topic-button ',o.inOperator(t.getFilter("int").call(e,I),o.contextOrFrameLookup(e,n,"activeTopicIds"))&&(i+="selected"),i+='" data-topic-id="',i+=o.suppressValue(I,t.opts.autoescape),i+='">\n\t\t\t\t\t\t\t\t<span class="rounded-button-inner">\n\t\t\t\t\t\t\t\t\t',i+=o.suppressValue(A,t.opts.autoescape),i+="\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t"),i+="\n\t\t\t\t\t"}}else{T=-1;var N=o.keys(C).length;for(var R in C){T++;var D=C[R];n.set("topic_id",R),n.set("topic",D),n.set("loop.index",T+1),n.set("loop.index0",T),n.set("loop.revindex",N-T),n.set("loop.revindex0",N-T-1),n.set("loop.first",0===T),n.set("loop.last",T===N-1),n.set("loop.length",N),i+="\n\t\t\t\t\t\t",""!=R&&D&&(i+='\n\t\t\t\t\t\t\t<a class="rounded-button button-color-topic topic-button ',o.inOperator(t.getFilter("int").call(e,R),o.contextOrFrameLookup(e,n,"activeTopicIds"))&&(i+="selected"),i+='" data-topic-id="',i+=o.suppressValue(R,t.opts.autoescape),i+='">\n\t\t\t\t\t\t\t\t<span class="rounded-button-inner">\n\t\t\t\t\t\t\t\t\t',i+=o.suppressValue(D,t.opts.autoescape),i+="\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t"),i+="\n\t\t\t\t\t"}}}n=n.pop(),i+="\n\t\t\t\t</div>\n\t\t\t"}if(i+="\n\n\t\t\t",o.contextOrFrameLookup(e,n,"COSINNUS_EXCHANGE_ENABLED")&&(i+="\n\t            <h1>\n\t                ",i+="\n\t                ",i+=o.suppressValue(t.getExtension("translation").run(e,"External contents"),t.opts.autoescape),i+='\n\t            </h1>\n\n\t            <table class="onoffswitch-frame small-space">\n\t                <tr>\n\t                    <td class="onoffswitch-text-label">\n\t                        ',i+="\n\t                        ",i+=o.suppressValue(t.getExtension("translation").run(e,"Include contents from other platforms"),t.opts.autoescape),i+='\n\t                    </td>\n\t                    <td>\n\t                        <div class="onoffswitch">\n\t                            <input type="checkbox" name="onoffswitch-exchange" class="onoffswitch-checkbox check-exchange" id="check-exchange" ',o.contextOrFrameLookup(e,n,"exchange")&&(i+="checked"),i+='>\n\t                            <label class="onoffswitch-label" for="check-exchange">\n\t                                <span class="onoffswitch-inner"></span>\n\t                                <span class="onoffswitch-switch"></span>\n\t                            </label>\n\t                        </div>\n\t                    </td>\n\t                </tr>\n\t            </table>\n\t        '),i+="\n\n\t\t\t",o.contextOrFrameLookup(e,n,"splitscreen")&&(i+="\n\t\t\t\t<h1>\n\t\t\t\t\t",i+="\n\t\t\t\t\t",i+=o.suppressValue(t.getExtension("translation").run(e,"Where"),t.opts.autoescape),i+='\n\t\t\t\t</h1>\n\n\t\t\t\t<table class="onoffswitch-frame small-space">\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<td class="onoffswitch-text-label">\n\t\t\t\t\t\t\t',i+="\n\t\t\t\t\t\t\t",i+=o.suppressValue(t.getExtension("translation").run(e,"In map area"),t.opts.autoescape),i+='\n\t\t\t\t\t\t</td>\n\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t<div class="onoffswitch">\n\t\t\t\t\t\t\t\t<input type="checkbox" name="onoffswitch-ignore-location" class="onoffswitch-checkbox check-ignore-location" id="check-ignore-location" ',o.contextOrFrameLookup(e,n,"ignoreLocation")||(i+="checked"),i+='>\n\t\t\t\t\t\t\t\t<label class="onoffswitch-label" for="check-ignore-location">\n\t\t\t\t\t\t\t\t\t<span class="onoffswitch-inner"></span>\n\t\t\t\t\t\t\t\t\t<span class="onoffswitch-switch"></span>\n\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</td>\n\t\t\t\t\t</tr>\n\t\t\t\t</table>\n\t\t\t\t<div class="pale-color">\n\t\t\t\t\t',i+="\n\t\t\t\t\t",i+=o.suppressValue(t.getExtension("translation").run(e,"If active, searching will be restricted to the visible map area."),t.opts.autoescape),i+="\n\t\t\t\t</div>\n\t\t\t"),i+='\n\t\t</div>\n\n        <div class="spacer"></div>\n\n\t\t<div class="apply-buttons">\n\t\t\t<div class="button-list">\n\t\t\t\t<a class="rounded-button button-color-action button-search query-search-button disabled">\n\t\t\t\t\t<span class="rounded-button-inner">\n\t\t\t\t\t\t',i+="\n\t\t\t\t\t\t",i+=o.suppressValue(t.getExtension("translation").run(e,"Apply Filters"),t.opts.autoescape),i+='\n\t\t\t\t\t</span>\n\t\t\t\t</a>\n\n\t\t\t\t<a class="rounded-button button-color-action reset-type-and-topic-filters">\n\t\t\t\t\t<span class="rounded-button-inner">\n\t\t\t\t\t\t',i+="\n\t\t\t\t\t\t",i+=o.suppressValue(t.getExtension("translation").run(e,"Clear Filters"),t.opts.autoescape),i+="\n\t\t\t\t\t</span>\n\t\t\t\t</a>\n\t\t\t</div>\n\n\t\t\t",i+='\n\t\t\t<div class="spacer mobile-only">&nbsp;</div>\n\t\t\t<div class="spacer mobile-only">&nbsp;</div>\n\t\t</div>\n\n    </div>\n\n\t',o.contextOrFrameLookup(e,n,"matching")){if(i+='\n\t<div class="map-controls-matching">\n\t\t<h1>\n\t\t\t<i class="fa fa-puzzle-piece"></i>\n\t\t\t',i+="\n\t\t\t",i+=o.suppressValue(t.getExtension("translation").run(e,"Show potential partners"),t.opts.autoescape),i+="\n\t\t</h1>\n\t\t<p>\n\t\t\t",i+="\n\t\t\t",i+=o.suppressValue(t.getExtension("translation").run(e,"Here you can search for partner organisations and projects that are open for further partners. The results are sorted so that partners with a lot of overlap in the funding objectives, eligible areas and SDGs you are active on are listed first."),t.opts.autoescape),i+="\n\t\t</p>\n\t\t",o.contextOrFrameLookup(e,n,"myProjects")||o.contextOrFrameLookup(e,n,"myGroups")||o.contextOrFrameLookup(e,n,"myOrganizations")){i+="\n\t\t<h1>\n\t\t\t",i+="\n\t\t\t",i+=o.suppressValue(t.getExtension("translation").run(e,"Show potential partners for ..."),t.opts.autoescape),i+='\n\t\t</h1>\n\t\t<div class="apply-buttons">\n\t\t\t<div class="button-list">\n\t\t\t\t',n=n.push();var P=o.contextOrFrameLookup(e,n,"myProjects");if(P)for(var U=P.length,M=0;M<P.length;M++){var B=P[M];n.set("project",B),n.set("loop.index",M+1),n.set("loop.index0",M),n.set("loop.revindex",U-M),n.set("loop.revindex0",U-M-1),n.set("loop.first",0===M),n.set("loop.last",M===U-1),n.set("loop.length",U),i+='\n\t\t\t\t<a class="rounded-button button-color-projects match-button',o.memberLookup(B,"selected")&&(i+=" selected"),i+='" data-match="projects.',i+=o.suppressValue(o.memberLookup(B,"slug"),t.opts.autoescape),i+='">\n\t\t\t\t\t<span class="rounded-button-inner">\n\t\t\t\t\t\t<i class="fa fa-group"></i>\n\t\t\t\t\t\t',i+=o.suppressValue(o.memberLookup(B,"name"),t.opts.autoescape),i+="\n\t\t\t\t\t</span>\n\t\t\t\t</a>\n\t\t\t\t"}n=n.pop(),i+='\n\t\t\t</div>\n\t\t</div>\n\t\t<div class="apply-buttons">\n\t\t\t<div class="button-list">\n\t\t\t\t',n=n.push();var j=o.contextOrFrameLookup(e,n,"myGroups");if(j)for(var $=j.length,z=0;z<j.length;z++){var q=j[z];n.set("group",q),n.set("loop.index",z+1),n.set("loop.index0",z),
n.set("loop.revindex",$-z),n.set("loop.revindex0",$-z-1),n.set("loop.first",0===z),n.set("loop.last",z===$-1),n.set("loop.length",$),i+='\n\t\t\t\t<a class="rounded-button button-color-groups match-button',o.memberLookup(q,"selected")&&(i+=" selected"),i+='" data-match="groups.',i+=o.suppressValue(o.memberLookup(q,"slug"),t.opts.autoescape),i+='">\n\t\t\t\t\t<span class="rounded-button-inner">\n\t\t\t\t\t\t<i class="fa fa-sitemap"></i>\n\t\t\t\t\t\t',i+=o.suppressValue(o.memberLookup(q,"name"),t.opts.autoescape),i+="\n\t\t\t\t\t</span>\n\t\t\t\t</a>\n\t\t\t\t"}n=n.pop(),i+='\n\t\t\t</div>\n\t\t</div>\n\t\t<div class="apply-buttons">\n\t\t\t<div class="button-list">\n\t\t\t\t',n=n.push();var W=o.contextOrFrameLookup(e,n,"myOrganizations");if(W)for(var G=W.length,H=0;H<W.length;H++){var K=W[H];n.set("org",K),n.set("loop.index",H+1),n.set("loop.index0",H),n.set("loop.revindex",G-H),n.set("loop.revindex0",G-H-1),n.set("loop.first",0===H),n.set("loop.last",H===G-1),n.set("loop.length",G),i+='\n\t\t\t\t<a class="rounded-button button-color-organizations match-button',o.memberLookup(K,"selected")&&(i+=" selected"),i+='" data-match="organizations.',i+=o.suppressValue(o.memberLookup(K,"slug"),t.opts.autoescape),i+='">\n\t\t\t\t\t<span class="rounded-button-inner">\n\t\t\t\t\t\t<i class="fa fa-building"></i>\n\t\t\t\t\t\t',i+=o.suppressValue(o.memberLookup(K,"name"),t.opts.autoescape),i+="\n\t\t\t\t\t</span>\n\t\t\t\t</a>\n\t\t\t\t"}n=n.pop(),i+="\n\t\t\t</div>\n\t\t</div>\n\t\t"}else i+='\n\t\t<span class="inline-spacer"></span>\n\t\t<p>\n\t\t\t',i+="\n\t\t\t",i+=o.suppressValue(t.getExtension("translation").run(e,"You're currently not member of any project, group or organization."),t.opts.autoescape),i+="\n\t\t</p>\n\t\t";i+="\n\t</div>\n\t"}i+="\n\n</div>\n",l?l.rootRenderFunc(t,e,n,o,s):s(null,i)})})}catch(t){s(o.handleError(t,a,r))}}return{root:t}}()}(),t.exports=r(s,o,s.nunjucksPrecompiled["cosinnus/templates/cosinnus/universal/map/map-controls.html"],a)},function(t,e,n){var o,s=n(8);o=s.currentEnv?s.currentEnv:s.currentEnv=new s.Environment([],void 0);var a=(n(9)(o),s.webpackDependencies||(s.webpackDependencies={})),r=n(10);!function(){(s.nunjucksPrecompiled=s.nunjucksPrecompiled||{})["cosinnus/templates/cosinnus/universal/map/map-controls-active-filters.html"]=function(){function t(t,e,n,o,s){var a=null,r=null,i="";try{var l=null;if(i+=o.suppressValue(t.getExtension("passThrough").run(e,o.contextOrFrameLookup(e,n,"i18n")),t.opts.autoescape),i+="\n\n",o.contextOrFrameLookup(e,n,"typeFiltersActive")||o.contextOrFrameLookup(e,n,"topicFiltersActive")||o.contextOrFrameLookup(e,n,"textTopicFiltersActive")||o.contextOrFrameLookup(e,n,"q")||o.contextOrFrameLookup(e,n,"sdgFiltersActive")||o.contextOrFrameLookup(e,n,"managedTagsFiltersActive")){if(i+='\n    <div class="map-controls-active-filter-frame">\n\n        ',o.contextOrFrameLookup(e,n,"typeFiltersActive")){i+='\n            <div class="active-filters active-filters-type">\n                <span class="active-filters-inner">\n                    ',n=n.push();var u=o.contextOrFrameLookup(e,n,"availableFilters");if(u){var c;if(o.isArray(u)){var p=u.length;for(c=0;c<u.length;c++){var d=u[c][0];n.set("filter_type",u[c][0]);var m=u[c][1];n.set("available",u[c][1]),n.set("loop.index",c+1),n.set("loop.index0",c),n.set("loop.revindex",p-c),n.set("loop.revindex0",p-c-1),n.set("loop.first",0===c),n.set("loop.last",c===p-1),n.set("loop.length",p),i+="\n                        ",m&&o.memberLookup(o.contextOrFrameLookup(e,n,"activeFilters"),d)&&(i+='\n                            <span class="apply-color-',i+=o.suppressValue(d,t.opts.autoescape),i+='">\n                                ',"people"==d?i+='\n                                    <i class="fa fa-user"></i>\n                                ':"events"==d?i+='\n                                    <i class="fa fa-calendar"></i>\n                                ':"projects"==d?i+='\n                                    <i class="fa fa-group"></i>\n                                ':"groups"==d?i+='\n                                    <i class="fa fa-sitemap"></i>\n                                ':"conferences"==d?i+='\n                                    <i class="fa fa-calendar"></i>\n                                ':"ideas"==d?i+='\n                                    <i class="fa fa-lightbulb-o"></i>\n                                ':"organizations"==d&&(i+='\n                                    <i class="fa fa-building"></i>\n                                '),i+="\n                            </span>\n                        "),i+="\n                    "}}else{c=-1;var p=o.keys(u).length;for(var f in u){c++;var h=u[f];n.set("filter_type",f),n.set("available",h),n.set("loop.index",c+1),n.set("loop.index0",c),n.set("loop.revindex",p-c),n.set("loop.revindex0",p-c-1),n.set("loop.first",0===c),n.set("loop.last",c===p-1),n.set("loop.length",p),i+="\n                        ",h&&o.memberLookup(o.contextOrFrameLookup(e,n,"activeFilters"),f)&&(i+='\n                            <span class="apply-color-',i+=o.suppressValue(f,t.opts.autoescape),i+='">\n                                ',"people"==f?i+='\n                                    <i class="fa fa-user"></i>\n                                ':"events"==f?i+='\n                                    <i class="fa fa-calendar"></i>\n                                ':"projects"==f?i+='\n                                    <i class="fa fa-group"></i>\n                                ':"groups"==f?i+='\n                                    <i class="fa fa-sitemap"></i>\n                                ':"conferences"==f?i+='\n                                    <i class="fa fa-calendar"></i>\n                                ':"ideas"==f?i+='\n                                    <i class="fa fa-lightbulb-o"></i>\n                                ':"organizations"==f&&(i+='\n                                    <i class="fa fa-building"></i>\n                                '),i+="\n                            </span>\n                        "),i+="\n                    "}}}n=n.pop(),i+='\n                </span>\n                <i class="fa fa-close clickable-button reset-type-filters"></i>\n            </div>\n        '}if(i+="\n        \n        ",o.contextOrFrameLookup(e,n,"textTopicFiltersActive")){i+='\n            <div class="active-filters active-filters-text-topics">\n                <span class="active-filters-inner">\n                    <span class="caps">\n                        ',i+="\n                        ",i+=o.suppressValue(t.getExtension("translation").run(e,"Categories"),t.opts.autoescape),i+=":\n                    </span>\n                    ",n=n.push();var v=o.contextOrFrameLookup(e,n,"activeTextTopicIds");if(v)for(var g=v.length,k=0;k<v.length;k++){var b=v[k];n.set("text_topic_id",b),n.set("loop.index",k+1),n.set("loop.index0",k),n.set("loop.revindex",g-k),n.set("loop.revindex0",g-k-1),n.set("loop.first",0===k),n.set("loop.last",k===g-1),n.set("loop.length",g),i+="\n                        ";var x;x=o.contextOrFrameLookup(e,n,"loop"),n.set("outer_loop",x,!0),n.topLevel&&e.setVariable("outer_loop",x),n.topLevel&&e.addExport("outer_loop",x),i+="\n                        ",n=n.push();var L=o.contextOrFrameLookup(e,n,"allTextTopics");if(L){var _;if(o.isArray(L)){var O=L.length;for(_=0;_<L.length;_++){var w=L[_][0];n.set("tid",L[_][0]);var y=L[_][1];n.set("text_topic",L[_][1]),n.set("loop.index",_+1),n.set("loop.index0",_),n.set("loop.revindex",O-_),n.set("loop.revindex0",O-_-1),n.set("loop.first",0===_),n.set("loop.last",_===O-1),n.set("loop.length",O),i+="\n                            ",y&&b==w&&(i+="\n                                <span>",i+=o.suppressValue(y,t.opts.autoescape),o.memberLookup(o.contextOrFrameLookup(e,n,"outer_loop"),"last")||(i+=", "),i+="</span>\n                            "),i+="\n                        "}}else{_=-1;var O=o.keys(L).length;for(var F in L){_++;var S=L[F];n.set("tid",F),n.set("text_topic",S),n.set("loop.index",_+1),n.set("loop.index0",_),n.set("loop.revindex",O-_),n.set("loop.revindex0",O-_-1),n.set("loop.first",0===_),n.set("loop.last",_===O-1),n.set("loop.length",O),i+="\n                            ",S&&b==F&&(i+="\n                                <span>",i+=o.suppressValue(S,t.opts.autoescape),o.memberLookup(o.contextOrFrameLookup(e,n,"outer_loop"),"last")||(i+=", "),i+="</span>\n                            "),i+="\n                        "}}}n=n.pop(),i+="\n                    "}n=n.pop(),i+='\n                </span>\n                <i class="fa fa-close clickable-button reset-text-topic-filters"></i>\n            </div>\n        '}if(i+="\n\n        ",o.contextOrFrameLookup(e,n,"topicFiltersActive")){i+='\n            <div class="active-filters active-filters-topics">\n                <span class="active-filters-inner">\n                    <span class="caps">\n                        ',i+="\n                        ",i+=o.suppressValue(t.getExtension("translation").run(e,"Topics"),t.opts.autoescape),i+=":\n                    </span>\n                    ",n=n.push();var E=o.contextOrFrameLookup(e,n,"activeTopicIds");if(E)for(var V=E.length,C=0;C<E.length;C++){var T=E[C];n.set("topic_id",T),n.set("loop.index",C+1),n.set("loop.index0",C),n.set("loop.revindex",V-C),n.set("loop.revindex0",V-C-1),n.set("loop.first",0===C),n.set("loop.last",C===V-1),n.set("loop.length",V),i+="\n                        ";var N;N=o.contextOrFrameLookup(e,n,"loop"),n.set("outer_loop",N,!0),n.topLevel&&e.setVariable("outer_loop",N),n.topLevel&&e.addExport("outer_loop",N),i+="\n                        ",n=n.push();var I=o.contextOrFrameLookup(e,n,"allTopics");if(I){var A;if(o.isArray(I)){var R=I.length;for(A=0;A<I.length;A++){var D=I[A][0];n.set("tid",I[A][0]);var P=I[A][1];n.set("topic",I[A][1]),n.set("loop.index",A+1),n.set("loop.index0",A),n.set("loop.revindex",R-A),n.set("loop.revindex0",R-A-1),n.set("loop.first",0===A),n.set("loop.last",A===R-1),n.set("loop.length",R),i+="\n                            ",P&&T==D&&(i+="\n                                <span>",i+=o.suppressValue(P,t.opts.autoescape),o.memberLookup(o.contextOrFrameLookup(e,n,"outer_loop"),"last")||(i+=", "),i+="</span>\n                            "),i+="\n                        "}}else{A=-1;var R=o.keys(I).length;for(var U in I){A++;var M=I[U];n.set("tid",U),n.set("topic",M),n.set("loop.index",A+1),n.set("loop.index0",A),n.set("loop.revindex",R-A),n.set("loop.revindex0",R-A-1),n.set("loop.first",0===A),n.set("loop.last",A===R-1),n.set("loop.length",R),i+="\n                            ",M&&T==U&&(i+="\n                                <span>",i+=o.suppressValue(M,t.opts.autoescape),o.memberLookup(o.contextOrFrameLookup(e,n,"outer_loop"),"last")||(i+=", "),i+="</span>\n                            "),i+="\n                        "}}}n=n.pop(),i+="\n                    "}n=n.pop(),i+='\n                </span>\n                <i class="fa fa-close clickable-button reset-topic-filters"></i>\n            </div>\n        '}if(i+="\n\n        ",o.contextOrFrameLookup(e,n,"sdgFiltersActive")){i+='\n            <div class="active-filters active-filters-sdgs">\n                <span class="active-filters-inner">\n                    <span class="caps">\n                        ',i+="\n                        ",i+=o.suppressValue(t.getExtension("translation").run(e,"SDGS"),t.opts.autoescape),i+=":\n                    </span>\n                    ",n=n.push();var B=o.contextOrFrameLookup(e,n,"activeSDGIds");if(B)for(var j=B.length,$=0;$<B.length;$++){var z=B[$];n.set("sdg_id",z),n.set("loop.index",$+1),n.set("loop.index0",$),n.set("loop.revindex",j-$),n.set("loop.revindex0",j-$-1),n.set("loop.first",0===$),n.set("loop.last",$===j-1),n.set("loop.length",j),i+="\n                        ";var q;q=o.contextOrFrameLookup(e,n,"loop"),n.set("outer_loop",q,!0),n.topLevel&&e.setVariable("outer_loop",q),n.topLevel&&e.addExport("outer_loop",q),i+="\n                        ",n=n.push();var W=o.contextOrFrameLookup(e,n,"allSDGS");if(W)for(var G=W.length,H=0;H<W.length;H++){var K=W[H];n.set("sdg",K),n.set("loop.index",H+1),n.set("loop.index0",H),n.set("loop.revindex",G-H),n.set("loop.revindex0",G-H-1),n.set("loop.first",0===H),n.set("loop.last",H===G-1),n.set("loop.length",G),i+="\n                            ",K&&z==o.memberLookup(K,"id")&&(i+="\n                                <span>",i+=o.suppressValue(o.memberLookup(K,"name"),t.opts.autoescape),o.memberLookup(o.contextOrFrameLookup(e,n,"outer_loop"),"last")||(i+=", "),i+="</span>\n                            "),i+="\n                        "}n=n.pop(),i+="\n                    "}n=n.pop(),i+='\n                </span>\n                <i class="fa fa-close clickable-button reset-sdg-filters"></i>\n            </div>\n        '}if(i+="\n        \n        ",o.contextOrFrameLookup(e,n,"managedTagsFiltersActive")){i+='\n            <div class="active-filters active-filters-managed-tags">\n                <span class="active-filters-inner">\n                    <span class="caps">\n                        ',i+=o.suppressValue(o.memberLookup(o.contextOrFrameLookup(e,n,"managedTagsLabels"),"MANAGED_TAG_MAP_LABEL"),t.opts.autoescape),i+=":\n                    </span>\n                    ",n=n.push();var J=o.contextOrFrameLookup(e,n,"activeManagedTagsIds");if(J)for(var Y=J.length,X=0;X<J.length;X++){var Q=J[X];n.set("managed_tag_id",Q),n.set("loop.index",X+1),n.set("loop.index0",X),n.set("loop.revindex",Y-X),n.set("loop.revindex0",Y-X-1),n.set("loop.first",0===X),n.set("loop.last",X===Y-1),n.set("loop.length",Y),i+="\n                        ";var Z;Z=o.contextOrFrameLookup(e,n,"loop"),n.set("outer_loop",Z,!0),n.topLevel&&e.setVariable("outer_loop",Z),n.topLevel&&e.addExport("outer_loop",Z),i+="\n                        ",n=n.push();var tt=o.contextOrFrameLookup(e,n,"allManagedTags");if(tt)for(var et=tt.length,nt=0;nt<tt.length;nt++){var ot=tt[nt];n.set("managed_tag",ot),n.set("loop.index",nt+1),n.set("loop.index0",nt),n.set("loop.revindex",et-nt),n.set("loop.revindex0",et-nt-1),n.set("loop.first",0===nt),n.set("loop.last",nt===et-1),n.set("loop.length",et),i+="\n                            ",ot&&Q==o.memberLookup(ot,"id")&&(i+="\n                                <span>",i+=o.suppressValue(o.memberLookup(ot,"name"),t.opts.autoescape),o.memberLookup(o.contextOrFrameLookup(e,n,"outer_loop"),"last")||(i+=", "),i+="</span>\n                            "),i+="\n                        "}n=n.pop(),i+="\n                    "}n=n.pop(),i+='\n                </span>\n                <i class="fa fa-close clickable-button reset-managed-tag-filters"></i>\n            </div>\n        '}i+="\n        \n        \n        \n        ",o.contextOrFrameLookup(e,n,"q")&&(i+='\n            <div class="active-filters active-filters-q">\n                <span class="active-filters-inner">\n                    "',i+=o.suppressValue(o.contextOrFrameLookup(e,n,"q"),t.opts.autoescape),i+='"\n                </span>\n                <i class="fa fa-close clickable-button reset-q"></i>\n            </div>\n        '),i+="\n    \n    </div>\n"}i+="\n\n",l?l.rootRenderFunc(t,e,n,o,s):s(null,i)}catch(t){s(o.handleError(t,a,r))}}return{root:t}}()}(),t.exports=r(s,o,s.nunjucksPrecompiled["cosinnus/templates/cosinnus/universal/map/map-controls-active-filters.html"],a)},function(t,e,n){"use strict";var o=n(4),s=n(3),a=n(29),r=n(5);t.exports=s.extend({template:n(36),tiles:{},grid:null,disableCounter:0,defaults:{fullscreen:!0,splitscreen:!1,state:{matching:""}},initialize:function(t,e,n){var o=this;s.prototype.initialize.call(o,t,e,n),o.collection.on({add:o.thisContext(o.tileAdd),"change:hovered":o.thisContext(o.tileChangeHover),"change:selected":o.thisContext(o.tileChangeSelected),change:o.thisContext(o.tileUpdate),remove:o.thisContext(o.tileRemove),update:o.thisContext(o.tilesUpdate),reset:o.thisContext(o.tilesReset)}),Backbone.mediator.subscribe("error:search",o.onSearchError,o),Backbone.mediator.subscribe("tile-detail:opened",o.onTileDetailOpened,o),Backbone.mediator.subscribe("tile-detail:closed",o.onTileDetailClosed,o)},render:function(){var t=this;return s.prototype.render.call(t),t.renderTilesInitial(),t.$el.find(".tile-contents").off("scroll").on("scroll",t.onTileListScrolled),t},getTemplateData:function(){var t=this,e=o.prototype.getTemplateData.call(t);return e.controlView=_.extend({},t.App.controlView.options,t.App.controlView.state),e},afterRender:function(){},reload:function(){r.log("*** Reloading Tile View ***"),this.$el.toggleClass("tile-list-splitscreen",this.options.splitscreen),this.$el.toggleClass("tile-list-tile-fullscreen",!this.options.splitscreen),this.$el.show()},hide:function(){r.log("*** Hiding Tile View ***"),this.$el.hide()},onTileListScrolled:function(t){var e=$(t.target);e.scrollTop()+e.innerHeight()>=e[0].scrollHeight-250&&Backbone.mediator.publish("tile-list:scroll-end-reached")},applyUrlSearchParameters:function(t){_.extend(this.state,{matching:r.ifundef(t.matching,this.state.matching)})},contributeToSearchParameters:function(t){},tileAdd:function(t){t.id in this.tiles&&this.tileRemove(t);var e=new a({model:t,elParent:"#tile-container"},this.App).render();this.tiles[t.id]=e},tileRemove:function(t){if(t.get("selected"))return void r.log("tile-list-view.js: TODO:: was ordered to remove a tile that is currently selected. NOT DOING ANYTHING RN!");if(t.id in this.tiles){var e=this.tiles[t.id];e.remove(),delete this.tiles[t.id],r.log("Removed tile at "+t.id)}},tileChangeHover:function(t){},tileChangeSelected:function(t){},tileUpdate:function(t){var e=t.changedAttributes();if((!e||!("selected"in e||"hovered"in e))&&t.id in this.tiles){var n=this.tiles[t.id];n.render()}},tilesUpdate:function(t,e){var n=this;n.gridRefresh(),n.enableInput(!0)},tilesReset:function(t,e){this.swapTileset(t.models)},swapTileset:function(t){var e=this,n=e.grid,o=e.tiles;e.tiles={},e.disableInput(),e.disableCounter+=1;var s=e.disableCounter;n&&n.removeAttr("id").css({"z-index":1}),e.grid=e.$el.find("#tile-container-proto").clone().attr("id","tile-container").appendTo(e.$el.find("#tile-container-proto").parent()).show();var a=e.grid;_.each(t,function(t){e.tileAdd(t)}),a.imagesLoaded(function(){a.masonry({itemSelector:".grid-item",columnWidth:".grid-sizer",percentPosition:!0,transitionDuration:0}),n&&n.hide(),e.disableCounter==s&&e.enableInput(!0),o&&_.each(o,function(t){t.remove()}),n&&n.remove()}),r.log("TODO: add a case for imagesLoaded() never triggering!")},gridRefresh:function(){var t=this;t.grid.imagesLoaded(function(){t.grid.masonry("reloadItems"),t.grid.masonry("layout")})},disableInput:function(){this.$el.addClass("disabled")},enableInput:function(t){t&&this.$el.removeClass("disabled")},onTileDetailOpened:function(){this.App.$el.addClass("tile-detail-open"),this.App.tileListView.gridRefresh()},onTileDetailClosed:function(){this.App.$el.removeClass("tile-detail-open"),this.App.tileListView.gridRefresh()},onSearchError:function(){this.enableInput(!0)},renderTilesInitial:function(){}})},function(t,e,n){"use strict";var o=n(4),s=n(25),a=n(5),r=n(30),i=n(32),l=n(33);if(COSINNUS_CLOUD_ENABLED)var u=n(34);if(COSINNUS_ORGANIZATIONS_ENABLED)var c=n(35);t.exports=o.extend({App:null,model:s,template:r,events:{"click .result-link":"onResultLinkClicked","click .topic-filter-link":"onTopicLinkClicked","click .text-topic-filter-link":"onTextTopicLinkClicked",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave"},initialize:function(t,e){var n=this;o.prototype.initialize.call(n,t),n.App=e,n.model.on({"change:hovered":n.thisContext(n.onHoverChanged)}),n.fitTemplate()},fitTemplate:function(){var t=this;"cloudfile"===t.model.get("type")?(t.template=u,t.state.isSmall=!0,t.state.noImage=!0):"people"===t.model.get("type")?t.state.isSmall=!0:"groups"===t.model.get("type")?t.template=i:"projects"===t.model.get("type")?t.template=l:"organizations"===t.model.get("type")&&(t.template=c),t.state.isYou="people"===t.model.get("type")&&cosinnus_active_user&&t.model.get("slug")===cosinnus_active_user.username},getTemplateData:function(){var t=this,e=o.prototype.getTemplateData.call(t);return e.controlView=_.extend({},t.App.controlView.options,t.App.controlView.state),e},onHoverChanged:function(){this.$el.toggleClass("hovered",this.model.get("hovered"))},onMouseEnter:function(){this.model.get("selected")||(a.log("tile-view.js: got a hover event! id: "+this.model.id),this.App.controlView.setHoveredResult(this.model))},onMouseLeave:function(){this.model.get("selected")||(a.log("tile-view.js: got an unhover event! id: "+this.model.id),this.App.controlView.setHoveredResult(null))},onTopicLinkClicked:function(t){this.App.controlView.onTopicLinkClicked(t)},onTextTopicLinkClicked:function(t){this.App.controlView.onTextTopicLinkClicked(t)},onResultLinkClicked:function(t){this.App.controlView.onResultLinkClicked(t)}})},function(t,e,n){var o,s=n(8);o=s.currentEnv?s.currentEnv:s.currentEnv=new s.Environment([],void 0);var a=(n(9)(o),s.webpackDependencies||(s.webpackDependencies={}));a["tiles/grid-tile-base"]=n(31),a["include/macros.html"]=n(23);var r=n(10);!function(){(s.nunjucksPrecompiled=s.nunjucksPrecompiled||{})["cosinnus/templates/cosinnus/universal/tiles/grid-tile-default.html"]=function(){function t(t,e,n,o,s){var a=null,r=null,i="";try{var l=null;t.getTemplate("tiles/grid-tile-base",!0,"cosinnus/templates/cosinnus/universal/tiles/grid-tile-default.html",!1,function(a,r){if(a)return void s(a);l=r;for(var u in l.blocks)e.addBlock(u,l.blocks[u]);i+="\n",t.getTemplate("include/macros.html",!1,"cosinnus/templates/cosinnus/universal/tiles/grid-tile-default.html",!1,function(a,r){return a?void s(a):void r.getExported(function(a,r){return a?void s(a):(e.setVariable("macros",r),i+="\n\n",void(l?function(t,e,n,o,s){s("")}:e.getBlock("description_area"))(t,e,n,o,function(a,r){return a?void s(a):(i+=r,i+="\n\n",void(l?function(t,e,n,o,s){s("")}:e.getBlock("icon_area"))(t,e,n,o,function(a,r){return a?void s(a):(i+=r,i+="\n",void(l?l.rootRenderFunc(t,e,n,o,s):s(null,i)))}))}))})})})}catch(t){s(o.handleError(t,a,r))}}function e(t,e,n,o,s){var a=null,r=null,i="";try{i+="\n    ",e.getBlock("title")(t,e,n,o,function(l,u){if(l)return void s(l);if(i+=u,i+="\n    \n    ",o.contextOrFrameLookup(e,n,"group_slug")&&o.contextOrFrameLookup(e,n,"group_name")&&o.contextOrFrameLookup(e,n,"portal")&&(i+='\n        <div class="pale-color one-line">\n            ',"projects"==o.contextOrFrameLookup(e,n,"type")?(i+="\n                ",i+=o.suppressValue((a=19,r=33,o.callWrap(o.memberLookup(o.contextOrFrameLookup(e,n,"macros"),"typeLabel"),'macros["typeLabel"]',e,["groups",o.makeKeywordArgs({singular:1,useStyles:0,colon:1,showIcon:0,COSINNUS_TRANS:o.contextOrFrameLookup(e,n,"COSINNUS_TRANS")})])),t.opts.autoescape),i+="\n                ",i+=o.suppressValue((a=20,r=34,o.callWrap(o.memberLookup(o.contextOrFrameLookup(e,n,"macros"),"resultLink"),'macros["resultLink"]',e,[o.contextOrFrameLookup(e,n,"portal"),o.contextOrFrameLookup(e,n,"group_slug"),o.contextOrFrameLookup(e,n,"group_name"),"groups"])),t.opts.autoescape),i+="\n            "):(i+="\n                ",i+=o.suppressValue((a=22,r=33,o.callWrap(o.memberLookup(o.contextOrFrameLookup(e,n,"macros"),"typeLabel"),'macros["typeLabel"]',e,["projects",o.makeKeywordArgs({singular:1,useStyles:0,colon:1,showIcon:0,COSINNUS_TRANS:o.contextOrFrameLookup(e,n,"COSINNUS_TRANS")})])),t.opts.autoescape),i+="\n                ",i+=o.suppressValue((a=23,r=34,o.callWrap(o.memberLookup(o.contextOrFrameLookup(e,n,"macros"),"resultLink"),'macros["resultLink"]',e,[o.contextOrFrameLookup(e,n,"portal"),o.contextOrFrameLookup(e,n,"group_slug"),o.contextOrFrameLookup(e,n,"group_name"),"projects"])),t.opts.autoescape),i+="\n            "),i+="\n        </div>\n    "),i+="\n    \n    ",t.getFilter("length").call(e,o.contextOrFrameLookup(e,n,"topics"))>0){i+='\n        <div class="tile-section one-line">\n            <span class="pale-color">\n                ',i+="\n                ",i+=o.suppressValue(t.getExtension("translation").run(e,"Topics"),t.opts.autoescape),i+=":\n            </span> \n            ",n=n.push();var c=o.contextOrFrameLookup(e,n,"topics");if(c)for(var p=c.length,d=0;d<c.length;d++){var m=c[d];n.set("topic",m),n.set("loop.index",d+1),n.set("loop.index0",d),n.set("loop.revindex",p-d),n.set("loop.revindex0",p-d-1),n.set("loop.first",0===d),n.set("loop.last",d===p-1),n.set("loop.length",p),i+='\n                <a class="topic-filter-link " data-topic-id="',i+=o.suppressValue(m,t.opts.autoescape),i+='">',i+=o.suppressValue(o.memberLookup(o.memberLookup(o.contextOrFrameLookup(e,n,"controlView"),"allTopics"),m),t.opts.autoescape),i+="</a>",o.memberLookup(o.contextOrFrameLookup(e,n,"loop"),"last")||(i+=","),i+="\n            "}n=n.pop(),i+="\n        </div>\n    "}i+="\n    \n    ",o.contextOrFrameLookup(e,n,"description")&&(i+='\n        <div class="tile-section tile-description">',i+=o.suppressValue(t.getFilter("safe").call(e,o.contextOrFrameLookup(e,n,"description")),t.opts.autoescape),i+="</div>\n    "),i+="\n",s(null,i)})}catch(t){s(o.handleError(t,a,r))}}function n(t,e,n,o,s){var a=null,r=null,i="";try{i+="\n    <h1>\n    \t",i+=o.suppressValue(o.contextOrFrameLookup(e,n,"title"),t.opts.autoescape),i+="\n    \t",o.contextOrFrameLookup(e,n,"isYou")&&(i+='\n    \t\t<i class="pale-color">\n                ',i+="\n                (",i+=o.suppressValue(t.getExtension("translation").run(e,"You"),t.opts.autoescape),i+=")\n\t\t\t</i>\n\t\t"),i+="\n    </h1>\n    ",s(null,i)}catch(t){s(o.handleError(t,a,r))}}function o(t,e,n,o,s){var a=null,r=null,i="";try{i+="\n    ",("events"==o.contextOrFrameLookup(e,n,"type")&&o.contextOrFrameLookup(e,n,"participant_count")>1||"events"!=o.contextOrFrameLookup(e,n,"type")&&o.contextOrFrameLookup(e,n,"member_count")>1||o.contextOrFrameLookup(e,n,"content_count")>0)&&(i+='\n    <div class="tile-section pale-color one-line">\n        ',"events"==o.contextOrFrameLookup(e,n,"type")&&o.contextOrFrameLookup(e,n,"participant_count")>1&&(i+='\n            <span class="multi-span" title="\n                ',i+="\n                ",i+=o.suppressValue(t.getExtension("translation").run(e,"Participants"),t.opts.autoescape),i+='\n            ">\n                <i class="fa fa-group"></i> \n                ',i+=o.suppressValue(o.contextOrFrameLookup(e,n,"participant_count"),t.opts.autoescape),i+="\n            </span>\n        "),i+="\n        \n        ","people"==o.contextOrFrameLookup(e,n,"type")&&o.contextOrFrameLookup(e,n,"member_count")>1&&(i+='\n            <span class="multi-span" title="\n                ',"people"==o.contextOrFrameLookup(e,n,"type")?(i+="\n                    ",i+="\n                    ",i+=o.suppressValue(t.getExtension("translation").run(e,"Projects/Groups"),t.opts.autoescape),i+="\n                "):(i+="\n                    ",i+="\n                    ",i+=o.suppressValue(t.getExtension("translation").run(e,"Members"),t.opts.autoescape),i+="\n                "),i+='\n            ">\n                <i class="fa fa-group"></i> \n                ',i+=o.suppressValue(o.contextOrFrameLookup(e,n,"member_count"),t.opts.autoescape),i+="\n            </span>\n        "),i+="\n        \n        ","projects"!=o.contextOrFrameLookup(e,n,"type")&&"groups"!=o.contextOrFrameLookup(e,n,"type")||(i+="\n            ",o.contextOrFrameLookup(e,n,"member_count")>1&&(i+='\n\t            <span class="multi-span" title="\n\t                ',i+="\n\t                ",i+=o.suppressValue(t.getExtension("translation").run(e,"Members"),t.opts.autoescape),i+='\n\t            ">\n\t                <i class="fa fa-group"></i> \n\t                ',i+=o.suppressValue(o.contextOrFrameLookup(e,n,"member_count"),t.opts.autoescape),i+="\n\t            </span>\n            "),i+="\n\t        ",o.contextOrFrameLookup(e,n,"content_count")>0&&(i+='\n\t            <span class="multi-span" title="\n\t                ',i+="\n\t                ",i+=o.suppressValue(t.getExtension("translation").run(e,"Events"),t.opts.autoescape),i+='\n\t            ">\n\t                <i class="fa fa-calendar"></i> \n\t                ',i+=o.suppressValue(o.contextOrFrameLookup(e,n,"content_count"),t.opts.autoescape),i+="\n\t            </span>\n\t        "),i+="\n        "),i+="\n        \n        ","ideas"==o.contextOrFrameLookup(e,n,"type")&&o.contextOrFrameLookup(e,n,"participant_count")>0&&(i+='\n            <span class="multi-span" title="\n                ',i+="\n                ",i+=o.suppressValue(t.getExtension("translation").run(e,"Likes"),t.opts.autoescape),i+='\n            ">\n                <i class="fa fa-heart ',o.contextOrFrameLookup(e,n,"liked")&&(i+="apply-color-liked"),i+='" ></i> \n                ',i+=o.suppressValue(o.contextOrFrameLookup(e,n,"participant_count"),t.opts.autoescape),i+="\n            </span>\n        "),i+="\n        ","ideas"==o.contextOrFrameLookup(e,n,"type")&&o.contextOrFrameLookup(e,n,"content_count")>0&&(i+='\n            <span class="multi-span" title="\n                ',i+="\n                ",i+=o.suppressValue(t.getExtension("translation").run(e,"Projects"),t.opts.autoescape),i+='\n            ">\n                <i class="fa fa-group"></i> \n                ',i+=o.suppressValue(o.contextOrFrameLookup(e,n,"content_count"),t.opts.autoescape),i+="\n            </span>\n        "),i+="\n        \n        \n    </div>\n    "),i+="\n    \n",s(null,i)}catch(t){s(o.handleError(t,a,r))}}return{b_description_area:e,b_title:n,b_icon_area:o,root:t}}()}(),t.exports=r(s,o,s.nunjucksPrecompiled["cosinnus/templates/cosinnus/universal/tiles/grid-tile-default.html"],a)},function(t,e,n){var o,s=n(8);o=s.currentEnv?s.currentEnv:s.currentEnv=new s.Environment([],void 0);var a=(n(9)(o),s.webpackDependencies||(s.webpackDependencies={}));a["include/macros.html"]=n(23);var r=n(10);!function(){(s.nunjucksPrecompiled=s.nunjucksPrecompiled||{})["cosinnus/templates/cosinnus/universal/tiles/grid-tile-base.html"]=function(){function t(t,e,n,o,s){var a=null,r=null,i="";try{var l=null;t.getTemplate("include/macros.html",!1,"cosinnus/templates/cosinnus/universal/tiles/grid-tile-base.html",!1,function(u,c){return u?void s(u):void c.getExported(function(u,c){return u?void s(u):(e.setVariable("macros",c),i+='\n\n<div class="tile tile-',i+=o.suppressValue(o.contextOrFrameLookup(e,n,"type"),t.opts.autoescape),i+=" grid-item ",o.contextOrFrameLookup(e,n,"selected")&&(i+="selected"),i+=" ",o.contextOrFrameLookup(e,n,"hovered")&&(i+="hovered"),i+='">\n    <div class="tile-detail-link result-link" ',i+=o.suppressValue((a=3,r=64,o.callWrap(o.memberLookup(c,"resultLink"),'macros["resultLink"]',e,[o.contextOrFrameLookup(e,n,"portal"),o.contextOrFrameLookup(e,n,"slug"),o.contextOrFrameLookup(e,n,"title"),o.contextOrFrameLookup(e,n,"type"),o.makeKeywordArgs({group_slug:o.contextOrFrameLookup(e,n,"group_slug"),inline_only:1})])),t.opts.autoescape),i+=">\n        ",o.contextOrFrameLookup(e,n,"isSmall")&&!o.contextOrFrameLookup(e,n,"noImage")&&(i+='\n            <div class="single-tile-image ',o.contextOrFrameLookup(e,n,"iconImageUrl")||(i+="image-placeholder-background image-placeholder-background-",i+=o.suppressValue(o.contextOrFrameLookup(e,n,"type"),t.opts.autoescape)),i+='">\n            \t',o.contextOrFrameLookup(e,n,"iconImageUrl")&&(i+='\n                \t<img class="framed-tile-image" src="',i+=o.suppressValue(o.contextOrFrameLookup(e,n,"iconImageUrl"),t.opts.autoescape),i+='" />\n                '),i+="\n            </div>\n        "),i+="\n    \n        ",void(l?function(t,e,n,o,s){s("")}:e.getBlock("type_area"))(t,e,n,o,function(a,r){return a?void s(a):(i+=r,i+="\n        \n        ",o.contextOrFrameLookup(e,n,"isSmall")||o.contextOrFrameLookup(e,n,"noImage")||(i+='\n            <div class="tile-section">\n                <div class="dual-tile-image ',o.contextOrFrameLookup(e,n,"backgroundImageSmallUrl")||(i+="image-placeholder-background image-placeholder-background-",
i+=o.suppressValue(o.contextOrFrameLookup(e,n,"type"),t.opts.autoescape)),i+='">\n                    ',o.contextOrFrameLookup(e,n,"backgroundImageSmallUrl")&&(i+='\n                        <img class="tile-image tile-image-background" src="',i+=o.suppressValue(o.contextOrFrameLookup(e,n,"backgroundImageSmallUrl"),t.opts.autoescape),i+='" />\n                    '),i+="\n                    ",o.contextOrFrameLookup(e,n,"iconImageUrl")&&(i+='\n                        <img class="floating-tile-image" src="',i+=o.suppressValue(o.contextOrFrameLookup(e,n,"iconImageUrl"),t.opts.autoescape),i+='" />\n                    '),i+="\n                </div>\n            </div>\n        "),i+="\n        \n        ",void(l?function(t,e,n,o,s){s("")}:e.getBlock("description_area"))(t,e,n,o,function(a,r){return a?void s(a):(i+=r,i+="\n        \n        ",void(l?function(t,e,n,o,s){s("")}:e.getBlock("icon_area"))(t,e,n,o,function(a,r){return a?void s(a):(i+=r,i+="\n    </div> \n</div>\n",void(l?l.rootRenderFunc(t,e,n,o,s):s(null,i)))}))}))}))})})}catch(t){s(o.handleError(t,a,r))}}function e(t,e,n,o,s){var a=null,r=null,i="";try{i+='\n            <div class="tile-header-section">\n                ',i+=o.suppressValue((a=14,r=33,o.callWrap(o.memberLookup(o.contextOrFrameLookup(e,n,"macros"),"typeLabel"),'macros["typeLabel"]',e,[o.contextOrFrameLookup(e,n,"type"),o.makeKeywordArgs({singular:1,COSINNUS_TRANS:o.contextOrFrameLookup(e,n,"COSINNUS_TRANS")})])),t.opts.autoescape),i+="\n                ",o.contextOrFrameLookup(e,n,"portal")==o.contextOrFrameLookup(e,n,"COSINNUS_EXCHANGE_PORTAL_ID")&&(i+="\n                \t",i+="\n\t                ",i+=o.suppressValue(t.getExtension("translation").run(e,"from"),t.opts.autoescape),i+=": ",i+=o.suppressValue(o.contextOrFrameLookup(e,n,"source"),t.opts.autoescape),i+="\n                "),i+="\n                ",o.contextOrFrameLookup(e,n,"isSmall")||o.memberLookup(o.memberLookup(o.contextOrFrameLookup(e,n,"controlView"),"portalInfo"),"current")==o.contextOrFrameLookup(e,n,"portal")||(i+='\n                    <div class="pull-right">\n                        <a class="portal-inlink uncolored-link" href="',i+=o.suppressValue(o.memberLookup(o.memberLookup(o.memberLookup(o.contextOrFrameLookup(e,n,"controlView"),"portalInfo"),o.contextOrFrameLookup(e,n,"portal")),"domain"),t.opts.autoescape),i+='" target="_blank" title="',i+=o.suppressValue(o.memberLookup(o.memberLookup(o.memberLookup(o.contextOrFrameLookup(e,n,"controlView"),"portalInfo"),o.contextOrFrameLookup(e,n,"portal")),"name"),t.opts.autoescape),i+='">\n                            ',i+="\n                            ",i+=o.suppressValue(o.memberLookup(o.memberLookup(o.memberLookup(o.contextOrFrameLookup(e,n,"controlView"),"portalInfo"),o.contextOrFrameLookup(e,n,"portal")),"name"),t.opts.autoescape),i+="\n                        </a> \n                    </div>\n                "),i+="\n            </div>\n        ",s(null,i)}catch(t){s(o.handleError(t,a,r))}}function n(t,e,n,o,s){var a=null,r=null,i="";try{s(null,i)}catch(t){s(o.handleError(t,a,r))}}function o(t,e,n,o,s){var a=null,r=null,i="";try{s(null,i)}catch(t){s(o.handleError(t,a,r))}}return{b_type_area:e,b_description_area:n,b_icon_area:o,root:t}}()}(),t.exports=r(s,o,s.nunjucksPrecompiled["cosinnus/templates/cosinnus/universal/tiles/grid-tile-base.html"],a)},function(t,e,n){var o,s=n(8);o=s.currentEnv?s.currentEnv:s.currentEnv=new s.Environment([],void 0);var a=(n(9)(o),s.webpackDependencies||(s.webpackDependencies={}));a["tiles/grid-tile-default"]=n(30);var r=n(10);!function(){(s.nunjucksPrecompiled=s.nunjucksPrecompiled||{})["cosinnus/templates/cosinnus/universal/tiles/grid-tile-groups.html"]=function(){function t(t,e,n,o,s){var a=null,r=null,i="";try{var l=null;t.getTemplate("tiles/grid-tile-default",!0,"cosinnus/templates/cosinnus/universal/tiles/grid-tile-groups.html",!1,function(a,r){if(a)return void s(a);l=r;for(var u in l.blocks)e.addBlock(u,l.blocks[u]);i+="\n\n",(l?function(t,e,n,o,s){s("")}:e.getBlock("title"))(t,e,n,o,function(a,r){return a?void s(a):(i+=r,void(l?l.rootRenderFunc(t,e,n,o,s):s(null,i)))})})}catch(t){s(o.handleError(t,a,r))}}function e(t,e,n,o,s){var a=null,r=null,i="";try{i+="\n    ",o.contextOrFrameLookup(e,n,"is_open_for_cooperation")?(i+='\n    <h1 class="with-icon">\n        <span>',i+=o.suppressValue(o.contextOrFrameLookup(e,n,"title"),t.opts.autoescape),i+='</span>\n        <i class="fa fa-puzzle-piece apply-color-projects"></i>\n    </h1>\n    '):(i+="\n    <h1>\n        ",i+=o.suppressValue(o.contextOrFrameLookup(e,n,"title"),t.opts.autoescape),i+="\n    </h1>\n    "),i+="\n",s(null,i)}catch(t){s(o.handleError(t,a,r))}}return{b_title:e,root:t}}()}(),t.exports=r(s,o,s.nunjucksPrecompiled["cosinnus/templates/cosinnus/universal/tiles/grid-tile-groups.html"],a)},function(t,e,n){var o,s=n(8);o=s.currentEnv?s.currentEnv:s.currentEnv=new s.Environment([],void 0);var a=(n(9)(o),s.webpackDependencies||(s.webpackDependencies={}));a["tiles/grid-tile-default"]=n(30);var r=n(10);!function(){(s.nunjucksPrecompiled=s.nunjucksPrecompiled||{})["cosinnus/templates/cosinnus/universal/tiles/grid-tile-projects.html"]=function(){function t(t,e,n,o,s){var a=null,r=null,i="";try{var l=null;t.getTemplate("tiles/grid-tile-default",!0,"cosinnus/templates/cosinnus/universal/tiles/grid-tile-projects.html",!1,function(a,r){if(a)return void s(a);l=r;for(var u in l.blocks)e.addBlock(u,l.blocks[u]);i+="\n\n",(l?function(t,e,n,o,s){s("")}:e.getBlock("title"))(t,e,n,o,function(a,r){return a?void s(a):(i+=r,void(l?l.rootRenderFunc(t,e,n,o,s):s(null,i)))})})}catch(t){s(o.handleError(t,a,r))}}function e(t,e,n,o,s){var a=null,r=null,i="";try{i+="\n    ",o.contextOrFrameLookup(e,n,"is_open_for_cooperation")?(i+='\n    <h1 class="with-icon">\n        <span>',i+=o.suppressValue(o.contextOrFrameLookup(e,n,"title"),t.opts.autoescape),i+='</span>\n        <i class="fa fa-puzzle-piece apply-color-projects"></i>\n    </h1>\n    '):(i+="\n    <h1>\n        ",i+=o.suppressValue(o.contextOrFrameLookup(e,n,"title"),t.opts.autoescape),i+="\n    </h1>\n    "),i+="\n",s(null,i)}catch(t){s(o.handleError(t,a,r))}}return{b_title:e,root:t}}()}(),t.exports=r(s,o,s.nunjucksPrecompiled["cosinnus/templates/cosinnus/universal/tiles/grid-tile-projects.html"],a)},function(t,e,n){var o,s=n(8);o=s.currentEnv?s.currentEnv:s.currentEnv=new s.Environment([],void 0);var a=(n(9)(o),s.webpackDependencies||(s.webpackDependencies={}));a["tiles/grid-tile-base"]=n(31),a["include/macros.html"]=n(23);var r=n(10);!function(){(s.nunjucksPrecompiled=s.nunjucksPrecompiled||{})["cosinnus/templates/cosinnus/universal/tiles/grid-tile-cloudfile.html"]=function(){function t(t,e,n,o,s){var a=null,r=null,i="";try{var l=null;t.getTemplate("tiles/grid-tile-base",!0,"cosinnus/templates/cosinnus/universal/tiles/grid-tile-cloudfile.html",!1,function(a,r){if(a)return void s(a);l=r;for(var u in l.blocks)e.addBlock(u,l.blocks[u]);i+="\n",t.getTemplate("include/macros.html",!1,"cosinnus/templates/cosinnus/universal/tiles/grid-tile-cloudfile.html",!1,function(a,r){return a?void s(a):void r.getExported(function(a,r){return a?void s(a):(e.setVariable("macros",r),i+="\n\n",void(l?function(t,e,n,o,s){s("")}:e.getBlock("description_area"))(t,e,n,o,function(a,r){return a?void s(a):(i+=r,i+="\n\n",void(l?function(t,e,n,o,s){s("")}:e.getBlock("icon_area"))(t,e,n,o,function(a,r){return a?void s(a):(i+=r,i+="\n",void(l?l.rootRenderFunc(t,e,n,o,s):s(null,i)))}))}))})})})}catch(t){s(o.handleError(t,a,r))}}function e(t,e,n,o,s){var a=null,r=null,i="";try{i+="\n    <h1>\n    ",i+=o.suppressValue(t.getFilter("safe").call(e,o.contextOrFrameLookup(e,n,"title")),t.opts.autoescape),i+='\n    </h1>\n    <div class="tile-section tile-description">\n        ',o.contextOrFrameLookup(e,n,"excerpt")&&(i+="\n            ",i+=o.suppressValue(t.getFilter("safe").call(e,o.contextOrFrameLookup(e,n,"excerpt")),t.opts.autoescape),i+="\n        "),i+="\n    </div>\n",s(null,i)}catch(t){s(o.handleError(t,a,r))}}function n(t,e,n,o,s){var a=null,r=null,i="";try{i+='\n    <i class="fa fa-cloud"></i>\n',s(null,i)}catch(t){s(o.handleError(t,a,r))}}return{b_description_area:e,b_icon_area:n,root:t}}()}(),t.exports=r(s,o,s.nunjucksPrecompiled["cosinnus/templates/cosinnus/universal/tiles/grid-tile-cloudfile.html"],a)},function(t,e,n){var o,s=n(8);o=s.currentEnv?s.currentEnv:s.currentEnv=new s.Environment([],void 0);var a=(n(9)(o),s.webpackDependencies||(s.webpackDependencies={}));a["tiles/grid-tile-default"]=n(30);var r=n(10);!function(){(s.nunjucksPrecompiled=s.nunjucksPrecompiled||{})["cosinnus/templates/cosinnus/universal/tiles/grid-tile-organizations.html"]=function(){function t(t,e,n,o,s){var a=null,r=null,i="";try{var l=null;t.getTemplate("tiles/grid-tile-default",!0,"cosinnus/templates/cosinnus/universal/tiles/grid-tile-organizations.html",!1,function(a,r){if(a)return void s(a);l=r;for(var u in l.blocks)e.addBlock(u,l.blocks[u]);i+="\n\n",(l?function(t,e,n,o,s){s("")}:e.getBlock("title"))(t,e,n,o,function(a,r){return a?void s(a):(i+=r,void(l?l.rootRenderFunc(t,e,n,o,s):s(null,i)))})})}catch(t){s(o.handleError(t,a,r))}}function e(t,e,n,o,s){var a=null,r=null,i="";try{i+="\n    ",o.contextOrFrameLookup(e,n,"is_open_for_cooperation")?(i+='\n    <h1 class="with-icon">\n        <span>',i+=o.suppressValue(o.contextOrFrameLookup(e,n,"title"),t.opts.autoescape),i+='</span>\n        <i class="fa fa-puzzle-piece apply-color-organizations"></i>\n    </h1>\n    '):(i+="\n    <h1>\n        ",i+=o.suppressValue(o.contextOrFrameLookup(e,n,"title"),t.opts.autoescape),i+="\n    </h1>\n    "),i+="\n",s(null,i)}catch(t){s(o.handleError(t,a,r))}}return{b_title:e,root:t}}()}(),t.exports=r(s,o,s.nunjucksPrecompiled["cosinnus/templates/cosinnus/universal/tiles/grid-tile-organizations.html"],a)},function(t,e,n){var o,s=n(8);o=s.currentEnv?s.currentEnv:s.currentEnv=new s.Environment([],{dev:!1,autoescape:!0,throwOnUndefined:!1,trimBlocks:!1,lstripBlocks:!1});var a=(n(9)(o),s.webpackDependencies||(s.webpackDependencies={}));a["include/macros.html"]=n(23);var r=n(10);!function(){(s.nunjucksPrecompiled=s.nunjucksPrecompiled||{})["cosinnus/templates/cosinnus/universal/tiles/tile-list.html"]=function(){function t(t,e,n,o,s){var a=null,r=null,i="";try{var l=null;i+=o.suppressValue(t.getExtension("passThrough").run(e,o.contextOrFrameLookup(e,n,"i18n")),t.opts.autoescape),i+="\n",t.getTemplate("include/macros.html",!1,"cosinnus/templates/cosinnus/universal/tiles/tile-list.html",!1,function(u,c){return u?void s(u):void c.getExported(function(u,c){if(u)return void s(u);if(e.setVariable("macros",c),i+='\n\n<div id="tile-list" class="tile-list ',o.contextOrFrameLookup(e,n,"fullscreen")&&(i+=" tile-list-fullscreen "),i+=" ",i+=o.contextOrFrameLookup(e,n,"splitscreen")?" tile-list-splitscreen ":" tile-list-tile-fullscreen ",i+=' mobile-view mobile-view-list-visible-flex mobile-view-search-visible-flex">\n    <div class="overlay"></div>\n    ',!o.contextOrFrameLookup(e,n,"splitscreen")){i+='\n        <div class="tile-list-header">\n            <span class="pull-right">\n\t            ',n=n.push();var p=["projects","groups","conferences","ideas","organizations"];if(p)for(var d=p.length,m=0;m<p.length;m++){var f=p[m];n.set("type",f),n.set("loop.index",m+1),n.set("loop.index0",m),n.set("loop.revindex",d-m),n.set("loop.revindex0",d-m-1),n.set("loop.first",0===m),n.set("loop.last",m===d-1),n.set("loop.length",d),i+="\n\t                ",o.inOperator(f,o.memberLookup(o.contextOrFrameLookup(e,n,"controlView"),"availableFilterList"))&&(i+="\n\t                    ",o.inOperator(f,["projects","groups"])&&!o.contextOrFrameLookup(e,n,"COSINNUS_SHOW_PROJECT_AND_GROUP_CREATE_BUTTONS")||(i+="\n\t                        ",(o.contextOrFrameLookup(e,n,"COSINNUS_USER_CAN_CREATE_CONFERENCE")||"conferences"!=f)&&(i+='\n\t\t\t\t\t            <a href="',o.contextOrFrameLookup(e,n,"cosinnus_active_user")||(i+="/signup/?acc_req_msg=1&next="),i+="/",i+=o.suppressValue(f,t.opts.autoescape),i+='/add/" class="rounded-button button-color-',i+=o.suppressValue(f,t.opts.autoescape),i+='-inverted">\n\t\t\t\t\t\t            <span class="rounded-button-inner">\n\t\t\t\t\t\t                ',i+=o.suppressValue((a=14,r=39,o.callWrap(o.memberLookup(c,"typeLabel"),'macros["typeLabel"]',e,[f,o.makeKeywordArgs({useStyles:0,create:!0,COSINNUS_TRANS:o.contextOrFrameLookup(e,n,"COSINNUS_TRANS")})])),t.opts.autoescape),i+="\n\t\t\t\t\t\t            </span>\n\t\t\t\t\t\t        </a>\n\t\t\t\t\t        "),i+="\n\t\t\t\t\t    "),i+="\n\t                "),i+="\n\t            "}n=n.pop(),i+='\n            </span>\n            \n\t        <h1 class="no-select">\n                ',n=n.push();var h=o.memberLookup(o.contextOrFrameLookup(e,n,"controlView"),"availableFilterList");if(h)for(var v=h.length,g=0;g<h.length;g++){var k=h[g];n.set("filter_type",k),n.set("loop.index",g+1),n.set("loop.index0",g),n.set("loop.revindex",v-g),n.set("loop.revindex0",v-g-1),n.set("loop.first",0===g),n.set("loop.last",g===v-1),n.set("loop.length",v),i+="\n                    ",i+=o.suppressValue((a=25,r=37,o.callWrap(o.memberLookup(c,"typeLabel"),'macros["typeLabel"]',e,[k,o.makeKeywordArgs({mine:o.memberLookup(o.contextOrFrameLookup(e,n,"controlView"),"showMine"),all:!0,COSINNUS_TRANS:o.contextOrFrameLookup(e,n,"COSINNUS_TRANS")})])),t.opts.autoescape),i+="\n                "}n=n.pop(),i+="\n            </h1>\n        </div>\n    "}i+='\n    <div class="controls ',o.memberLookup(o.memberLookup(o.contextOrFrameLookup(e,n,"controlView"),"state"),"filterPanelVisible")&&(i+="open"),i+='"></div>\n\n    ',o.memberLookup(o.contextOrFrameLookup(e,n,"controlView"),"matching")&&"true"==o.memberLookup(o.contextOrFrameLookup(e,n,"controlView"),"matching")||(i+='\n    <div class="tile-contents mobile-view mobile-view-list-visible-block">\n        <div id="tile-container-proto" class="grid" style="display: none;">\n            <!-- width of .grid-sizer used for columnWidth -->\n            <div class="grid-sizer"></div>\n        </div>\n    </div>\n    <div class="pagination-controls"></div>\n    '),i+="\n</div>",l?l.rootRenderFunc(t,e,n,o,s):s(null,i)})})}catch(t){s(o.handleError(t,a,r))}}return{root:t}}()}(),t.exports=r(s,o,s.nunjucksPrecompiled["cosinnus/templates/cosinnus/universal/tiles/tile-list.html"],a)},function(t,e,n){"use strict";var o=n(4),s=n(25),a=n(5),r={projects:n(38),groups:n(41),conferences:n(42),people:n(43),events:n(44),ideas:n(45),organizations:n(46),"error-403":n(47),error:n(48)};t.exports=o.extend({App:null,model:s,template:null,events:{"click .result-link":"onResultLinkClicked","click .tile-close-button":"onDeselectClicked","click .topic-filter-link":"onTopicLinkClicked","click .text-topic-filter-link":"onTextTopicLinkClicked","click .managed-tag-filter-link":"onManagedTagLinkClicked","click .button-like":"onLikeButtonClicked","click .button-follow":"onFollowButtonClicked","click .button-star":"onStarButtonClicked","click .button-report-object":"onReportButtonClicked"},initialize:function(t,e){var n=this;o.prototype.initialize.call(n,t),n.App=e,Backbone.mediator.subscribe("result:detail-opened",n.onDetailOpened,n),Backbone.mediator.subscribe("result:detail-closed",n.onDetailClosed,n)},getTemplateData:function(){var t=this,e=o.prototype.getTemplateData.call(t);return e.controlView=_.extend({},t.App.controlView.options,t.App.controlView.state),e.starLabel=COSINNUS_STARRED_STAR_LABEL,e.starringLabel=COSINNUS_STARRED_STARRING_LABEL,e},fitTemplate:function(){var t=this;"people"!=t.model.get("type")&&"organizations"!=t.model.get("type")||(t.state.isSmall=!0),t.state.isYou="people"==t.model.get("type")&&cosinnus_active_user&&t.model.get("slug")==cosinnus_active_user.username},onDetailOpened:function(t){var e=this;this.model=t,t.get("type")in r?this.template=r[t.get("type")]:this.template=r.error,this.model.on({"change:liked":e.thisContext(e.render),"change:followed":e.thisContext(e.render),"change:starred":e.thisContext(e.render)}),this.fitTemplate(),this.render(),this.App.controlView.triggerMobileDetailView(),Backbone.mediator.publish("tile-detail:opened")},onDetailClosed:function(){this.model=null,this.render(),this.App.controlView.untriggerMobileDetailView(),this.App.controlView.addCurrentHistoryState(),Backbone.mediator.publish("tile-detail:closed")},afterRender:function(){$.cosinnus.renderMomentDataDate(),$.cosinnus.renderTimezoneAwareDates()},onTopicLinkClicked:function(t){this.App.controlView.displayDetailResult(null),this.App.controlView.onTopicLinkClicked(t)},onTextTopicLinkClicked:function(t){this.App.controlView.displayDetailResult(null),this.App.controlView.onTextTopicLinkClicked(t)},onManagedTagLinkClicked:function(t){this.App.controlView.displayDetailResult(null),this.App.controlView.onManagedTagLinkClicked(t)},onDeselectClicked:function(){a.log("tile-view.js: got a deselect click event!"),this.App.controlView.displayDetailResult(null,!0),App.displayOptions.routeNavigation&&(a.log("tile-detail-view.js: +++++++++++++++++ since we are fullscreen, publishing detail-close router URL update!"),App.controlView.addCurrentHistoryState())},onResultLinkClicked:function(t){this.App.controlView.onResultLinkClicked(t)},onLikeButtonClicked:function(t){this.App.controlView.triggerResultLikeOrUnlike(this.model)},onFollowButtonClicked:function(t){this.App.controlView.triggerResultFollowOrUnfollow(this.model)},onStarButtonClicked:function(t){this.App.controlView.triggerResultStarOrUnstar(this.model)},onReportButtonClicked:function(t){$.cosinnus.Feedback.cosinnus_report_object(this.model.get("report_model"),this.model.get("report_id"),this.model.get("title"))}})},function(t,e,n){var o,s=n(8);o=s.currentEnv?s.currentEnv:s.currentEnv=new s.Environment([],void 0);var a=(n(9)(o),s.webpackDependencies||(s.webpackDependencies={}));a["tiles/tile-detail-base-group"]=n(39),a["include/macros.html"]=n(23);var r=n(10);!function(){(s.nunjucksPrecompiled=s.nunjucksPrecompiled||{})["cosinnus/templates/cosinnus/universal/tiles/tile-detail-projects.html"]=function(){function t(t,e,n,o,s){var a=null,r=null,i="";try{var l=null;t.getTemplate("tiles/tile-detail-base-group",!0,"cosinnus/templates/cosinnus/universal/tiles/tile-detail-projects.html",!1,function(a,r){if(a)return void s(a);l=r;for(var u in l.blocks)e.addBlock(u,l.blocks[u]);i+="\n",t.getTemplate("include/macros.html",!1,"cosinnus/templates/cosinnus/universal/tiles/tile-detail-projects.html",!1,function(a,r){return a?void s(a):void r.getExported(function(a,r){return a?void s(a):(e.setVariable("macros",r),i+="\n\n",void(l?function(t,e,n,o,s){s("")}:e.getBlock("additional_top_line"))(t,e,n,o,function(a,r){return a?void s(a):(i+=r,i+="\n\n",void(l?function(t,e,n,o,s){s("")}:e.getBlock("action_buttons"))(t,e,n,o,function(a,r){return a?void s(a):(i+=r,i+="\n",void(l?l.rootRenderFunc(t,e,n,o,s):s(null,i)))}))}))})})})}catch(t){s(o.handleError(t,a,r))}}function e(t,e,n,o,s){var a=null,r=null,i="";try{i+="\n",i+=o.suppressValue(o.memberLookup(o.contextOrFrameLookup(e,n,"block"),"super"),t.opts.autoescape),i+="\n",o.contextOrFrameLookup(e,n,"is_open_for_cooperation")&&(i+='\n<div class="alert apply-bg-color-projects">\n    <i class="fa fa-puzzle-piece"></i>\n    ',i+="\n    <p>",i+=o.suppressValue(t.getExtension("translation").run(e,"This project is open for further partner organizations."),t.opts.autoescape),i+="</p>\n</div>\n"),i+="\n",s(null,i)}catch(t){s(o.handleError(t,a,r))}}function n(t,e,o,s,a){var r=null,i=null,l="";try{e.getSuper(t,"action_buttons",n,o,s,function(n,r){return n?void a(n):(r=s.markSafe(r),l+='\n    <div class="tile-section tile-section-button-list">\n        ',l+=s.suppressValue(r,t.opts.autoescape),l+="\n        \n        ",s.contextOrFrameLookup(e,o,"is_member")?(l+='\n            <a class="rounded-button button-action disabled">\n                <span class="rounded-button-inner">\n                    <i clasS="fa fa-check"></i>\n                    ',l+="\n                    ",l+=s.suppressValue(t.getExtension("translation").run(e,"You are a Member"),t.opts.autoescape),l+="\n                </span>\n            </a>\n        "):(l+='\n           <a href="',l+=s.suppressValue(s.contextOrFrameLookup(e,o,"action_url_1"),t.opts.autoescape),l+='" target="_blank" class="rounded-button button-action">\n                <span class="rounded-button-inner">\n                    ',s.contextOrFrameLookup(e,o,"is_invited")?(l+="\n                        ",l+="\n                        ",l+=s.suppressValue(t.getExtension("translation").run(e,"You are invited!"),t.opts.autoescape),l+="\n                    "):s.contextOrFrameLookup(e,o,"is_pending")?(l+="\n                        ",l+="\n                        ",l+=s.suppressValue(t.getExtension("translation").run(e,"Membership request pending..."),t.opts.autoescape),l+="\n                    "):(l+="\n\t                    ",l+="\n\t                    ",l+=s.suppressValue(t.getExtension("translation").run(e,"Join Project"),t.opts.autoescape),l+="\n                    "),l+="\n                </span>\n            </a>\n        "),l+="\n        ",s.contextOrFrameLookup(e,o,"action_url_2")&&(l+='\n            <a href="',l+=s.suppressValue(s.contextOrFrameLookup(e,o,"action_url_2"),t.opts.autoescape),l+='" target="_blank" class="rounded-button button-action">\n                <span class="rounded-button-inner">\n                    ',l+="\n                    ",l+=s.suppressValue(t.getExtension("translation").run(e,"Contact Project Admins"),t.opts.autoescape),l+="\n                </span>\n            </a>\n        "),l+='\n    </div>\n    \n    <div class="no-input">\n        <div class="now-following-message message-success extra-space-top" style="display: none;">\n            <i class="fas fa-bell"></i>\n            ',l+="\n            ",l+=s.suppressValue(t.getExtension("translation").run(e,"You will now receive notifications for content posted in this project."),t.opts.autoescape),l+="\n            ",l+="\n            ",l+=s.suppressValue(t.getExtension("translation").run(e,"If you do not want notifications, click the unfollow button!"),t.opts.autoescape),l+='\n        </div>\n         \n        <div class="like-button-error message-error extra-space-top" style="display: none;">\n            ',l+="\n            ",l+=s.suppressValue(t.getExtension("translation").run(e,"Could not save your like setting because of an error."),t.opts.autoescape),l+='\n        </div>\n        <div class="follow-button-error message-error extra-space-top" style="display: none;">\n            ',l+="\n            ",l+=s.suppressValue(t.getExtension("translation").run(e,"Could not save your follow setting because of an error."),t.opts.autoescape),l+="\n        </div>\n    </div>\n",void a(null,l))})}catch(t){a(s.handleError(t,r,i))}}return{b_additional_top_line:e,b_action_buttons:n,root:t}}()}(),t.exports=r(s,o,s.nunjucksPrecompiled["cosinnus/templates/cosinnus/universal/tiles/tile-detail-projects.html"],a)},function(t,e,n){var o,s=n(8);o=s.currentEnv?s.currentEnv:s.currentEnv=new s.Environment([],void 0);var a=(n(9)(o),s.webpackDependencies||(s.webpackDependencies={}));a["tiles/tile-detail-base"]=n(40),a["include/macros.html"]=n(23);var r=n(10);!function(){(s.nunjucksPrecompiled=s.nunjucksPrecompiled||{})["cosinnus/templates/cosinnus/universal/tiles/tile-detail-base-group.html"]=function(){function t(t,e,n,o,s){var a=null,r=null,i="";try{var l=null;t.getTemplate("tiles/tile-detail-base",!0,"cosinnus/templates/cosinnus/universal/tiles/tile-detail-base-group.html",!1,function(a,r){if(a)return void s(a);l=r;for(var u in l.blocks)e.addBlock(u,l.blocks[u]);i+="\n",t.getTemplate("include/macros.html",!1,"cosinnus/templates/cosinnus/universal/tiles/tile-detail-base-group.html",!1,function(a,r){return a?void s(a):void r.getExported(function(a,r){return a?void s(a):(e.setVariable("macros",r),i+="\n\n\n",void(l?function(t,e,n,o,s){s("")}:e.getBlock("related_content"))(t,e,n,o,function(a,r){return a?void s(a):(i+=r,i+="\n\n",void(l?function(t,e,n,o,s){s("")}:e.getBlock("action_buttons"))(t,e,n,o,function(a,r){return a?void s(a):(i+=r,i+="\n\n\n",void(l?function(t,e,n,o,s){s("")}:e.getBlock("contact"))(t,e,n,o,function(a,r){return a?void s(a):(i+=r,i+="\n",void(l?l.rootRenderFunc(t,e,n,o,s):s(null,i)))}))}))}))})})})}catch(t){s(o.handleError(t,a,r))}}function e(t,e,n,o,s){var a=null,r=null,i="";try{i+="\n    \n    ",e.getBlock("group_events")(t,e,n,o,function(l,u){if(l)return void s(l);if(i+=u,i+="\n\n    ",t.getFilter("length").call(e,o.contextOrFrameLookup(e,n,"organizations"))>0){i+='\n        <div class="tile-section tile-section-divided">\n            <div class="subheading">\n                <i class="fa fa-building"></i>\n                ',t.getFilter("length").call(e,o.contextOrFrameLookup(e,n,"organizations"))>1?(i+="\n                \t",i+="\n\t                ",i+=o.suppressValue(t.getExtension("translation").run(e,"Organizations"),t.opts.autoescape),i+="\n                "):(i+="\n\t                ",i+="\n\t                ",i+=o.suppressValue(t.getExtension("translation").run(e,"Organization"),t.opts.autoescape),i+="\n\t            "),i+='\n            </div>\n        </div>\n        <div class="tile-section">\n            <div class="row">\n                ',n=n.push();var c=o.contextOrFrameLookup(e,n,"organizations");if(c)for(var p=c.length,d=0;d<c.length;d++){var m=c[d];n.set("organization",m),n.set("loop.index",d+1),n.set("loop.index0",d),n.set("loop.revindex",p-d),n.set("loop.revindex0",p-d-1),n.set("loop.first",0===d),n.set("loop.last",d===p-1),n.set("loop.length",p),i+='\n                    <div class="col-sm-6">\n                        ',i+=o.suppressValue((a=40,r=40,o.callWrap(o.memberLookup(o.contextOrFrameLookup(e,n,"macros"),"itemCard"),'macros["itemCard"]',e,[o.memberLookup(m,"portal"),o.memberLookup(m,"slug"),o.memberLookup(m,"title"),o.memberLookup(m,"type"),o.memberLookup(m,"iconImageUrl"),o.memberLookup(m,"location"),"fa-map-marker"])),t.opts.autoescape),i+="\n                    </div>\n                "}n=n.pop(),i+="\n            </div>\n        </div>\n    "}i+="\n    \n",s(null,i)})}catch(t){s(o.handleError(t,a,r))}}function n(t,e,n,o,s){var a=null,r=null,i="";try{if(i+="\n\t    ",t.getFilter("length").call(e,o.contextOrFrameLookup(e,n,"events"))>0){i+='\n\t        <div class="tile-section tile-section-divided">\n\t            <div class="subheading">\n\t                <i class="fa fa-calendar"></i>\n\t                ',i+="\n\t                ",i+=o.suppressValue(t.getExtension("translation").run(e,"Events"),t.opts.autoescape),i+=" (",i+=o.suppressValue(t.getFilter("length").call(e,o.contextOrFrameLookup(e,n,"events")),t.opts.autoescape),i+=')\n\t            </div>\n\t        </div>\n\t        <div class="tile-section">\n\t            ',n=n.push();var l=o.contextOrFrameLookup(e,n,"events");if(l)for(var u=l.length,c=0;c<l.length;c++){var p=l[c];n.set("event",p),n.set("loop.index",c+1),n.set("loop.index0",c),n.set("loop.revindex",u-c),n.set("loop.revindex0",u-c-1),n.set("loop.first",0===c),n.set("loop.last",c===u-1),n.set("loop.length",u),i+="\n\t                ",i+=o.suppressValue((a=17,r=33,o.callWrap(o.memberLookup(o.contextOrFrameLookup(e,n,"macros"),"itemCard"),'macros["itemCard"]',e,[o.memberLookup(p,"portal"),o.memberLookup(p,"slug"),o.memberLookup(p,"title"),o.memberLookup(p,"type"),o.contextOrFrameLookup(e,n,"null"),t.getFilter("safe").call(e,o.memberLookup(p,"dataSlot1")),"fa-clock-o",o.memberLookup(p,"address"),"fa-map-marker",o.makeKeywordArgs({cosinnus_active_user:o.contextOrFrameLookup(e,n,"cosinnus_active_user"),group_slug:o.contextOrFrameLookup(e,n,"slug")})])),t.opts.autoescape),i+="\n\t            "}n=n.pop(),i+="\n\t        </div>\n\t    "}i+="\n    ",s(null,i)}catch(t){s(o.handleError(t,a,r))}}function o(t,e,n,o,s){var a=null,r=null,i="";try{i+="\n    ",o.memberLookup(o.memberLookup(o.contextOrFrameLookup(e,n,"controlView"),"portalInfo"),"current")==o.contextOrFrameLookup(e,n,"portal")&&(i+='\n        <a class="rounded-button button-action\n                ',i+=o.contextOrFrameLookup(e,n,"cosinnus_active_user")?'button-follow" ':'" href="/signup/?acc_req_msg=1&next=/map/" target="_blank"',i+='>\n            <span class="rounded-button-inner">\n                ',o.contextOrFrameLookup(e,n,"followed")?(i+='\n                    <i clasS="fas fa-bell"></i>\n                    ',i+="\n                    ",i+=o.suppressValue(t.getExtension("translation").run(e,"Following"),t.opts.autoescape),i+="\n                "):(i+='\n                    <i clasS="far fa-bell"></i>\n                    ',i+="\n                    ",i+=o.suppressValue(t.getExtension("translation").run(e,"Follow"),t.opts.autoescape),i+="\n                "),i+='\n            </span>\n        </a>\n\n        <a class="rounded-button button-action ',i+=o.contextOrFrameLookup(e,n,"cosinnus_active_user")?" button-star ":'" href="/signup/?acc_req_msg=1&next=/map/" target="_blank"',i+='">\n            <span class="rounded-button-inner">\n                ',o.contextOrFrameLookup(e,n,"starred")?(i+='\n                    <i class="fas fa-star"></i>\n                    ',i+=o.suppressValue(o.contextOrFrameLookup(e,n,"starringLabel"),t.opts.autoescape),i+="\n                "):(i+='\n                    <i class="far fa-star"></i>\n                    ',i+=o.suppressValue(o.contextOrFrameLookup(e,n,"starLabel"),t.opts.autoescape),i+="\n                "),i+="\n            </span>\n        </a>\n    "),i+="\n",s(null,i)}catch(t){s(o.handleError(t,a,r))}}function s(t,e,n,o,s){var a=null,r=null,i="";try{if(i+='\n\n    <div class="tile-section tile-section-divided">\n        <div class="row">\n            <div class="col-xs-6">\n                <div class="subheading">\n                    ',i+="\n                    ",i+=o.suppressValue(t.getExtension("translation").run(e,"Contact"),t.opts.autoescape),i+="\n                </div>\n                ",o.contextOrFrameLookup(e,n,"youtube_url")||o.contextOrFrameLookup(e,n,"twitter_username")||o.contextOrFrameLookup(e,n,"flickr_url")||o.contextOrFrameLookup(e,n,"website_url")||o.contextOrFrameLookup(e,n,"contact")?(i+="\n                    ",o.contextOrFrameLookup(e,n,"contact")&&(i+='\n                        <div class="tile-section">\n                            ',i+=o.suppressValue(t.getFilter("safe").call(e,o.contextOrFrameLookup(e,n,"contact")),t.opts.autoescape),i+="\n                        </div>\n                    "),i+="\n                    ",o.contextOrFrameLookup(e,n,"website_url")&&(i+='\n                        <div class="tile-section tile-section-compact">\n                            <a href="',i+=o.suppressValue(o.contextOrFrameLookup(e,n,"website_url"),t.opts.autoescape),i+='" target="_blank" class="compact-link">\n                                <i class="fa fa-globe"></i>',i+=o.suppressValue(o.contextOrFrameLookup(e,n,"website_url"),t.opts.autoescape),i+="\n                            </a>\n                        </div>\n                    "),i+="\n                    \n                    ",(o.contextOrFrameLookup(e,n,"youtube_url")||o.contextOrFrameLookup(e,n,"twitter_username")||o.contextOrFrameLookup(e,n,"flickr_url"))&&(i+='\n                        <div class="tile-section tile-section-compact">\n                        ',o.contextOrFrameLookup(e,n,"youtube_url")&&(i+='\n                            <div class="tile-section-header">\n                                <a href="',i+=o.suppressValue(o.contextOrFrameLookup(e,n,"website_url"),t.opts.autoescape),i+='" target="_blank" class="compact-link">\n                                    <i class="fa fa-youtube"></i>Youtube\n                                </a>\n                            </div>\n                        '),i+="\n                        ",o.contextOrFrameLookup(e,n,"twitter_username")&&(i+='\n                            <div class="tile-section-header">\n                                <a href="',i+=o.suppressValue(o.contextOrFrameLookup(e,n,"website_url"),t.opts.autoescape),
i+='" target="_blank" class="compact-link">\n                                    <i class="fa fa-twitter"></i>Twitter\n                                </a>\n                            </div>\n                        '),i+="\n                        ",o.contextOrFrameLookup(e,n,"flickr_url")&&(i+='\n                            <div class="tile-section-header">\n                                <a href="',i+=o.suppressValue(o.contextOrFrameLookup(e,n,"flickr_url"),t.opts.autoescape),i+='" target="_blank" class="compact-link">\n                                   <i class="fa fa-flickr"></i>Flickr\n                                </a>\n                            </div>\n                        '),i+="\n                        </div>\n                    "),i+="\n                "):(i+='\n                    <p class="pale-color">\n                        <i>\n                            ',i+="\n                            ",i+=o.suppressValue(t.getExtension("translation").run(e,"No info."),t.opts.autoescape),i+="\n                        </i>\n                    </p>\n                "),i+='\n                \n            </div>\n            <div class="col-xs-6">\n                <div class="subheading">\n                    ',t.getFilter("length").call(e,o.contextOrFrameLookup(e,n,"admins"))>1?(i+=" \n                        ",i+="\n                        ",i+=o.suppressValue(t.getExtension("translation").run(e,"Administrator"),t.opts.autoescape),i+="\n                    "):(i+="\n                        ",i+="\n                        ",i+=o.suppressValue(t.getExtension("translation").run(e,"Administrators"),t.opts.autoescape),i+="\n                    "),i+='\n                </div>\n                <div class="tile-section">\n                    ',t.getFilter("length").call(e,o.contextOrFrameLookup(e,n,"admins"))>0){i+="\n                        ",n=n.push();var l=o.contextOrFrameLookup(e,n,"admins");if(l)for(var u=l.length,c=0;c<l.length;c++){var p=l[c];n.set("admin",p),n.set("loop.index",c+1),n.set("loop.index0",c),n.set("loop.revindex",u-c),n.set("loop.revindex0",u-c-1),n.set("loop.first",0===c),n.set("loop.last",c===u-1),n.set("loop.length",u),i+="\n                            ",i+=o.suppressValue((a=152,r=44,o.callWrap(o.memberLookup(o.contextOrFrameLookup(e,n,"macros"),"itemCard"),'macros["itemCard"]',e,[o.memberLookup(p,"portal"),o.memberLookup(p,"slug"),o.memberLookup(p,"title"),o.memberLookup(p,"type"),o.memberLookup(p,"iconImageUrl"),o.memberLookup(p,"address"),"fa-map-marker",o.makeKeywordArgs({cosinnus_active_user:o.contextOrFrameLookup(e,n,"cosinnus_active_user")})])),t.opts.autoescape),i+="\n                        "}n=n.pop(),i+="\n                    "}else i+="\n                        ",i+="\n                        </i>",i+=o.suppressValue(t.getExtension("translation").run(e,"Administrators unknown"),t.opts.autoescape),i+="</i>\n                    ";i+="\n                </div>\n            </div>\n        </div>\n    \n    </div>\n    \n    \n",s(null,i)}catch(t){s(o.handleError(t,a,r))}}return{b_related_content:e,b_group_events:n,b_action_buttons:o,b_contact:s,root:t}}()}(),t.exports=r(s,o,s.nunjucksPrecompiled["cosinnus/templates/cosinnus/universal/tiles/tile-detail-base-group.html"],a)},function(t,e,n){var o,s=n(8);o=s.currentEnv?s.currentEnv:s.currentEnv=new s.Environment([],void 0);var a=(n(9)(o),s.webpackDependencies||(s.webpackDependencies={}));a["include/macros.html"]=n(23);var r=n(10);!function(){(s.nunjucksPrecompiled=s.nunjucksPrecompiled||{})["cosinnus/templates/cosinnus/universal/tiles/tile-detail-base.html"]=function(){function t(t,e,n,o,s){var a=null,r=null,i="";try{var l=null;t.getTemplate("include/macros.html",!1,"cosinnus/templates/cosinnus/universal/tiles/tile-detail-base.html",!1,function(a,r){return a?void s(a):void r.getExported(function(a,r){return a?void s(a):(e.setVariable("macros",r),i+='\n\n<div class="tile-detail tile-',i+=o.suppressValue(o.contextOrFrameLookup(e,n,"type"),t.opts.autoescape),i+=" ",o.contextOrFrameLookup(e,n,"selected")&&(i+="selected"),i+=' mobile-view mobile-view-detail-visible-block" ',o.contextOrFrameLookup(e,n,"noModel")&&(i+='style="display: none;"'),i+='>\n    <div class="tile-close-button">\n        <i class="fa fa-fw fa-close"></i>\n    </div>\n    \n    ',void(l?function(t,e,n,o,s){s("")}:e.getBlock("content"))(t,e,n,o,function(a,r){return a?void s(a):(i+=r,i+="\n    \n    ",i+='\n    <div class="spacer mobile-only">&nbsp;</div>\n    <div class="spacer mobile-only">&nbsp;</div>\n    <div class="spacer mobile-only">&nbsp;</div>\n</div>\n',void(l?l.rootRenderFunc(t,e,n,o,s):s(null,i)))}))})})}catch(t){s(o.handleError(t,a,r))}}function e(t,e,n,o,s){var a=null,r=null,i="";try{i+="\n    \n        ",e.getBlock("type_area")(t,e,n,o,function(a,r){return a?void s(a):(i+=r,i+="\n        \n        ",void e.getBlock("header_image")(t,e,n,o,function(a,r){return a?void s(a):(i+=r,i+="\n        \n        \n        ",void e.getBlock("title")(t,e,n,o,function(a,r){return a?void s(a):(i+=r,i+="\n        \n        ",void e.getBlock("top_line")(t,e,n,o,function(a,r){return a?void s(a):(i+=r,i+="\n        \n        \n        ",void e.getBlock("additional_top_line")(t,e,n,o,function(a,r){return a?void s(a):(i+=r,i+="\n        \n        \n        ",void e.getBlock("topic_line")(t,e,n,o,function(a,r){return a?void s(a):(i+=r,i+="\n\n        ",void e.getBlock("text_topic_line")(t,e,n,o,function(a,r){return a?void s(a):(i+=r,i+="\n        \n        ",void e.getBlock("managed_tags")(t,e,n,o,function(a,r){return a?void s(a):(i+=r,i+="\n        \n        \n        ",void e.getBlock("action_buttons")(t,e,n,o,function(a,r){return a?void s(a):(i+=r,i+="\n        \n        \n        ",void e.getBlock("description")(t,e,n,o,function(a,r){return a?void s(a):(i+=r,i+="\n\n\n        ",void e.getBlock("sdgs")(t,e,n,o,function(a,r){return a?void s(a):(i+=r,i+="\n        \n        ",void e.getBlock("related_content")(t,e,n,o,function(a,r){return a?void s(a):(i+=r,i+="\n        \n        \n        ",void e.getBlock("contact")(t,e,n,o,function(a,r){return a?void s(a):(i+=r,i+="\n        \n        ",void e.getBlock("report_object")(t,e,n,o,function(a,r){return a?void s(a):(i+=r,i+="\n        \n        ",void e.getBlock("create_modified_timestamps")(t,e,n,o,function(t,e){return t?void s(t):(i+=e,i+="\n\n    ",void s(null,i))}))}))}))}))}))}))}))}))}))}))}))}))}))}))})}catch(t){s(o.handleError(t,a,r))}}function n(t,e,n,o,s){var a=null,r=null,i="";try{i+='\n            <div class="tile-section-header one-line">\n                ',i+=o.suppressValue((a=11,r=33,o.callWrap(o.memberLookup(o.contextOrFrameLookup(e,n,"macros"),"typeLabel"),'macros["typeLabel"]',e,[o.contextOrFrameLookup(e,n,"type"),o.makeKeywordArgs({singular:1,COSINNUS_TRANS:o.contextOrFrameLookup(e,n,"COSINNUS_TRANS")})])),t.opts.autoescape),i+="\n                ",o.contextOrFrameLookup(e,n,"portal")==o.contextOrFrameLookup(e,n,"COSINNUS_EXCHANGE_PORTAL_ID")&&(i+="\n                \t",i+="\n\t                ",i+=o.suppressValue(t.getExtension("translation").run(e,"from"),t.opts.autoescape),i+=": ",i+=o.suppressValue(o.contextOrFrameLookup(e,n,"source"),t.opts.autoescape),i+="\n                "),i+="\n                \n                ",o.contextOrFrameLookup(e,n,"isSmall")||o.memberLookup(o.memberLookup(o.contextOrFrameLookup(e,n,"controlView"),"portalInfo"),"current")==o.contextOrFrameLookup(e,n,"portal")||(i+='\n                    <span class="inline-spacer"></span>\n                    <a class="portal-inlink uncolored-link" href="',i+=o.suppressValue(o.memberLookup(o.memberLookup(o.memberLookup(o.contextOrFrameLookup(e,n,"controlView"),"portalInfo"),o.contextOrFrameLookup(e,n,"portal")),"domain"),t.opts.autoescape),i+='" target="_blank" title="',i+=o.suppressValue(o.memberLookup(o.memberLookup(o.memberLookup(o.contextOrFrameLookup(e,n,"controlView"),"portalInfo"),o.contextOrFrameLookup(e,n,"portal")),"name"),t.opts.autoescape),i+='">\n                        ',i+="\n                        ",i+=o.suppressValue(o.memberLookup(o.memberLookup(o.memberLookup(o.contextOrFrameLookup(e,n,"controlView"),"portalInfo"),o.contextOrFrameLookup(e,n,"portal")),"name"),t.opts.autoescape),i+="\n                    </a> \n                "),i+="\n            </div>\n        ",s(null,i)}catch(t){s(o.handleError(t,a,r))}}function o(t,e,n,o,s){var a=null,r=null,i="";try{i+='\n            <div class="tile-section header-image">\n                <div class="dual-tile-image ',o.contextOrFrameLookup(e,n,"backgroundImageLargeUrl")||(i+="image-placeholder-background image-placeholder-background-",i+=o.suppressValue(o.contextOrFrameLookup(e,n,"type"),t.opts.autoescape)),i+='">\n                    ',o.contextOrFrameLookup(e,n,"backgroundImageLargeUrl")&&(i+='\n                        <img class="tile-image tile-image-background" src="',i+=o.suppressValue(o.contextOrFrameLookup(e,n,"backgroundImageLargeUrl"),t.opts.autoescape),i+='" /> \n                    '),i+='\n                    <img class="floating-tile-image" src="',i+=o.suppressValue(o.contextOrFrameLookup(e,n,"iconImageUrl"),t.opts.autoescape),i+='" />\n                </div>\n            </div>\n        ',s(null,i)}catch(t){s(o.handleError(t,a,r))}}function s(t,e,n,o,s){var a=null,r=null,i="";try{i+='\n            <div class="tile-section title">\n                <a href="',"people"==o.contextOrFrameLookup(e,n,"type")&&(i+=o.suppressValue(o.memberLookup(o.memberLookup(o.memberLookup(o.contextOrFrameLookup(e,n,"controlView"),"portalInfo"),o.contextOrFrameLookup(e,n,"portal")),"domain"),t.opts.autoescape)),i+=o.suppressValue(o.contextOrFrameLookup(e,n,"url"),t.opts.autoescape),i+='" target="_blank" class="uncolored-link">\n                    <h1>\n                        ',i+=o.suppressValue(o.contextOrFrameLookup(e,n,"title"),t.opts.autoescape),i+="\n                        ",o.contextOrFrameLookup(e,n,"isYou")&&(i+='\n\t\t\t\t    \t\t<i class="pale-color">\n\t\t\t\t                ',i+="\n\t\t\t\t                (",i+=o.suppressValue(t.getExtension("translation").run(e,"You"),t.opts.autoescape),i+=")\n\t\t\t\t\t\t\t</i>\n\t\t\t\t\t\t"),i+='\n                        <i class="fa fa-external-link"></i>\n                    </h1>\n                </a>\n            </div>\n        ',s(null,i)}catch(t){s(o.handleError(t,a,r))}}function a(t,e,n,o,s){var a=null,r=null,i="";try{i+="\n            ",(o.contextOrFrameLookup(e,n,"address")||o.contextOrFrameLookup(e,n,"group_slug")&&o.contextOrFrameLookup(e,n,"group_name")&&o.contextOrFrameLookup(e,n,"portal"))&&(i+='\n                <div class="tile-section top-line one-line ',i+=o.contextOrFrameLookup(e,n,"isSmall")?"no-space":"extra-space",i+='">\n                    ',e.getBlock("top_line_group")(t,e,n,o,function(a,r){return a?void s(a):(i+=r,i+="\n                    \n                    ",void e.getBlock("top_line_address")(t,e,n,o,function(t,e){return t?void s(t):(i+=e,void(i+="\n                </div>\n            "))}))})),i+="\n        ",s(null,i)}catch(t){s(o.handleError(t,a,r))}}function r(t,e,n,o,s){var a=null,r=null,i="";try{i+="\n                        ",o.contextOrFrameLookup(e,n,"group_slug")&&o.contextOrFrameLookup(e,n,"group_name")&&o.contextOrFrameLookup(e,n,"portal")&&(i+='\n                            <span class="pale-color">\n                                ',"projects"==o.contextOrFrameLookup(e,n,"type")?(i+="\n                                    ",i+=o.suppressValue((a=63,r=53,o.callWrap(o.memberLookup(o.contextOrFrameLookup(e,n,"macros"),"typeLabel"),'macros["typeLabel"]',e,["groups",o.makeKeywordArgs({singular:1,useStyles:0,colon:1,showIcon:0,COSINNUS_TRANS:o.contextOrFrameLookup(e,n,"COSINNUS_TRANS")})])),t.opts.autoescape),i+="\n                                    ",i+=o.suppressValue((a=64,r=54,o.callWrap(o.memberLookup(o.contextOrFrameLookup(e,n,"macros"),"resultLink"),'macros["resultLink"]',e,[o.contextOrFrameLookup(e,n,"portal"),o.contextOrFrameLookup(e,n,"group_slug"),o.contextOrFrameLookup(e,n,"group_name"),"groups"])),t.opts.autoescape),i+="\n                                "):(i+="\n                                    ",i+=o.suppressValue((a=66,r=53,o.callWrap(o.memberLookup(o.contextOrFrameLookup(e,n,"macros"),"typeLabel"),'macros["typeLabel"]',e,["projects",o.makeKeywordArgs({singular:1,useStyles:0,colon:1,showIcon:0,COSINNUS_TRANS:o.contextOrFrameLookup(e,n,"COSINNUS_TRANS")})])),t.opts.autoescape),i+="\n                                    ",i+=o.suppressValue((a=67,r=54,o.callWrap(o.memberLookup(o.contextOrFrameLookup(e,n,"macros"),"resultLink"),'macros["resultLink"]',e,[o.contextOrFrameLookup(e,n,"portal"),o.contextOrFrameLookup(e,n,"group_slug"),o.contextOrFrameLookup(e,n,"group_name"),"projects"])),t.opts.autoescape),i+="\n                                "),i+='\n                            </span>\n                            <span class="inline-spacer"></span>\n                        '),i+="\n                    ",s(null,i)}catch(t){s(o.handleError(t,a,r))}}function i(t,e,n,o,s){var a=null,r=null,i="";try{i+="\n                        ",o.contextOrFrameLookup(e,n,"address")&&"events"!=o.contextOrFrameLookup(e,n,"type")&&(i+='\n                            <span class="address capitalize">\n                                <i class="fa fa-map-marker"></i>\n                                ',i+=o.suppressValue(o.contextOrFrameLookup(e,n,"address"),t.opts.autoescape),i+="\n                            </span>\n                        "),i+="\n                    ",s(null,i)}catch(t){s(o.handleError(t,a,r))}}function l(t,e,n,o,s){var a=null,r=null,i="";try{i+="\n        ",s(null,i)}catch(t){s(o.handleError(t,a,r))}}function u(t,e,n,o,s){var a=null,r=null,i="";try{if(i+="\n            ",t.getFilter("length").call(e,o.contextOrFrameLookup(e,n,"topics"))>0){i+='\n                <div class="tile-section topic-line">\n                    <span class="pale-color">\n                        ',i+="\n                        ",i+=o.suppressValue(t.getExtension("translation").run(e,"Topics"),t.opts.autoescape),i+=":\n                    </span> \n                    ",n=n.push();var l=o.contextOrFrameLookup(e,n,"topics");if(l)for(var u=l.length,c=0;c<l.length;c++){var p=l[c];n.set("topic",p),n.set("loop.index",c+1),n.set("loop.index0",c),n.set("loop.revindex",u-c),n.set("loop.revindex0",u-c-1),n.set("loop.first",0===c),n.set("loop.last",c===u-1),n.set("loop.length",u),i+='\n                        <a class="topic-filter-link" data-topic-id="',i+=o.suppressValue(p,t.opts.autoescape),i+='">',i+=o.suppressValue(o.memberLookup(o.memberLookup(o.contextOrFrameLookup(e,n,"controlView"),"allTopics"),p),t.opts.autoescape),i+="</a>",o.memberLookup(o.contextOrFrameLookup(e,n,"loop"),"last")||(i+=","),i+="\n                    "}n=n.pop(),i+="\n                </div>\n            "}i+="\n        ",s(null,i)}catch(t){s(o.handleError(t,a,r))}}function c(t,e,n,o,s){var a=null,r=null,i="";try{if(i+="\n            ",t.getFilter("length").call(e,o.contextOrFrameLookup(e,n,"text_topics"))>0){i+='\n                <div class="tile-section topic-line">\n                    <span class="pale-color">\n                        ',i+="\n                        ",i+=o.suppressValue(t.getExtension("translation").run(e,"Categories"),t.opts.autoescape),i+=":\n                    </span>\n                    ",n=n.push();var l=o.contextOrFrameLookup(e,n,"text_topics");if(l)for(var u=l.length,c=0;c<l.length;c++){var p=l[c];n.set("text_topic",p),n.set("loop.index",c+1),n.set("loop.index0",c),n.set("loop.revindex",u-c),n.set("loop.revindex0",u-c-1),n.set("loop.first",0===c),n.set("loop.last",c===u-1),n.set("loop.length",u),i+='\n                        <a class="text-topic-filter-link" data-text-topic-id="',i+=o.suppressValue(p,t.opts.autoescape),i+='">',i+=o.suppressValue(o.memberLookup(o.memberLookup(o.contextOrFrameLookup(e,n,"controlView"),"allTextTopics"),p),t.opts.autoescape),i+="</a>",o.memberLookup(o.contextOrFrameLookup(e,n,"loop"),"last")||(i+=","),i+="\n                    "}n=n.pop(),i+="\n                </div>\n            "}i+="\n        ",s(null,i)}catch(t){s(o.handleError(t,a,r))}}function p(t,e,n,o,s){var a=null,r=null,i="";try{if(i+="\n            ",t.getFilter("length").call(e,o.contextOrFrameLookup(e,n,"managed_tags"))>0&&t.getFilter("length").call(e,o.memberLookup(o.contextOrFrameLookup(e,n,"controlView"),"allManagedTags"))>0){i+='\n                <div class="tile-section topic-line">\n                    <span class="pale-color">\n                        ',i+=o.suppressValue(o.memberLookup(o.memberLookup(o.contextOrFrameLookup(e,n,"controlView"),"managedTagsLabels"),"MANAGED_TAG_MAP_LABEL"),t.opts.autoescape),i+=":\n                    </span> \n                    ",n=n.push();var l=o.contextOrFrameLookup(e,n,"managed_tags");if(l)for(var u=l.length,c=0;c<l.length;c++){var p=l[c];n.set("managed_tag_id",p),n.set("loop.index",c+1),n.set("loop.index0",c),n.set("loop.revindex",u-c),n.set("loop.revindex0",u-c-1),n.set("loop.first",0===c),n.set("loop.last",c===u-1),n.set("loop.length",u),i+="\n                        ";var d;d=o.contextOrFrameLookup(e,n,"loop"),n.set("outer_loop",d,!0),n.topLevel&&e.setVariable("outer_loop",d),n.topLevel&&e.addExport("outer_loop",d),i+="\n\t\t                ",n=n.push();var m=o.memberLookup(o.contextOrFrameLookup(e,n,"controlView"),"allManagedTags");if(m)for(var f=m.length,h=0;h<m.length;h++){var v=m[h];n.set("managed_tag",v),n.set("loop.index",h+1),n.set("loop.index0",h),n.set("loop.revindex",f-h),n.set("loop.revindex0",f-h-1),n.set("loop.first",0===h),n.set("loop.last",h===f-1),n.set("loop.length",f),i+="\n\t\t                    ",p==o.memberLookup(v,"id")&&(i+='\n\t\t                        <a class="managed-tag-filter-link" data-managed-tag-id="',i+=o.suppressValue(p,t.opts.autoescape),i+='">\n\t\t                          ',i+=o.suppressValue(o.memberLookup(v,"name"),t.opts.autoescape),i+="</a>\n\t\t                          ",o.memberLookup(v,"url")&&(i+='\n\t\t                            <a target="_blank" href="',i+=o.suppressValue(o.memberLookup(v,"url"),t.opts.autoescape),i+='">\n\t\t\t\t                        (<i class="fa fa-external-link"></i>\n\t\t\t\t                        ',i+="\n\t\t\t\t                        ",i+=o.suppressValue(t.getExtension("translation").run(e,"website"),t.opts.autoescape),i+=")\n\t\t                            </a>"),o.memberLookup(o.contextOrFrameLookup(e,n,"outer_loop"),"last")||(i+=","),i+="\n\t\t                    "),i+="\n\t\t                "}n=n.pop(),i+="\n\t\t            "}n=n.pop(),i+="\n                </div>\n            "}i+="\n        ",s(null,i)}catch(t){s(o.handleError(t,a,r))}}function d(t,e,n,o,s){var a=null,r=null,i="";try{i+="\n        ",s(null,i)}catch(t){s(o.handleError(t,a,r))}}function m(t,e,n,o,s){var a=null,r=null,i="";try{i+='\n            <div class="tile-section description extra-space-top">\n                ',o.contextOrFrameLookup(e,n,"description")?(i+="\n                    ",i+=o.suppressValue(t.getFilter("safe").call(e,o.contextOrFrameLookup(e,n,"description")),t.opts.autoescape),i+="\n                    <!--\n                    <br/>\n                    (( TODO: make me click-expandable ))\n                    -->\n                    \n                "):(i+='\n                    <p class="pale-color">\n                        <i>\n                            ',i+="\n                            ",i+=o.suppressValue(t.getExtension("translation").run(e,"No description yet."),t.opts.autoescape),i+="\n                        </i>\n                    </p>\n                "),i+="\n                \n            </div>\n        ",s(null,i)}catch(t){s(o.handleError(t,a,r))}}function f(t,e,n,o,s){var a=null,r=null,i="";try{if(i+="\n            ",t.getFilter("length").call(e,o.contextOrFrameLookup(e,n,"sdgs"))>0&&t.getFilter("length").call(e,o.memberLookup(o.contextOrFrameLookup(e,n,"controlView"),"allSDGS"))>0){i+="\n            <p>\n                <b>\n                ",i+="\n                ",i+=o.suppressValue(t.getExtension("translation").run(e,"Sustainable Development Goals"),t.opts.autoescape),i+="\n                </b>\n            </p>\n            <p>\n    \n            ",n=n.push();var l=o.contextOrFrameLookup(e,n,"sdgs");if(l)for(var u=l.length,c=0;c<l.length;c++){var p=l[c];n.set("sdg_id",p),n.set("loop.index",c+1),n.set("loop.index0",c),n.set("loop.revindex",u-c),n.set("loop.revindex0",u-c-1),n.set("loop.first",0===c),n.set("loop.last",c===u-1),n.set("loop.length",u),i+="\n                ",n=n.push();var d=o.memberLookup(o.contextOrFrameLookup(e,n,"controlView"),"allSDGS");if(d)for(var m=d.length,f=0;f<d.length;f++){var h=d[f];n.set("sdg",h),n.set("loop.index",f+1),n.set("loop.index0",f),n.set("loop.revindex",m-f),n.set("loop.revindex0",m-f-1),n.set("loop.first",0===f),n.set("loop.last",f===m-1),n.set("loop.length",m),i+="\n                    ",p==o.memberLookup(h,"id")&&(i+='\n                        <img class="sdg-icon" src="',i+=o.suppressValue(o.memberLookup(h,"icon"),t.opts.autoescape),i+='">\n                    '),i+="\n                "}n=n.pop(),i+="\n            "}n=n.pop(),i+="\n            </p>\n            "}i+="\n        ",s(null,i)}catch(t){s(o.handleError(t,a,r))}}function h(t,e,n,o,s){var a=null,r=null,i="";try{i+="\n        ",s(null,i)}catch(t){s(o.handleError(t,a,r))}}function v(t,e,n,o,s){var a=null,r=null,i="";try{i+="\n        ",s(null,i)}catch(t){s(o.handleError(t,a,r))}}function g(t,e,n,o,s){var a=null,r=null,i="";try{i+="\n            ",o.contextOrFrameLookup(e,n,"cosinnus_active_user")&&(i+='\n                <div class="spacer">&nbsp;</div>\n                <div class="spacer">&nbsp;</div>\n                <a class="pale-color button-report-object map-search-report-object">\n                    <i class="fa fa-warning"></i>\n',i+="\n",i+=o.suppressValue(t.getExtension("translation").run(e,"Report offensive content"),t.opts.autoescape),i+="\n                </a>\n                \n            "),i+="\n        ",s(null,i)}catch(t){s(o.handleError(t,a,r))}}function k(t,e,n,o,s){var a=null,r=null,i="";try{i+='\n            <p class="map-search-created-updated-timestamps">\n                ',i+="\n                <i>",i+=o.suppressValue(t.getExtension("translation").run(e,"Created on: "),t.opts.autoescape),i+="</i>",i+=o.suppressValue(o.contextOrFrameLookup(e,n,"created"),t.opts.autoescape),i+=" <br>\n                ",i+="\n                <i>",i+=o.suppressValue(t.getExtension("translation").run(e,"Last updated on: "),t.opts.autoescape),i+="</i>",i+=o.suppressValue(o.contextOrFrameLookup(e,n,"last_modified"),t.opts.autoescape),i+="\n            </p>\n        ",s(null,i)}catch(t){s(o.handleError(t,a,r))}}return{b_content:e,b_type_area:n,b_header_image:o,b_title:s,b_top_line:a,b_top_line_group:r,b_top_line_address:i,b_additional_top_line:l,b_topic_line:u,b_text_topic_line:c,b_managed_tags:p,b_action_buttons:d,b_description:m,b_sdgs:f,b_related_content:h,b_contact:v,b_report_object:g,b_create_modified_timestamps:k,root:t}}()}(),t.exports=r(s,o,s.nunjucksPrecompiled["cosinnus/templates/cosinnus/universal/tiles/tile-detail-base.html"],a)},function(t,e,n){var o,s=n(8);o=s.currentEnv?s.currentEnv:s.currentEnv=new s.Environment([],void 0);var a=(n(9)(o),s.webpackDependencies||(s.webpackDependencies={}));a["tiles/tile-detail-base-group"]=n(39),a["include/macros.html"]=n(23);var r=n(10);!function(){(s.nunjucksPrecompiled=s.nunjucksPrecompiled||{})["cosinnus/templates/cosinnus/universal/tiles/tile-detail-groups.html"]=function(){function t(t,e,n,o,s){var a=null,r=null,i="";try{var l=null;t.getTemplate("tiles/tile-detail-base-group",!0,"cosinnus/templates/cosinnus/universal/tiles/tile-detail-groups.html",!1,function(a,r){if(a)return void s(a);l=r;for(var u in l.blocks)e.addBlock(u,l.blocks[u]);i+="\n",t.getTemplate("include/macros.html",!1,"cosinnus/templates/cosinnus/universal/tiles/tile-detail-groups.html",!1,function(a,r){return a?void s(a):void r.getExported(function(a,r){return a?void s(a):(e.setVariable("macros",r),i+="\n\n",void(l?function(t,e,n,o,s){s("")}:e.getBlock("additional_top_line"))(t,e,n,o,function(a,r){return a?void s(a):(i+=r,i+="\n\n",void(l?function(t,e,n,o,s){s("")}:e.getBlock("action_buttons"))(t,e,n,o,function(a,r){return a?void s(a):(i+=r,i+="\n\n\n",void(l?function(t,e,n,o,s){s("")}:e.getBlock("related_content"))(t,e,n,o,function(a,r){return a?void s(a):(i+=r,i+="\n",void(l?l.rootRenderFunc(t,e,n,o,s):s(null,i)))}))}))}))})})})}catch(t){s(o.handleError(t,a,r))}}function e(t,e,n,o,s){var a=null,r=null,i="";try{i+="\n",i+=o.suppressValue(o.memberLookup(o.contextOrFrameLookup(e,n,"block"),"super"),t.opts.autoescape),i+="\n",o.contextOrFrameLookup(e,n,"is_open_for_cooperation")&&(i+='\n<div class="alert apply-bg-color-projects">\n    <i class="fa fa-puzzle-piece"></i>\n    ',i+="\n    <p>",i+=o.suppressValue(t.getExtension("translation").run(e,"This group is open for further partner organizations."),t.opts.autoescape),i+="</p>\n</div>\n"),i+="\n",s(null,i)}catch(t){s(o.handleError(t,a,r))}}function n(t,e,o,s,a){var r=null,i=null,l="";try{e.getSuper(t,"action_buttons",n,o,s,function(n,r){return n?void a(n):(r=s.markSafe(r),l+='\n    <div class="tile-section tile-section-button-list">\n        ',l+=s.suppressValue(r,t.opts.autoescape),l+="\n    \n        ",s.contextOrFrameLookup(e,o,"is_member")?(l+='\n            <a class="rounded-button button-action disabled">\n                <span class="rounded-button-inner">\n                    <i clasS="fa fa-check"></i>\n                    ',l+="\n                    ",l+=s.suppressValue(t.getExtension("translation").run(e,"You are a Member"),t.opts.autoescape),l+="\n                </span>\n            </a>\n        "):(l+='\n           <a href="',l+=s.suppressValue(s.contextOrFrameLookup(e,o,"action_url_1"),t.opts.autoescape),l+='" target="_blank" class="rounded-button button-action">\n                <span class="rounded-button-inner">\n                    ',s.contextOrFrameLookup(e,o,"is_invited")?(l+="\n                        ",l+="\n                        ",l+=s.suppressValue(t.getExtension("translation").run(e,"You are invited!"),t.opts.autoescape),l+="\n                    "):s.contextOrFrameLookup(e,o,"is_pending")?(l+="\n                        ",l+="\n                        ",l+=s.suppressValue(t.getExtension("translation").run(e,"Membership request pending..."),t.opts.autoescape),l+="\n                    "):(l+="\n                        ",l+="\n                        ",l+=s.suppressValue(t.getExtension("translation").run(e,"Join Group"),t.opts.autoescape),l+="\n                    "),l+="\n                </span>\n            </a>\n        "),l+="\n        ",s.contextOrFrameLookup(e,o,"action_url_2")&&(l+='\n            <a href="',l+=s.suppressValue(s.contextOrFrameLookup(e,o,"action_url_2"),t.opts.autoescape),l+='" target="_blank" class="rounded-button button-action">\n                <span class="rounded-button-inner">\n                    ',l+="\n                    ",l+=s.suppressValue(t.getExtension("translation").run(e,"Contact Group Admins"),t.opts.autoescape),l+="\n                </span>\n            </a>\n        "),l+='\n    </div>\n    \n    <div class="no-input">\n        <div class="now-following-message message-success extra-space-top" style="display: none;">\n            <i class="fas fa-bell"></i>\n            ',l+="\n            ",l+=s.suppressValue(t.getExtension("translation").run(e,"You will now receive notifications for content posted in this group."),t.opts.autoescape),l+="\n            ",l+="\n            ",l+=s.suppressValue(t.getExtension("translation").run(e,"If you do not want notifications, click the unfollow button!"),t.opts.autoescape),l+='\n        </div>\n         \n        <div class="like-button-error message-error extra-space-top" style="display: none;">\n            ',l+="\n            ",l+=s.suppressValue(t.getExtension("translation").run(e,"Could not save your like setting because of an error."),t.opts.autoescape),l+='\n        </div>\n        <div class="follow-button-error message-error extra-space-top" style="display: none;">\n            ',l+="\n            ",l+=s.suppressValue(t.getExtension("translation").run(e,"Could not save your follow setting because of an error."),t.opts.autoescape),l+="\n        </div>\n    </div>\n",void a(null,l))})}catch(t){a(s.handleError(t,r,i))}}function o(t,e,n,s,a){var r=null,i=null,l="";try{e.getSuper(t,"related_content",o,n,s,function(o,u){if(o)return void a(o);if(u=s.markSafe(u),l+="\n    ",l+=s.suppressValue(u,t.opts.autoescape),l+="\n\n    ",t.getFilter("length").call(e,s.contextOrFrameLookup(e,n,"projects"))>0){l+='\n        <div class="tile-section tile-section-divided">\n            <div class="subheading">\n                <i class="fa fa-group"></i>\n                ',l+="\n                ",l+=s.suppressValue(t.getExtension("translation").run(e,"Projects"),t.opts.autoescape),l+=" (",l+=s.suppressValue(t.getFilter("length").call(e,s.contextOrFrameLookup(e,n,"projects")),t.opts.autoescape),l+=')\n            </div>\n        </div>\n        <div class="tile-section">\n            <div class="row">\n                ',n=n.push();var c=s.contextOrFrameLookup(e,n,"projects");if(c)for(var p=c.length,d=0;d<c.length;d++){var m=c[d];n.set("project",m),n.set("loop.index",d+1),n.set("loop.index0",d),n.set("loop.revindex",p-d),n.set("loop.revindex0",p-d-1),n.set("loop.first",0===d),n.set("loop.last",d===p-1),n.set("loop.length",p),l+='\n                    <div class="col-sm-6">\n                        ',l+=s.suppressValue((r=88,i=40,s.callWrap(s.memberLookup(s.contextOrFrameLookup(e,n,"macros"),"itemCard"),'macros["itemCard"]',e,[s.memberLookup(m,"portal"),s.memberLookup(m,"slug"),s.memberLookup(m,"title"),s.memberLookup(m,"type"),s.memberLookup(m,"iconImageUrl"),s.memberLookup(m,"address"),"fa-map-marker",s.memberLookup(m,"dataSlot1"),"fa-group",s.makeKeywordArgs({cosinnus_active_user:s.contextOrFrameLookup(e,n,"cosinnus_active_user")})])),t.opts.autoescape),l+="\n                    </div>\n                "}n=n.pop(),l+="\n            </div>\n        </div>\n    "}l+="\n    \n",a(null,l)})}catch(t){a(s.handleError(t,r,i))}}return{b_additional_top_line:e,b_action_buttons:n,b_related_content:o,root:t}}()}(),t.exports=r(s,o,s.nunjucksPrecompiled["cosinnus/templates/cosinnus/universal/tiles/tile-detail-groups.html"],a)},function(t,e,n){var o,s=n(8);o=s.currentEnv?s.currentEnv:s.currentEnv=new s.Environment([],void 0);var a=(n(9)(o),s.webpackDependencies||(s.webpackDependencies={}));a["tiles/tile-detail-base-group"]=n(39),a["include/macros.html"]=n(23);var r=n(10);!function(){(s.nunjucksPrecompiled=s.nunjucksPrecompiled||{})["cosinnus/templates/cosinnus/universal/tiles/tile-detail-conferences.html"]=function(){function t(t,e,n,o,s){var a=null,r=null,i="";try{var l=null;t.getTemplate("tiles/tile-detail-base-group",!0,"cosinnus/templates/cosinnus/universal/tiles/tile-detail-conferences.html",!1,function(a,r){if(a)return void s(a);l=r;for(var u in l.blocks)e.addBlock(u,l.blocks[u]);i+="\n",t.getTemplate("include/macros.html",!1,"cosinnus/templates/cosinnus/universal/tiles/tile-detail-conferences.html",!1,function(a,r){return a?void s(a):void r.getExported(function(a,r){return a?void s(a):(e.setVariable("macros",r),i+="\n\n",void(l?function(t,e,n,o,s){s("")}:e.getBlock("additional_top_line"))(t,e,n,o,function(a,r){return a?void s(a):(i+=r,i+="\n\n",void(l?function(t,e,n,o,s){s("")}:e.getBlock("group_events"))(t,e,n,o,function(a,r){return a?void s(a):(i+=r,i+="\n\n",void(l?function(t,e,n,o,s){s("")}:e.getBlock("action_buttons"))(t,e,n,o,function(a,r){return a?void s(a):(i+=r,i+="\n\n",void(l?function(t,e,n,o,s){s("")}:e.getBlock("create_modified_timestamps"))(t,e,n,o,function(a,r){return a?void s(a):(i+=r,i+="\n",void(l?l.rootRenderFunc(t,e,n,o,s):s(null,i)))}))}))}))}))})})})}catch(t){s(o.handleError(t,a,r));
}}function e(t,e,n,o,s){var a=null,r=null,i="";try{i+='\n    <div class="tile-section tile-section">\n        <div>\n            <i class="fa fa-fw fa-clock-o"></i>',i+=o.suppressValue(t.getFilter("safe").call(e,o.contextOrFrameLookup(e,n,"time_html")),t.opts.autoescape),i+='\n        </div>\n    </div>\n    <div class="tile-section tile-section">\n        <div>\n            <i class="fa fa-user"></i>\n\t        ',i+="\n\t        ",i+=o.suppressValue(t.getExtension("translation").run(e,"Participants"),t.opts.autoescape),i+=": ",i+=o.suppressValue(o.contextOrFrameLookup(e,n,"participant_count"),t.opts.autoescape),i+="\n\t        ",o.contextOrFrameLookup(e,n,"participants_limit_count")&&(i+="\n\t            ",i+="\n                (",i+=o.suppressValue(t.getExtension("translation").run(e,"max."),t.opts.autoescape),i+=" ",i+=o.suppressValue(o.contextOrFrameLookup(e,n,"participants_limit_count"),t.opts.autoescape),i+=") \n\t        "),i+="\n        </div>\n    </div>\n",s(null,i)}catch(t){s(o.handleError(t,a,r))}}function n(t,e,n,o,s){var a=null,r=null,i="";try{if(i+="\n    ",t.getFilter("length").call(e,o.contextOrFrameLookup(e,n,"events"))>0){i+='\n        <div class="tile-section tile-section-divided">\n            <div class="subheading">\n                <i class="fa fa-calendar"></i>\n                ',i+="\n                ",i+=o.suppressValue(t.getExtension("translation").run(e,"Workshops"),t.opts.autoescape),i+=" (",i+=o.suppressValue(t.getFilter("length").call(e,o.contextOrFrameLookup(e,n,"events")),t.opts.autoescape),i+=')\n            </div>\n        </div>\n        <div class="tile-section">\n            ',n=n.push();var l=o.contextOrFrameLookup(e,n,"events");if(l)for(var u=l.length,c=0;c<l.length;c++){var p=l[c];n.set("event",p),n.set("loop.index",c+1),n.set("loop.index0",c),n.set("loop.revindex",u-c),n.set("loop.revindex0",u-c-1),n.set("loop.first",0===c),n.set("loop.last",c===u-1),n.set("loop.length",u),i+="\n                ",i+=o.suppressValue((a=33,r=32,o.callWrap(o.memberLookup(o.contextOrFrameLookup(e,n,"macros"),"itemCard"),'macros["itemCard"]',e,[o.memberLookup(p,"portal"),o.memberLookup(p,"slug"),o.memberLookup(p,"title"),o.memberLookup(p,"type"),o.contextOrFrameLookup(e,n,"null"),t.getFilter("safe").call(e,o.memberLookup(p,"dataSlot1")),"fa-clock-o",o.memberLookup(p,"address"),"fa-map-marker",o.makeKeywordArgs({cosinnus_active_user:o.contextOrFrameLookup(e,n,"cosinnus_active_user"),group_slug:o.contextOrFrameLookup(e,n,"slug")})])),t.opts.autoescape),i+="\n            "}n=n.pop(),i+="\n        </div>\n    "}i+="\n",s(null,i)}catch(t){s(o.handleError(t,a,r))}}function o(t,e,n,s,a){var r=null,i=null,l="";try{e.getSuper(t,"action_buttons",o,n,s,function(o,r){return o?void a(o):(r=s.markSafe(r),l+='\n    <div class="tile-section tile-section-button-list">\n        ',l+=s.suppressValue(r,t.opts.autoescape),l+="\n        \n        ",s.contextOrFrameLookup(e,n,"is_member")?(l+='\n            <a class="rounded-button button-action disabled">\n                <span class="rounded-button-inner">\n                    <i clasS="fa fa-check"></i>\n                    ',l+="\n                    ",l+=s.suppressValue(t.getExtension("translation").run(e,"You are participating"),t.opts.autoescape),l+="\n                </span>\n            </a>\n        "):(l+='\n           <a href="',l+=s.suppressValue(s.contextOrFrameLookup(e,n,"action_url_1"),t.opts.autoescape),l+='" target="_blank" class="rounded-button button-action">\n                <span class="rounded-button-inner">\n                    ',s.contextOrFrameLookup(e,n,"is_invited")?(l+="\n                        ",l+="\n                        ",l+=s.suppressValue(t.getExtension("translation").run(e,"You are invited!"),t.opts.autoescape),l+="\n                    "):s.contextOrFrameLookup(e,n,"is_pending")?(l+="\n                        ",l+="\n                        ",l+=s.suppressValue(t.getExtension("translation").run(e,"Participation request pending..."),t.opts.autoescape),l+="\n                    "):(l+="\n\t                    ",l+="\n\t                    ",l+=s.suppressValue(t.getExtension("translation").run(e,"Participate"),t.opts.autoescape),l+="\n                    "),l+="\n                </span>\n            </a>\n        "),l+="\n        ",s.contextOrFrameLookup(e,n,"action_url_2")&&(l+='\n            <a href="',l+=s.suppressValue(s.contextOrFrameLookup(e,n,"action_url_2"),t.opts.autoescape),l+='" target="_blank" class="rounded-button button-action">\n                <span class="rounded-button-inner">\n                    ',l+="\n                    ",l+=s.suppressValue(t.getExtension("translation").run(e,"Contact Conference Admins"),t.opts.autoescape),l+="\n                </span>\n            </a>\n        "),l+='\n    </div>\n    \n    <div class="no-input">\n        <div class="now-following-message message-success extra-space-top" style="display: none;">\n            <i class="fas fa-bell"></i>\n            ',l+="\n            ",l+=s.suppressValue(t.getExtension("translation").run(e,"You will now receive notifications for content posted."),t.opts.autoescape),l+="\n            ",l+="\n            ",l+=s.suppressValue(t.getExtension("translation").run(e,"If you do not want notifications, click the unfollow button!"),t.opts.autoescape),l+='\n        </div>\n         \n        <div class="like-button-error message-error extra-space-top" style="display: none;">\n            ',l+="\n            ",l+=s.suppressValue(t.getExtension("translation").run(e,"Could not save your like setting because of an error."),t.opts.autoescape),l+='\n        </div>\n        <div class="follow-button-error message-error extra-space-top" style="display: none;">\n            ',l+="\n            ",l+=s.suppressValue(t.getExtension("translation").run(e,"Could not save your follow setting because of an error."),t.opts.autoescape),l+="\n        </div>\n    </div>\n",void a(null,l))})}catch(t){a(s.handleError(t,r,i))}}function s(t,e,n,o,s){var a=null,r=null,i="";try{i+="\n    ",i+=o.suppressValue(o.contextOrFrameLookup(e,n,"created"),t.opts.autoescape),i+="\n    ",i+=o.suppressValue(o.contextOrFrameLookup(e,n,"last_modified"),t.opts.autoescape),i+="\n",s(null,i)}catch(t){s(o.handleError(t,a,r))}}return{b_additional_top_line:e,b_group_events:n,b_action_buttons:o,b_create_modified_timestamps:s,root:t}}()}(),t.exports=r(s,o,s.nunjucksPrecompiled["cosinnus/templates/cosinnus/universal/tiles/tile-detail-conferences.html"],a)},function(t,e,n){var o,s=n(8);o=s.currentEnv?s.currentEnv:s.currentEnv=new s.Environment([],void 0);var a=(n(9)(o),s.webpackDependencies||(s.webpackDependencies={}));a["tiles/tile-detail-base"]=n(40),a["include/macros.html"]=n(23);var r=n(10);!function(){(s.nunjucksPrecompiled=s.nunjucksPrecompiled||{})["cosinnus/templates/cosinnus/universal/tiles/tile-detail-people.html"]=function(){function t(t,e,n,o,s){var a=null,r=null,i="";try{var l=null;t.getTemplate("tiles/tile-detail-base",!0,"cosinnus/templates/cosinnus/universal/tiles/tile-detail-people.html",!1,function(a,r){if(a)return void s(a);l=r;for(var u in l.blocks)e.addBlock(u,l.blocks[u]);i+="\n",t.getTemplate("include/macros.html",!1,"cosinnus/templates/cosinnus/universal/tiles/tile-detail-people.html",!1,function(a,r){return a?void s(a):void r.getExported(function(a,r){return a?void s(a):(e.setVariable("macros",r),i+="\n\n",void(l?function(t,e,n,o,s){s("")}:e.getBlock("header_image"))(t,e,n,o,function(a,r){return a?void s(a):(i+=r,i+="\n\n",void(l?function(t,e,n,o,s){s("")}:e.getBlock("topic_line"))(t,e,n,o,function(a,r){return a?void s(a):(i+=r,i+="\n\n",void(l?function(t,e,n,o,s){s("")}:e.getBlock("top_line_address"))(t,e,n,o,function(a,r){return a?void s(a):(i+=r,i+="\n\n",void(l?function(t,e,n,o,s){s("")}:e.getBlock("action_buttons"))(t,e,n,o,function(a,r){return a?void s(a):(i+=r,i+="\n\n\n",void(l?function(t,e,n,o,s){s("")}:e.getBlock("related_content"))(t,e,n,o,function(a,r){return a?void s(a):(i+=r,i+="\n\n",void(l?function(t,e,n,o,s){s("")}:e.getBlock("create_modified_timestamps"))(t,e,n,o,function(a,r){return a?void s(a):(i+=r,i+="\n",void(l?l.rootRenderFunc(t,e,n,o,s):s(null,i)))}))}))}))}))}))}))})})})}catch(t){s(o.handleError(t,a,r))}}function e(t,e,n,o,s){var a=null,r=null,i="";try{i+='\n    <div class="single-tile-image">\n        <img class="framed-tile-image" src="',i+=o.suppressValue(o.contextOrFrameLookup(e,n,"iconImageUrl"),t.opts.autoescape),i+='" />\n    </div>\n',s(null,i)}catch(t){s(o.handleError(t,a,r))}}function n(t,e,o,s,a){var r=null,i=null,l="";try{e.getSuper(t,"topic_line",n,o,s,function(n,r){return n?void a(n):(r=s.markSafe(r),l+="\n\t",l+=s.suppressValue(r,t.opts.autoescape),l+="\n\t\n    ",1==s.contextOrFrameLookup(e,o,"may_be_contacted")?(l+='\n\t\t<div class="top-line extra-space extra-space-top">\n            <i class="fa fa-fw fa-commenting-o"></i>\n            ',l+="\n            ",l+=s.suppressValue(t.getExtension("translation").run(e,"Open to be contacted about potential collaboration opportunities"),t.opts.autoescape),l+="\n        </div>\n\t"):0==s.contextOrFrameLookup(e,o,"may_be_contacted")&&(l+='\n\t\t<div class="top-line extra-space extra-space-top">\n            <i class="fa fa-fw fa-ban"></i>\n            ',l+="\n            ",l+=s.suppressValue(t.getExtension("translation").run(e,"Does NOT wish to be contacted for potential collaboration!"),t.opts.autoescape),l+="\n        </div>\n\t"),l+="\n\n",void a(null,l))})}catch(t){a(s.handleError(t,r,i))}}function o(t,e,n,o,s){var a=null,r=null,i="";try{s(null,i)}catch(t){s(o.handleError(t,a,r))}}function s(t,e,n,o,a){var r=null,i=null,l="";try{e.getSuper(t,"action_buttons",s,n,o,function(s,r){return s?void a(s):(r=o.markSafe(r),l+="\n\t",o.contextOrFrameLookup(e,n,"is_self")||(l+='\n\t    <div class="tile-section tile-section-button-list">\n            <a class="rounded-button button-action button-star">\n                <span class="rounded-button-inner">\n                    ',o.contextOrFrameLookup(e,n,"starred")?(l+='\n                        <i class="fas fa-star"></i>\n                        ',l+=o.suppressValue(o.contextOrFrameLookup(e,n,"starringLabel"),t.opts.autoescape),l+="\n                    "):(l+='\n                        <i class="far fa-star"></i>\n                        ',l+=o.suppressValue(o.contextOrFrameLookup(e,n,"starLabel"),t.opts.autoescape),l+="\n                    "),l+="\n                </span>\n            </a>\n\t        ",o.contextOrFrameLookup(e,n,"action_url_1")&&(l+='\n\t\t        <a href="',l+=o.suppressValue(o.contextOrFrameLookup(e,n,"action_url_1"),t.opts.autoescape),l+='" target="_blank" class="rounded-button button-action">\n\t\t            <span class="rounded-button-inner">\n\t\t                ',l+="\n\t\t                ",l+=o.suppressValue(t.getExtension("translation").run(e,"Send Message"),t.opts.autoescape),l+="\n\t\t            </span>\n\t\t        </a>\n            "),l+='\n            <a href="',l+=o.suppressValue(o.memberLookup(o.memberLookup(o.memberLookup(o.contextOrFrameLookup(e,n,"controlView"),"portalInfo"),o.contextOrFrameLookup(e,n,"portal")),"domain"),t.opts.autoescape),l+=o.suppressValue(o.contextOrFrameLookup(e,n,"url"),t.opts.autoescape),l+='" target="_blank" class="rounded-button button-action button-star">\n                <span class="rounded-button-inner">\n                    <i class="fa fa-user"></i>\n                    ',l+="\n\t\t            ",l+=o.suppressValue(t.getExtension("translation").run(e,"To Profile"),t.opts.autoescape),l+="\n                </span>\n            </a>\n\t        ",l+=o.suppressValue(r,t.opts.autoescape),l+="\n\t    </div>\n    "),l+="\n",void a(null,l))})}catch(t){a(o.handleError(t,r,i))}}function a(t,e,n,o,s){var a=null,r=null,i="";try{if(i+="\n\n    ",o.contextOrFrameLookup(e,n,"extra_html")&&(i+="\n    ",i+=o.suppressValue(t.getFilter("safe").call(e,o.contextOrFrameLookup(e,n,"extra_html")),t.opts.autoescape),i+="\n    "),i+="\n\n    ",t.getFilter("length").call(e,o.contextOrFrameLookup(e,n,"groups"))>0){i+='\n        <div class="clearfix"></div>\n    \n        <div class="tile-section tile-section-divided">\n            <div class="subheading">\n                <i class="fa fa-sitemap"></i>\n                ',i+="\n                ",i+=o.suppressValue(t.getExtension("translation").run(e,"Groups"),t.opts.autoescape),i+=" (",i+=o.suppressValue(t.getFilter("length").call(e,o.contextOrFrameLookup(e,n,"groups")),t.opts.autoescape),i+=')\n            </div>\n        </div>\n        <div class="tile-section">\n            <div class="row">\n                ',n=n.push();var l=o.contextOrFrameLookup(e,n,"groups");if(l)for(var u=l.length,c=0;c<l.length;c++){var p=l[c];n.set("group",p),n.set("loop.index",c+1),n.set("loop.index0",c),n.set("loop.revindex",u-c),n.set("loop.revindex0",u-c-1),n.set("loop.first",0===c),n.set("loop.last",c===u-1),n.set("loop.length",u),i+='\n                    <div class="col-sm-6">\n                        ',i+=o.suppressValue((a=85,r=40,o.callWrap(o.memberLookup(o.contextOrFrameLookup(e,n,"macros"),"itemCard"),'macros["itemCard"]',e,[o.memberLookup(p,"portal"),o.memberLookup(p,"slug"),o.memberLookup(p,"title"),o.memberLookup(p,"type"),o.memberLookup(p,"iconImageUrl"),o.memberLookup(p,"address"),"fa-map-marker",o.memberLookup(p,"dataSlot1"),"fa-group",o.makeKeywordArgs({cosinnus_active_user:o.contextOrFrameLookup(e,n,"cosinnus_active_user")})])),t.opts.autoescape),i+="\n                    </div>\n                "}n=n.pop(),i+="\n            </div>\n        </div>\n    "}if(i+="\n\n    ",t.getFilter("length").call(e,o.contextOrFrameLookup(e,n,"projects"))>0){i+='\n        <div class="tile-section tile-section-divided">\n            <div class="subheading">\n                <i class="fa fa-group"></i>\n                ',i+="\n                ",i+=o.suppressValue(t.getExtension("translation").run(e,"Projects"),t.opts.autoescape),i+=" (",i+=o.suppressValue(t.getFilter("length").call(e,o.contextOrFrameLookup(e,n,"projects")),t.opts.autoescape),i+=')\n            </div>\n        </div>\n        <div class="tile-section">\n            <div class="row">\n                ',n=n.push();var d=o.contextOrFrameLookup(e,n,"projects");if(d)for(var m=d.length,f=0;f<d.length;f++){var h=d[f];n.set("project",h),n.set("loop.index",f+1),n.set("loop.index0",f),n.set("loop.revindex",m-f),n.set("loop.revindex0",m-f-1),n.set("loop.first",0===f),n.set("loop.last",f===m-1),n.set("loop.length",m),i+='\n                    <div class="col-sm-6">\n                        ',i+=o.suppressValue((a=104,r=40,o.callWrap(o.memberLookup(o.contextOrFrameLookup(e,n,"macros"),"itemCard"),'macros["itemCard"]',e,[o.memberLookup(h,"portal"),o.memberLookup(h,"slug"),o.memberLookup(h,"title"),o.memberLookup(h,"type"),o.memberLookup(h,"iconImageUrl"),o.memberLookup(h,"address"),"fa-map-marker",o.memberLookup(h,"dataSlot1"),"fa-group",o.makeKeywordArgs({cosinnus_active_user:o.contextOrFrameLookup(e,n,"cosinnus_active_user")})])),t.opts.autoescape),i+="\n                    </div>\n                "}n=n.pop(),i+="\n            </div>\n        </div>\n    "}i+="\n    \n",s(null,i)}catch(t){s(o.handleError(t,a,r))}}function r(t,e,n,o,s){var a=null,r=null,i="";try{i+="\n",s(null,i)}catch(t){s(o.handleError(t,a,r))}}return{b_header_image:e,b_topic_line:n,b_top_line_address:o,b_action_buttons:s,b_related_content:a,b_create_modified_timestamps:r,root:t}}()}(),t.exports=r(s,o,s.nunjucksPrecompiled["cosinnus/templates/cosinnus/universal/tiles/tile-detail-people.html"],a)},function(t,e,n){var o,s=n(8);o=s.currentEnv?s.currentEnv:s.currentEnv=new s.Environment([],void 0);var a=(n(9)(o),s.webpackDependencies||(s.webpackDependencies={}));a["tiles/tile-detail-base"]=n(40),a["include/macros.html"]=n(23);var r=n(10);!function(){(s.nunjucksPrecompiled=s.nunjucksPrecompiled||{})["cosinnus/templates/cosinnus/universal/tiles/tile-detail-events.html"]=function(){function t(t,e,n,o,s){var a=null,r=null,i="";try{var l=null;t.getTemplate("tiles/tile-detail-base",!0,"cosinnus/templates/cosinnus/universal/tiles/tile-detail-events.html",!1,function(a,r){if(a)return void s(a);l=r;for(var u in l.blocks)e.addBlock(u,l.blocks[u]);i+="\n",t.getTemplate("include/macros.html",!1,"cosinnus/templates/cosinnus/universal/tiles/tile-detail-events.html",!1,function(a,r){return a?void s(a):void r.getExported(function(a,r){return a?void s(a):(e.setVariable("macros",r),i+="\n\n",void(l?function(t,e,n,o,s){s("")}:e.getBlock("header_image"))(t,e,n,o,function(a,r){return a?void s(a):(i+=r,i+="\n\n        \n",void(l?function(t,e,n,o,s){s("")}:e.getBlock("additional_top_line"))(t,e,n,o,function(a,r){return a?void s(a):(i+=r,i+="\n\n",void(l?function(t,e,n,o,s){s("")}:e.getBlock("action_buttons"))(t,e,n,o,function(a,r){return a?void s(a):(i+=r,i+="\n        \n\n",void(l?function(t,e,n,o,s){s("")}:e.getBlock("related_content"))(t,e,n,o,function(a,r){return a?void s(a):(i+=r,i+="\n\n",void(l?function(t,e,n,o,s){s("")}:e.getBlock("create_modified_timestamps"))(t,e,n,o,function(a,r){return a?void s(a):(i+=r,i+="\n",void(l?l.rootRenderFunc(t,e,n,o,s):s(null,i)))}))}))}))}))}))})})})}catch(t){s(o.handleError(t,a,r))}}function e(t,e,n,o,s){var a=null,r=null,i="";try{i+="\n    ",o.contextOrFrameLookup(e,n,"backgroundImageLargeUrl")&&(i+='\n        <div class="tile-section header-image">\n            <div class="dual-tile-image">\n                <img class="tile-image tile-image-background" src="',i+=o.suppressValue(o.contextOrFrameLookup(e,n,"backgroundImageLargeUrl"),t.opts.autoescape),i+='" /> \n            </div>\n        </div>\n    '),i+="\n",s(null,i)}catch(t){s(o.handleError(t,a,r))}}function n(t,e,n,o,s){var a=null,r=null,i="";try{i+='\n    <div class="tile-section tile-section">\n        <div>\n            <i class="fa fa-fw fa-clock-o"></i>',i+=o.suppressValue(t.getFilter("safe").call(e,o.contextOrFrameLookup(e,n,"time_html")),t.opts.autoescape),i+="\n        </div>\n        ",o.contextOrFrameLookup(e,n,"address")&&(i+='\n            <div class="capitalize">\n                <i class="fa fa-fw fa-map-marker"></i>',i+=o.suppressValue(o.contextOrFrameLookup(e,n,"address"),t.opts.autoescape),i+="\n            </div>\n        "),i+="\n    </div>\n",s(null,i)}catch(t){s(o.handleError(t,a,r))}}function o(t,e,n,s,a){var r=null,i=null,l="";try{e.getSuper(t,"action_buttons",o,n,s,function(o,r){return o?void a(o):(r=s.markSafe(r),l+='\n    <div class="tile-section tile-section-button-list">\n    ',s.contextOrFrameLookup(e,n,"portal")==s.contextOrFrameLookup(e,n,"COSINNUS_EXCHANGE_PORTAL_ID")&&s.contextOrFrameLookup(e,n,"url")?(l+='\n        <a class="rounded-button button-action" href="',l+=s.suppressValue(s.contextOrFrameLookup(e,n,"url"),t.opts.autoescape),l+='" target="_blank">\n            <span class="rounded-button-inner">\n                <i clasS="fa fa-external-link"></i>\n                ',l+="\n                ",l+=s.suppressValue(t.getExtension("translation").run(e,"Event"),t.opts.autoescape),l+=" ",l+=s.suppressValue(t.getExtension("translation").run(e,"on"),t.opts.autoescape),l+=" ",l+=s.suppressValue(s.contextOrFrameLookup(e,n,"source"),t.opts.autoescape),l+="\n            </span>\n        </a>\n    "):(l+="\n        ",s.memberLookup(s.memberLookup(s.contextOrFrameLookup(e,n,"controlView"),"portalInfo"),"current")==s.contextOrFrameLookup(e,n,"portal")&&(l+='\n            <a class="rounded-button button-action \n                    ',l+=s.contextOrFrameLookup(e,n,"cosinnus_active_user")?'button-like" ':'" href="/signup/?acc_req_msg=1&next=/map/" target="_blank"',l+='>\n                <span class="rounded-button-inner">\n                    ',s.contextOrFrameLookup(e,n,"liked")?(l+='\n                        <i clasS="fas fa-heart"></i>\n                        ',l+="\n                        ",l+=s.suppressValue(t.getExtension("translation").run(e,"Liked"),t.opts.autoescape),l+="\n                    "):(l+='\n                        <i clasS="far fa-heart"></i>\n                        ',l+="\n                        ",l+=s.suppressValue(t.getExtension("translation").run(e,"Like"),t.opts.autoescape),l+="\n                    "),l+='\n                </span>\n            </a>\n            <a class="rounded-button button-action button-star">\n                <span class="rounded-button-inner">\n                    ',s.contextOrFrameLookup(e,n,"starred")?(l+='\n                        <i class="fas fa-star"></i>\n                        ',l+=s.suppressValue(s.contextOrFrameLookup(e,n,"starringLabel"),t.opts.autoescape),l+="\n                    "):(l+='\n                        <i class="far fa-star"></i>\n                        ',l+=s.suppressValue(s.contextOrFrameLookup(e,n,"starLabel"),t.opts.autoescape),l+="\n                    "),l+='\n                </span>\n            </a>\n            <a class="rounded-button button-action\n                    ',l+=s.contextOrFrameLookup(e,n,"cosinnus_active_user")?'button-follow" ':'" href="/signup/?acc_req_msg=1&next=/map/" target="_blank"',l+='>\n                <span class="rounded-button-inner">\n                    ',s.contextOrFrameLookup(e,n,"followed")?(l+='\n                        <i clasS="fas fa-bell"></i>\n                        ',l+="\n                        ",l+=s.suppressValue(t.getExtension("translation").run(e,"Following"),t.opts.autoescape),l+="\n                    "):(l+='\n                        <i clasS="far fa-bell"></i>\n                        ',l+="\n                        ",l+=s.suppressValue(t.getExtension("translation").run(e,"Follow"),t.opts.autoescape),l+="\n                    "),l+="\n                </span>\n            </a>\n        "),l+='\n\n        <a class="rounded-button button-action" href="',l+=s.suppressValue(s.contextOrFrameLookup(e,n,"url"),t.opts.autoescape),l+='" target="_blank">\n            <span class="rounded-button-inner">\n                <i clasS="fa fa-external-link"></i>\n                ',l+="\n                ",l+=s.suppressValue(t.getExtension("translation").run(e,"Visit Event Page"),t.opts.autoescape),l+="\n            </span>\n        </a>\n        \n        ",l+=s.suppressValue(r,t.opts.autoescape),l+='\n    </div>\n    \n    <div class="no-input">\n        <div class="now-following-message message-success extra-space-top" style="display: none;">\n            <i class="fas fa-bell"></i>\n            ',l+="\n            ",l+=s.suppressValue(t.getExtension("translation").run(e,"You will now receive notifications for comments or when this event is updated or its details change."),t.opts.autoescape),l+="\n            ",l+="\n            ",l+=s.suppressValue(t.getExtension("translation").run(e,"If you do not want notifications, click the unfollow button!"),t.opts.autoescape),l+='\n        </div>\n         \n        <div class="like-button-error message-error extra-space-top" style="display: none;">\n            ',l+="\n            ",l+=s.suppressValue(t.getExtension("translation").run(e,"Could not save your like setting because of an error."),t.opts.autoescape),l+='\n        </div>\n        <div class="follow-button-error message-error extra-space-top" style="display: none;">\n            ',l+="\n            ",l+=s.suppressValue(t.getExtension("translation").run(e,"Could not save your follow setting because of an error."),t.opts.autoescape),l+="\n        </div>\n    </div>\n"),l+="\n",void a(null,l))})}catch(t){a(s.handleError(t,r,i))}}function s(t,e,n,o,s){var a=null,r=null,i="";try{if(i+="\n\n    ",o.contextOrFrameLookup(e,n,"participant_count")>0){i+='\n        <div class="tile-section tile-section-divided">\n            <div class="subheading">\n                <i class="fa fa-user"></i>\n                ',i+="\n                ",i+=o.suppressValue(t.getExtension("translation").run(e,"Participants"),t.opts.autoescape),i+=" (",i+=o.suppressValue(o.contextOrFrameLookup(e,n,"participant_count"),t.opts.autoescape),i+=')\n            </div>\n        </div>\n        <div class="tile-section">\n            <div class="row">\n                ',n=n.push();var l=o.contextOrFrameLookup(e,n,"participants");if(l)for(var u=l.length,c=0;c<l.length;c++){var p=l[c];n.set("participant",p),n.set("loop.index",c+1),n.set("loop.index0",c),n.set("loop.revindex",u-c),n.set("loop.revindex0",u-c-1),n.set("loop.first",0===c),n.set("loop.last",c===u-1),n.set("loop.length",u),i+='\n                    <div class="col-sm-6">\n                        ',i+=o.suppressValue((a=127,r=40,o.callWrap(o.memberLookup(o.contextOrFrameLookup(e,n,"macros"),"itemCard"),'macros["itemCard"]',e,[o.memberLookup(p,"portal"),o.memberLookup(p,"slug"),o.memberLookup(p,"title"),o.memberLookup(p,"type"),o.memberLookup(p,"iconImageUrl"),o.memberLookup(p,"address"),"fa-map-marker",o.makeKeywordArgs({cosinnus_active_user:o.contextOrFrameLookup(e,n,"cosinnus_active_user")})])),t.opts.autoescape),i+="\n                    </div>\n                "}n=n.pop(),i+="\n            </div>\n            ",o.contextOrFrameLookup(e,n,"participant_count")-t.getFilter("length").call(e,o.contextOrFrameLookup(e,n,"participants"))>0&&(i+='\n                <div class="">\n                    <i>\n                        +',i+=o.suppressValue(o.contextOrFrameLookup(e,n,"participant_count")-t.getFilter("length").call(e,o.contextOrFrameLookup(e,n,"participants")),t.opts.autoescape),i+=" \n                        ",o.contextOrFrameLookup(e,n,"participant_count")-t.getFilter("length").call(e,o.contextOrFrameLookup(e,n,"participants"))>1?(i+="\n                            ",i+="\n                            ",i+=o.suppressValue(t.getExtension("translation").run(e,"Hidden Users"),t.opts.autoescape),i+="\n                        "):(i+="\n                            ",i+="\n                            ",i+=o.suppressValue(t.getExtension("translation").run(e,"Hidden User"),t.opts.autoescape),i+="\n                        "),i+="\n                    </i>\n                </div>\n            "),i+="\n        </div>\n    "}i+="\n    \n",s(null,i)}catch(t){s(o.handleError(t,a,r))}}function a(t,e,n,o,s){var a=null,r=null,i="";try{i+="\n",s(null,i)}catch(t){s(o.handleError(t,a,r))}}return{b_header_image:e,b_additional_top_line:n,b_action_buttons:o,b_related_content:s,b_create_modified_timestamps:a,root:t}}()}(),t.exports=r(s,o,s.nunjucksPrecompiled["cosinnus/templates/cosinnus/universal/tiles/tile-detail-events.html"],a)},function(t,e,n){var o,s=n(8);o=s.currentEnv?s.currentEnv:s.currentEnv=new s.Environment([],void 0);var a=(n(9)(o),s.webpackDependencies||(s.webpackDependencies={}));a["tiles/tile-detail-base"]=n(40),a["include/macros.html"]=n(23);var r=n(10);!function(){(s.nunjucksPrecompiled=s.nunjucksPrecompiled||{})["cosinnus/templates/cosinnus/universal/tiles/tile-detail-ideas.html"]=function(){function t(t,e,n,o,s){var a=null,r=null,i="";try{var l=null;t.getTemplate("tiles/tile-detail-base",!0,"cosinnus/templates/cosinnus/universal/tiles/tile-detail-ideas.html",!1,function(a,r){if(a)return void s(a);l=r;for(var u in l.blocks)e.addBlock(u,l.blocks[u]);i+="\n",t.getTemplate("include/macros.html",!1,"cosinnus/templates/cosinnus/universal/tiles/tile-detail-ideas.html",!1,function(a,r){return a?void s(a):void r.getExported(function(a,r){return a?void s(a):(e.setVariable("macros",r),i+="\n\n",void(l?function(t,e,n,o,s){s("")}:e.getBlock("header_image"))(t,e,n,o,function(a,r){return a?void s(a):(i+=r,i+="\n\n",void(l?function(t,e,n,o,s){s("")}:e.getBlock("title"))(t,e,n,o,function(a,r){return a?void s(a):(i+=r,i+="\n        \n",void(l?function(t,e,n,o,s){s("")}:e.getBlock("top_line"))(t,e,n,o,function(a,r){return a?void s(a):(i+=r,i+="\n\n",void(l?function(t,e,n,o,s){s("")}:e.getBlock("action_buttons"))(t,e,n,o,function(a,r){return a?void s(a):(i+=r,i+="\n\n\n",void(l?function(t,e,n,o,s){s("")}:e.getBlock("related_content"))(t,e,n,o,function(a,r){return a?void s(a):(i+=r,i+="\n\n",void(l?l.rootRenderFunc(t,e,n,o,s):s(null,i)))}))}))}))}))}))})})})}catch(t){s(o.handleError(t,a,r))}}function e(t,e,n,o,s){var a=null,r=null,i="";try{i+="\n    ",o.contextOrFrameLookup(e,n,"backgroundImageLargeUrl")&&(i+='\n        <div class="tile-section header-image">\n            <div class="dual-tile-image">\n                <img class="tile-image tile-image-background" src="',i+=o.suppressValue(o.contextOrFrameLookup(e,n,"backgroundImageLargeUrl"),t.opts.autoescape),i+='" /> \n            </div>\n        </div>\n    '),i+="\n",s(null,i)}catch(t){s(o.handleError(t,a,r))}}function n(t,e,n,o,s){var a=null,r=null,i="";try{i+='\n    <div class="tile-section title">\n        <h1>\n            ',i+=o.suppressValue(o.contextOrFrameLookup(e,n,"title"),t.opts.autoescape),i+="\n        </h1>\n    </div>\n",s(null,i)}catch(t){s(o.handleError(t,a,r))}}function o(t,e,n,o,s){var a=null,r=null,i="";try{i+='\n    <div class="tile-section top-line one-line extra-space">\n        <span class="multi-span">\n            <span class="pale-color">\n                ',i+="\n                ",i+=o.suppressValue(t.getExtension("translation").run(e,"Author"),t.opts.autoescape),i+=":\n            </span> \n            ",o.contextOrFrameLookup(e,n,"cosinnus_active_user")?(i+="\n                ",i+=o.suppressValue((a=31,r=34,o.callWrap(o.memberLookup(o.contextOrFrameLookup(e,n,"macros"),"resultLink"),'macros["resultLink"]',e,[o.contextOrFrameLookup(e,n,"portal"),o.contextOrFrameLookup(e,n,"creator_slug"),o.contextOrFrameLookup(e,n,"creator_name"),"people"])),t.opts.autoescape),i+="\n            "):(i+='\n                <a href="/signup/?acc_req_msg=1&next=/map/" target="_blank">',i+=o.suppressValue(o.contextOrFrameLookup(e,n,"creator_name"),t.opts.autoescape),i+="</a>\n            "),i+="\n        </span>\n        ",o.contextOrFrameLookup(e,n,"address")&&(i+='\n            <span class="multi-span half-line capitalize" title="',i+=o.suppressValue(o.contextOrFrameLookup(e,n,"address"),t.opts.autoescape),i+='">\n                <i class="fa fa-fw fa-map-marker"></i>',i+=o.suppressValue(o.contextOrFrameLookup(e,n,"address"),t.opts.autoescape),i+="\n            </span>\n        "),i+="\n        ",o.contextOrFrameLookup(e,n,"participant_count")>0&&(i+='\n            <span class="multi-span capitalize">\n                <i class="fa fa-fw fa-heart ',o.contextOrFrameLookup(e,n,"liked")&&(i+="apply-color-liked"),i+='"></i>\n                ',i+=o.suppressValue(o.contextOrFrameLookup(e,n,"participant_count"),t.opts.autoescape),i+="\n            </span>\n        "),i+="\n    </div>\n",s(null,i)}catch(t){s(o.handleError(t,a,r))}}function s(t,e,n,o,a){var r=null,i=null,l="";try{e.getSuper(t,"action_buttons",s,n,o,function(s,r){return s?void a(s):(r=o.markSafe(r),l+='\n    <div class="tile-section tile-section-button-list">\n        ',o.memberLookup(o.memberLookup(o.contextOrFrameLookup(e,n,"controlView"),"portalInfo"),"current")==o.contextOrFrameLookup(e,n,"portal")&&(l+='\n            <a class="rounded-button button-action \n                    ',l+=o.contextOrFrameLookup(e,n,"cosinnus_active_user")?'button-like" ':'" href="/signup/?acc_req_msg=1&next=/map/" target="_blank"',l+='>\n                <span class="rounded-button-inner">\n                    ',o.contextOrFrameLookup(e,n,"liked")?(l+='\n                        <i clasS="fas fa-heart"></i>\n                        ',l+="\n                        ",l+=o.suppressValue(t.getExtension("translation").run(e,"Liked"),t.opts.autoescape),l+="\n                    "):(l+='\n                        <i clasS="far fa-heart"></i>\n                        ',l+="\n                        ",l+=o.suppressValue(t.getExtension("translation").run(e,"Like"),t.opts.autoescape),l+="\n                    "),l+="\n                </span>\n            </a>\n            ",o.contextOrFrameLookup(e,n,"liked")&&(l+='\n                <a class="rounded-button button-action button-star">\n                    <span class="rounded-button-inner">\n                        ',o.contextOrFrameLookup(e,n,"starred")?(l+='\n                            <i class="fas fa-star"></i>\n                            ',
l+=o.suppressValue(o.contextOrFrameLookup(e,n,"starringLabel"),t.opts.autoescape),l+="\n                        "):(l+='\n                            <i class="far fa-star"></i>\n                            ',l+=o.suppressValue(o.contextOrFrameLookup(e,n,"starLabel"),t.opts.autoescape),l+="\n                        "),l+='\n                    </span>\n                </a>\n                <a class="rounded-button button-action button-follow">\n                    <span class="rounded-button-inner">\n                        ',o.contextOrFrameLookup(e,n,"followed")?(l+='\n                            <i clasS="fas fa-bell"></i>\n                            ',l+="\n                            ",l+=o.suppressValue(t.getExtension("translation").run(e,"Following"),t.opts.autoescape),l+="\n                        "):(l+='\n                            <i clasS="far fa-bell"></i>\n                            ',l+="\n                            ",l+=o.suppressValue(t.getExtension("translation").run(e,"Follow"),t.opts.autoescape),l+="\n                        "),l+="\n                    </span>\n                </a>\n            "),l+="\n        "),l+='\n        <a href="',l+=o.suppressValue(o.contextOrFrameLookup(e,n,"action_url_1"),t.opts.autoescape),l+='" target="_blank" class="rounded-button button-action">\n            <span class="rounded-button-inner">\n                ',l+="\n                ",l+=o.suppressValue(t.getExtension("translation").run(e,"Create Project from Idea"),t.opts.autoescape),l+="\n            </span>\n        </a>\n        ",(o.contextOrFrameLookup(e,n,"COSINNUS_SHOW_SUPERUSER_CONTROLS")||o.contextOrFrameLookup(e,n,"cosinnus_active_user")&&o.memberLookup(o.contextOrFrameLookup(e,n,"cosinnus_active_user"),"username")==o.contextOrFrameLookup(e,n,"creator_slug"))&&(l+='\n            <a href="/ideas/',l+=o.suppressValue(o.contextOrFrameLookup(e,n,"slug"),t.opts.autoescape),l+='/edit/" class="rounded-button button-action">\n                <span class="rounded-button-inner">\n                    ',l+="\n                    ",l+=o.suppressValue(t.getExtension("translation").run(e,"Edit your Idea"),t.opts.autoescape),l+="\n                </span>\n            </a>\n        "),l+="\n        \n        ",l+=o.suppressValue(r,t.opts.autoescape),l+='\n    </div>\n    \n    <div class="no-input">\n        <div class="now-following-message message-success extra-space-top" style="display: none;">\n            <i class="fas fa-bell"></i>\n            ',l+="\n            ",l+=o.suppressValue(t.getExtension("translation").run(e,"You will receive a notification when a project is created from your liked idea."),t.opts.autoescape),l+="\n            ",l+="\n            ",l+=o.suppressValue(t.getExtension("translation").run(e,"If you do not want notifications, click the unfollow button!"),t.opts.autoescape),l+='\n        </div>\n         \n        <div class="like-button-error message-error extra-space-top" style="display: none;">\n            ',l+="\n            ",l+=o.suppressValue(t.getExtension("translation").run(e,"Could not save your like setting because of an error."),t.opts.autoescape),l+='\n        </div>\n        <div class="follow-button-error message-error extra-space-top" style="display: none;">\n            ',l+="\n            ",l+=o.suppressValue(t.getExtension("translation").run(e,"Could not save your follow setting because of an error."),t.opts.autoescape),l+='\n        </div>\n        <div class="star-button-error message-error extra-space-top" style="display: none;">\n            ',l+="\n            ",l+=o.suppressValue(t.getExtension("translation").run(e,"Could not save your follow setting because of an error."),t.opts.autoescape),l+="\n        </div>\n    </div>\n",void a(null,l))})}catch(t){a(o.handleError(t,r,i))}}function a(t,e,n,o,s){var r=null,i=null,l="";try{e.getSuper(t,"related_content",a,n,o,function(a,u){if(a)return void s(a);if(u=o.markSafe(u),l+="\n    ",l+=o.suppressValue(u,t.opts.autoescape),l+="\n\n    ",t.getFilter("length").call(e,o.contextOrFrameLookup(e,n,"projects"))>0){l+='\n        <div class="tile-section tile-section-divided">\n            <div class="subheading">\n                <i class="fa fa-group"></i>\n                ',l+="\n                ",l+=o.suppressValue(t.getExtension("translation").run(e,"Projects - Created from this Idea"),t.opts.autoescape),l+=" (",l+=o.suppressValue(t.getFilter("length").call(e,o.contextOrFrameLookup(e,n,"projects")),t.opts.autoescape),l+=')\n            </div>\n        </div>\n        <div class="tile-section">\n            <div class="row">\n                ',n=n.push();var c=o.contextOrFrameLookup(e,n,"projects");if(c)for(var p=c.length,d=0;d<c.length;d++){var m=c[d];n.set("project",m),n.set("loop.index",d+1),n.set("loop.index0",d),n.set("loop.revindex",p-d),n.set("loop.revindex0",p-d-1),n.set("loop.first",0===d),n.set("loop.last",d===p-1),n.set("loop.length",p),l+='\n                    <div class="col-sm-6">\n                        ',l+=o.suppressValue((r=150,i=40,o.callWrap(o.memberLookup(o.contextOrFrameLookup(e,n,"macros"),"itemCard"),'macros["itemCard"]',e,[o.memberLookup(m,"portal"),o.memberLookup(m,"slug"),o.memberLookup(m,"title"),o.memberLookup(m,"type"),o.memberLookup(m,"iconImageUrl"),o.memberLookup(m,"address"),"fa-map-marker",o.memberLookup(m,"dataSlot1"),"fa-group",o.makeKeywordArgs({cosinnus_active_user:o.contextOrFrameLookup(e,n,"cosinnus_active_user")})])),t.opts.autoescape),l+="\n                    </div>\n                "}n=n.pop(),l+="\n            </div>\n        </div>\n    "}l+="\n    \n",s(null,l)})}catch(t){s(o.handleError(t,r,i))}}return{b_header_image:e,b_title:n,b_top_line:o,b_action_buttons:s,b_related_content:a,root:t}}()}(),t.exports=r(s,o,s.nunjucksPrecompiled["cosinnus/templates/cosinnus/universal/tiles/tile-detail-ideas.html"],a)},function(t,e,n){var o,s=n(8);o=s.currentEnv?s.currentEnv:s.currentEnv=new s.Environment([],void 0);var a=(n(9)(o),s.webpackDependencies||(s.webpackDependencies={}));a["tiles/tile-detail-base-group"]=n(39),a["include/macros.html"]=n(23);var r=n(10);!function(){(s.nunjucksPrecompiled=s.nunjucksPrecompiled||{})["cosinnus/templates/cosinnus/universal/tiles/tile-detail-organizations.html"]=function(){function t(t,e,n,o,s){var a=null,r=null,i="";try{var l=null;t.getTemplate("tiles/tile-detail-base-group",!0,"cosinnus/templates/cosinnus/universal/tiles/tile-detail-organizations.html",!1,function(a,r){if(a)return void s(a);l=r;for(var u in l.blocks)e.addBlock(u,l.blocks[u]);i+="\n",t.getTemplate("include/macros.html",!1,"cosinnus/templates/cosinnus/universal/tiles/tile-detail-organizations.html",!1,function(a,r){return a?void s(a):void r.getExported(function(a,r){return a?void s(a):(e.setVariable("macros",r),i+="\n\n\n",void(l?function(t,e,n,o,s){s("")}:e.getBlock("title"))(t,e,n,o,function(a,r){return a?void s(a):(i+=r,i+="\n\n",void(l?function(t,e,n,o,s){s("")}:e.getBlock("top_line_group"))(t,e,n,o,function(a,r){return a?void s(a):(i+=r,i+="\n\n",void(l?function(t,e,n,o,s){s("")}:e.getBlock("additional_top_line"))(t,e,n,o,function(a,r){return a?void s(a):(i+=r,i+="\n\n",void(l?function(t,e,n,o,s){s("")}:e.getBlock("action_buttons"))(t,e,n,o,function(a,r){return a?void s(a):(i+=r,i+="\n\n",void(l?function(t,e,n,o,s){s("")}:e.getBlock("contact"))(t,e,n,o,function(a,r){return a?void s(a):(i+=r,void(l?l.rootRenderFunc(t,e,n,o,s):s(null,i)))}))}))}))}))}))})})})}catch(t){s(o.handleError(t,a,r))}}function e(t,e,n,o,s){var a=null,r=null,i="";try{i+='\n    <div class="tile-section title">\n        ',o.contextOrFrameLookup(e,n,"is_superuser")||o.contextOrFrameLookup(e,n,"is_member")&&o.contextOrFrameLookup(e,n,"edit_url")?(i+='\n        <a href="',i+=o.suppressValue(o.contextOrFrameLookup(e,n,"edit_url"),t.opts.autoescape),i+='" target="_blank" class="uncolored-link">\n            <h1>\n                ',i+=o.suppressValue(o.contextOrFrameLookup(e,n,"title"),t.opts.autoescape),i+='\n                <i class="fa fa-pencil"></i>\n            </h1>\n        </a>\n        '):(i+="\n        <h1>\n            ",i+=o.suppressValue(o.contextOrFrameLookup(e,n,"title"),t.opts.autoescape),i+="\n        </h1>\n        "),i+="\n    </div>\n",s(null,i)}catch(t){s(o.handleError(t,a,r))}}function n(t,e,n,o,s){var a=null,r=null,i="";try{i+='\n    <div class="tile-section topic-line one-line">\n        ',i+=o.suppressValue(o.contextOrFrameLookup(e,n,"organization_type"),t.opts.autoescape),i+="\n    </div>\n",s(null,i)}catch(t){s(o.handleError(t,a,r))}}function o(t,e,n,o,s){var a=null,r=null,i="";try{i+="\n",i+=o.suppressValue(o.memberLookup(o.contextOrFrameLookup(e,n,"block"),"super"),t.opts.autoescape),i+="\n",o.contextOrFrameLookup(e,n,"is_open_for_cooperation")&&(i+='\n<div class="alert apply-bg-color-organizations">\n    <i class="fa fa-puzzle-piece"></i>\n    ',i+="\n    <p>",i+=o.suppressValue(t.getExtension("translation").run(e,"This organization is open for further partner organizations."),t.opts.autoescape),i+="</p>\n</div>\n"),i+="\n",s(null,i)}catch(t){s(o.handleError(t,a,r))}}function s(t,e,n,o,s){var a=null,r=null,i="";try{i+="\n",o.contextOrFrameLookup(e,n,"portal")==o.contextOrFrameLookup(e,n,"COSINNUS_EXCHANGE_PORTAL_ID")&&o.contextOrFrameLookup(e,n,"url")&&(i+='\n    <div class="tile-section tile-section-button-list">\n        <a class="rounded-button button-action" href="',i+=o.suppressValue(o.contextOrFrameLookup(e,n,"url"),t.opts.autoescape),i+='" target="_blank">\n            <span class="rounded-button-inner">\n                <i clasS="fa fa-external-link"></i>\n                ',i+="\n                ",i+=o.suppressValue(t.getExtension("translation").run(e,"Organization"),t.opts.autoescape),i+=" ",i+=o.suppressValue(t.getExtension("translation").run(e,"on"),t.opts.autoescape),i+=" ",i+=o.suppressValue(o.contextOrFrameLookup(e,n,"source"),t.opts.autoescape),i+="\n            </span>\n        </a>\n    </div>\n"),i+="\n",s(null,i)}catch(t){s(o.handleError(t,a,r))}}function a(t,e,n,o,s){var a=null,r=null,i="";try{if(i+="\n",o.contextOrFrameLookup(e,n,"portal")!=o.contextOrFrameLookup(e,n,"COSINNUS_EXCHANGE_PORTAL_ID")){i+='\n    <div class="tile-section tile-section-divided">\n        <div class="row">\n            <div class="col-xs-6">\n                <div class="subheading">\n                    ',i+="\n                    ",i+=o.suppressValue(t.getExtension("translation").run(e,"Contact"),t.opts.autoescape),i+="\n                </div>\n                ",o.contextOrFrameLookup(e,n,"website_url")&&(i+='\n                    <div class="tile-section one-line no-space">\n                        <a href="',i+=o.suppressValue(o.contextOrFrameLookup(e,n,"website_url"),t.opts.autoescape),i+='" target="_blank" class="compact-link">\n                            <i class="fa fa-globe"></i>',i+=o.suppressValue(o.contextOrFrameLookup(e,n,"website_url"),t.opts.autoescape),i+="\n                        </a>\n                    </div>\n                "),i+="\n                ",n=n.push();var l=o.contextOrFrameLookup(e,n,"social_media");if(l)for(var u=l.length,c=0;c<l.length;c++){var p=l[c];n.set("sm",p),n.set("loop.index",c+1),n.set("loop.index0",c),n.set("loop.revindex",u-c),n.set("loop.revindex0",u-c-1),n.set("loop.first",0===c),n.set("loop.last",c===u-1),n.set("loop.length",u),i+='\n                    <div class="tile-section one-line no-space">\n                        <a href="',i+=o.suppressValue(o.memberLookup(p,"url"),t.opts.autoescape),i+='" target="_blank" class="compact-link">\n                            <i class="fa fa-',i+=o.suppressValue(o.memberLookup(p,"icon"),t.opts.autoescape),i+='"></i>',i+=o.suppressValue(o.memberLookup(p,"url"),t.opts.autoescape),i+="\n                        </a>\n                    </div>\n                "}if(n=n.pop(),i+="\n                ",o.contextOrFrameLookup(e,n,"email")&&(i+='\n                    <div class="tile-section one-line no-space">\n                        <a href="mailto:',i+=o.suppressValue(o.contextOrFrameLookup(e,n,"email"),t.opts.autoescape),i+='" target="_blank" class="compact-link">\n                            <i class="fa fa-envelope"></i>',i+=o.suppressValue(o.contextOrFrameLookup(e,n,"email"),t.opts.autoescape),i+="\n                        </a>\n                    </div>\n                "),i+="\n                ",o.contextOrFrameLookup(e,n,"phone_number")&&(i+='\n                    <div class="tile-section one-line no-space">\n                        <a href="tel:',i+=o.suppressValue(o.contextOrFrameLookup(e,n,"phone_number"),t.opts.autoescape),i+='" target="_blank" class="compact-link">\n                            <i class="fa fa-phone"></i>',i+=o.suppressValue(o.contextOrFrameLookup(e,n,"phone_number"),t.opts.autoescape),i+="\n                        </a>\n                    </div>\n                "),i+='\n            </div>\n            <div class="col-xs-6">\n                <div class="subheading">\n                    ',t.getFilter("length").call(e,o.contextOrFrameLookup(e,n,"admins"))>1?(i+="\n                        ",i+="\n                        ",i+=o.suppressValue(t.getExtension("translation").run(e,"Administrator"),t.opts.autoescape),i+="\n                    "):(i+="\n                        ",i+="\n                        ",i+=o.suppressValue(t.getExtension("translation").run(e,"Administrators"),t.opts.autoescape),i+="\n                    "),i+='\n                </div>\n                <div class="tile-section">\n                    ',t.getFilter("length").call(e,o.contextOrFrameLookup(e,n,"admins"))>0){i+="\n                        ",n=n.push();var d=o.contextOrFrameLookup(e,n,"admins");if(d)for(var m=d.length,f=0;f<d.length;f++){var h=d[f];n.set("admin",h),n.set("loop.index",f+1),n.set("loop.index0",f),n.set("loop.revindex",m-f),n.set("loop.revindex0",m-f-1),n.set("loop.first",0===f),n.set("loop.last",f===m-1),n.set("loop.length",m),i+="\n                            ",i+=o.suppressValue((a=103,r=44,o.callWrap(o.memberLookup(o.contextOrFrameLookup(e,n,"macros"),"itemCard"),'macros["itemCard"]',e,[o.memberLookup(h,"portal"),o.memberLookup(h,"slug"),o.memberLookup(h,"title"),o.memberLookup(h,"type"),o.memberLookup(h,"iconImageUrl"),o.memberLookup(h,"address"),"fa-map-marker",o.makeKeywordArgs({cosinnus_active_user:o.contextOrFrameLookup(e,n,"cosinnus_active_user")})])),t.opts.autoescape),i+="\n                        "}n=n.pop(),i+="\n                    "}else i+="\n                        ",i+="\n                        </i>",i+=o.suppressValue(t.getExtension("translation").run(e,"Administrators unknown"),t.opts.autoescape),i+="</i>\n                    ";if(i+='\n                </div>\n                <div class="tile-section tile-section-button-list">\n                    ',o.contextOrFrameLookup(e,n,"is_member")?(i+='\n                        <a class="rounded-button button-action disabled">\n                            <span class="rounded-button-inner">\n                                <i clasS="fa fa-check"></i>\n                                ',i+="\n                                ",i+=o.suppressValue(t.getExtension("translation").run(e,"You are a Admin"),t.opts.autoescape),i+="\n                            </span>\n                        </a>\n                    "):(o.contextOrFrameLookup(e,n,"is_invited")||o.contextOrFrameLookup(e,n,"is_pending"))&&(i+='\n                       <a href="',i+=o.suppressValue(o.contextOrFrameLookup(e,n,"accept_url"),t.opts.autoescape),i+='" target="_blank" class="rounded-button button-action">\n                            <span class="rounded-button-inner">\n                                ',o.contextOrFrameLookup(e,n,"is_invited")?(i+="\n                                    ",i+="\n                                    ",i+=o.suppressValue(t.getExtension("translation").run(e,"You are invited!"),t.opts.autoescape),i+="\n                                "):o.contextOrFrameLookup(e,n,"is_pending")&&(i+="\n                                    ",i+="\n                                    ",i+=o.suppressValue(t.getExtension("translation").run(e,"Ownership request pending..."),t.opts.autoescape),i+="\n                                "),i+="\n                            </span>\n                        </a>\n                    "),i+="\n                </div>\n            </div>\n        </div>\n\n    </div>\n\n    ",t.getFilter("length").call(e,o.contextOrFrameLookup(e,n,"groups"))>0){i+='\n        <div class="tile-section tile-section-divided">\n            <div class="subheading">\n                <i class="fa fa-group"></i>\n                ',t.getFilter("length").call(e,o.contextOrFrameLookup(e,n,"organizations"))>1?(i+="\n                \t",i+="\n\t                ",i+=o.suppressValue(t.getExtension("translation").run(e,"Projects and groups"),t.opts.autoescape),i+="\n                "):(i+="\n\t                ",i+="\n\t                ",i+=o.suppressValue(t.getExtension("translation").run(e,"Project/group"),t.opts.autoescape),i+="\n\t            "),i+='\n            </div>\n        </div>\n        <div class="tile-section">\n            <div class="row">\n                ',n=n.push();var v=o.contextOrFrameLookup(e,n,"groups");if(v)for(var g=v.length,k=0;k<v.length;k++){var b=v[k];n.set("group",b),n.set("loop.index",k+1),n.set("loop.index0",k),n.set("loop.revindex",g-k),n.set("loop.revindex0",g-k-1),n.set("loop.first",0===k),n.set("loop.last",k===g-1),n.set("loop.length",g),i+='\n                    <div class="col-sm-6">\n                        ',i+=o.suppressValue((a=155,r=40,o.callWrap(o.memberLookup(o.contextOrFrameLookup(e,n,"macros"),"itemCard"),'macros["itemCard"]',e,[o.memberLookup(b,"portal"),o.memberLookup(b,"slug"),o.memberLookup(b,"title"),o.memberLookup(b,"type"),o.memberLookup(b,"iconImageUrl"),o.memberLookup(b,"location"),"fa-map-marker"])),t.opts.autoescape),i+="\n                    </div>\n                "}n=n.pop(),i+="\n            </div>\n        </div>\n    "}i+="\n"}i+="\n",s(null,i)}catch(t){s(o.handleError(t,a,r))}}return{b_title:e,b_top_line_group:n,b_additional_top_line:o,b_action_buttons:s,b_contact:a,root:t}}()}(),t.exports=r(s,o,s.nunjucksPrecompiled["cosinnus/templates/cosinnus/universal/tiles/tile-detail-organizations.html"],a)},function(t,e,n){var o,s=n(8);o=s.currentEnv?s.currentEnv:s.currentEnv=new s.Environment([],void 0);var a=(n(9)(o),s.webpackDependencies||(s.webpackDependencies={}));a["tiles/tile-detail-base"]=n(40),a["include/macros.html"]=n(23);var r=n(10);!function(){(s.nunjucksPrecompiled=s.nunjucksPrecompiled||{})["cosinnus/templates/cosinnus/universal/tiles/tile-detail-error-403.html"]=function(){function t(t,e,n,o,s){var a=null,r=null,i="";try{var l=null;t.getTemplate("tiles/tile-detail-base",!0,"cosinnus/templates/cosinnus/universal/tiles/tile-detail-error-403.html",!1,function(a,r){if(a)return void s(a);l=r;for(var u in l.blocks)e.addBlock(u,l.blocks[u]);i+="\n",t.getTemplate("include/macros.html",!1,"cosinnus/templates/cosinnus/universal/tiles/tile-detail-error-403.html",!1,function(a,r){return a?void s(a):void r.getExported(function(a,r){return a?void s(a):(e.setVariable("macros",r),i+="\n\n",void(l?function(t,e,n,o,s){s("")}:e.getBlock("content"))(t,e,n,o,function(a,r){return a?void s(a):(i+=r,i+="\n",void(l?l.rootRenderFunc(t,e,n,o,s):s(null,i)))}))})})})}catch(t){s(o.handleError(t,a,r))}}function e(t,e,n,o,s){var a=null,r=null,i="";try{i+='\n    <h1 class="error-title">\n        ',i+="\n        ",i+=o.suppressValue(t.getExtension("translation").run(e,"Protected Content"),t.opts.autoescape),i+='\n    </h1>\n    <div class="error-text">\n        <p>\n            ',i+="\n            ",i+=o.suppressValue(t.getExtension("translation").run(e,"Sorry, but you cannot view details for this content."),t.opts.autoescape),i+="\n        </p>\n        <p>\n            ",o.contextOrFrameLookup(e,n,"cosinnus_active_user")?(i+="\n                ",i+="\n                ",i+=o.suppressValue(t.getExtension("translation").run(e,"This can happen when its visibility settings have changed recently."),t.opts.autoescape),i+="\n            "):(i+='\n                <a href="/signup/?acc_req_msg=1&next=/map/" target="_blank">\n                    ',i+="\n                    ",i+=o.suppressValue(t.getExtension("translation").run(e,"Please register or log in to continue!"),t.opts.autoescape),i+="\n                </a>\n            "),i+="\n        </p>\n    </div>\n",s(null,i)}catch(t){s(o.handleError(t,a,r))}}return{b_content:e,root:t}}()}(),t.exports=r(s,o,s.nunjucksPrecompiled["cosinnus/templates/cosinnus/universal/tiles/tile-detail-error-403.html"],a)},function(t,e,n){var o,s=n(8);o=s.currentEnv?s.currentEnv:s.currentEnv=new s.Environment([],void 0);var a=(n(9)(o),s.webpackDependencies||(s.webpackDependencies={}));a["tiles/tile-detail-base"]=n(40),a["include/macros.html"]=n(23);var r=n(10);!function(){(s.nunjucksPrecompiled=s.nunjucksPrecompiled||{})["cosinnus/templates/cosinnus/universal/tiles/tile-detail-error.html"]=function(){function t(t,e,n,o,s){var a=null,r=null,i="";try{var l=null;t.getTemplate("tiles/tile-detail-base",!0,"cosinnus/templates/cosinnus/universal/tiles/tile-detail-error.html",!1,function(a,r){if(a)return void s(a);l=r;for(var u in l.blocks)e.addBlock(u,l.blocks[u]);i+="\n",t.getTemplate("include/macros.html",!1,"cosinnus/templates/cosinnus/universal/tiles/tile-detail-error.html",!1,function(a,r){return a?void s(a):void r.getExported(function(a,r){return a?void s(a):(e.setVariable("macros",r),i+="\n\n",void(l?function(t,e,n,o,s){s("")}:e.getBlock("content"))(t,e,n,o,function(a,r){return a?void s(a):(i+=r,i+="\n",void(l?l.rootRenderFunc(t,e,n,o,s):s(null,i)))}))})})})}catch(t){s(o.handleError(t,a,r))}}function e(t,e,n,o,s){var a=null,r=null,i="";try{i+='\n    <h1 class="error-title">\n        ',i+="\n        ",i+=o.suppressValue(t.getExtension("translation").run(e,"Error!"),t.opts.autoescape),i+='\n    </h1>\n    <div class="error-text">\n        ',i+="\n        ",i+=o.suppressValue(t.getExtension("translation").run(e,"Sorry, but the requested content could not be retrieved from the server."),t.opts.autoescape),i+="\n    </div>\n",s(null,i)}catch(t){s(o.handleError(t,a,r))}}return{b_content:e,root:t}}()}(),t.exports=r(s,o,s.nunjucksPrecompiled["cosinnus/templates/cosinnus/universal/tiles/tile-detail-error.html"],a)},function(t,e,n){"use strict";var o=n(4),s=n(5);t.exports=o.extend({app:null,template:n(50),fetchURL:"/search/api/quicksearch/",$searchBarEl:null,defaults:{query:null,searchMethods:{default:"/search/?q={{q}}",map:"/map/?q={{q}}",groups:"/search/?groups=mine&q={{q}}",cloudfiles:"/search/cloudfiles/?q={{q}}"},topicsSearchMethods:{},topicsUrl:"/map/?topics={{t}}",sdgSearchMethods:{},sdgsUrl:"/map/?sdgs={{t}}",state:{loading:!1,currentRequest:null,hadErrors:!1,quicksearchResults:[],fireQuicksearchTimeout:null}},events:{},initialize:function(t,e){var n=this;n.app=e,o.prototype.initialize.call(n,t),n.$searchBarEl=$("#nav-quicksearch"),n.$searchBarEl.on("focus",".nav-search-box",n.thisContext(n.onSearchBoxFocusIn)),n.$searchBarEl.on("keydown",".nav-search-box",n.thisContext(n.onSearchBoxKeyDown)),n.$searchBarEl.on("input",".nav-search-box",n.thisContext(n.onSearchBoxTyped)),n.$searchBarEl.on("click",".nav-button-search",n.thisContext(n.onSearchIconClicked)),n.$searchBarEl.on("click",".quicksearch-filterbutton",n.thisContext(n.onQuickSearchFilterButtonClicked))},render:function(){var t=this;return o.prototype.render.call(t),s.log("*** Rendered quicksearch! ***"),this.$searchBarEl.find(".dropdown-underdrop").height(this.$el.outerHeight()),t},getTemplateData:function(){var t=this,e=o.prototype.getTemplateData.call(t);return e},onSearchBoxFocusIn:function(t){this.$searchBarEl.find(".nav-search-box").attr("placeholder",this.options.placeholder),this.showDropdown()},onSearchBoxKeyDown:function(t){13==t.keyCode?this.fireSearch():27==t.keyCode&&(this.$searchBarEl.removeClass("active").find(".nav-search-box").blur(),$(".v2-navbar").removeClass("search-open"))},onQuickSearchFilterButtonClicked:function(t){t.preventDefault();var e=t.currentTarget.getAttribute("data-result-filter-type"),n=this.getCurrentQuery(),o={q:n?n:"",people:"people"===e,events:"events"===e,projects:"projects"===e,groups:"groups"===e,ideas:"ideas"===e,conferences:"conferences"===e,organizations:"organizations"===e},s=[];for(var a in o)s.push(encodeURIComponent(a)+"="+encodeURIComponent(o[a]));var r="/map/?"+s.join("&");window.location.href=r},onSearchBoxTyped:function(t){var e=this;t.shiftKey||t.ctrlKey||(null!==e.state.fireQuicksearchTimeout&&clearTimeout(e.state.fireQuicksearchTimeout),this.updateSearchSuggestions())},updateSearchSuggestions:function(){var t=this,e=t.getCurrentQuery(),n=_(t.options.searchMethods).clone();for(var o in n)n[o]=n[o].replace("{{q}}",encodeURIComponent(e));t.state.searchMethods=n;var a={};for(var r in t.options.topicsJson){var i=t.options.topicsJson[r];if(i&&i.toLowerCase().indexOf(e.toLowerCase())>-1){var l=s.iReplace(i,e,"<b>$1</b>"),u=t.options.topicsUrl.replace("{{t}}",r);a[l]=u}}if(t.options.sdgsJson.length>0){var c={};for(var p in t.options.sdgsJson){var d=t.options.sdgsJson[p];if(d&&d.name.toLowerCase().indexOf(e.toLowerCase())>-1){var l=s.iReplace(d.name,e,"<b>$1</b>"),u=t.options.sdgsUrl.replace("{{t}}",d.id);c[l]=u}}}t.state.topicsSearchMethods=a,t.state.sdgSearchMethods=c,t.state.query=e||null,t.state.quicksearchResults=[],t.render(),t.state.query&&t.state.query.length>2&&(t.state.fireQuicksearchTimeout=setTimeout(t.loadQuickResults,300,t,t.state.query))},getCurrentQuery:function(){return this.$searchBarEl.find(".nav-search-box").val().trim()},fireSearch:function(t,e){var n=this;if(t||(t="default"),e||(e=n.getCurrentQuery()),e&&e.length>0){var o=n.options.searchMethods[t].replace("{{q}}",encodeURIComponent(e));window.location=o}},showDropdown:function(){s.log("*** Showing quicksearch results ***"),document.addEventListener("click",this.thisContext(this.checkQuickSearchFocusOut)),this.$searchBarEl.addClass("active"),$(".v2-navbar").addClass("search-open"),this.render()},hideDropdown:function(){s.log("*** Hiding quicksearch results ***"),this.$el.hide()},checkQuickSearchFocusOut:function(t){(this.$searchBarEl.hasClass("active")&&!this.$searchBarEl[0].contains(t.target)||$(t.target).hasClass("nav-search-backdrop"))&&(this.$searchBarEl.removeClass("active"),$(".v2-navbar").removeClass("search-open"),this.$searchBarEl.find(".nav-search-box").attr("placeholder",""),document.removeEventListener("click",this.thisContext(this.checkQuickSearchFocusOut)))},onSearchIconClicked:function(t){this.$searchBarEl.hasClass("active")?this.fireSearch():(this.$searchBarEl.find(".nav-search-box").attr("placeholder",this.options.placeholder),this.$searchBarEl.find(".nav-search-box").focus())},loadQuickResults:function(t,e){t.state.loading&&(null!==t.state.currentRequest&&(t.state.currentRequest.abort(),t.state.currentRequest=null),t.state.loading=!1),t.state.loading=!0;var n=function(){t.state.loading=!1};t.loadData(e).then(function(e){s.log("# quicksearch received data and is now handling it"),t.handleData(e),n()})},loadData:function(t){var e=this;return new Promise(function(n,o){var s=e.fetchURL+"?"+$.param({q:t});e.state.currentRequest=$.ajax(s,{type:"GET",success:function(t,e,s){200==s.status?n(t.data):o(s.statusText)},error:function(t,e){o(e)},complete:function(){e.state.currentRequest=null}})})},handleData:function(t){var e=this;s.log("# # Fetched data for quicksearch"),t.count>0&&(e.state.quicksearchResults=t.items,$.each(e.state.quicksearchResults,function(t,n){var o=n.text;if($.each(e.state.query.split(" "),function(t,e){o=s.iReplace(o,e,"<b>$1</b>")}),n.text=o,"string"==typeof n.subtext){var a=n.subtext;$.each(e.state.query.split(" "),function(t,e){a=s.iReplace(a,e,"<b>$1</b>")}),n.subtext=a}}),e.render())},handleError:function(t){s.log("# Error during quicksearch request!")}})},function(t,e,n){var o,s=n(8);o=s.currentEnv?s.currentEnv:s.currentEnv=new s.Environment([],void 0);var a=(n(9)(o),s.webpackDependencies||(s.webpackDependencies={}));a["include/macros.html"]=n(23);var r=n(10);!function(){(s.nunjucksPrecompiled=s.nunjucksPrecompiled||{})["cosinnus/templates/cosinnus/universal/navbar/quicksearch.html"]=function(){function t(t,e,n,o,s){var a=null,r=null,i="";try{var l=null;i+=o.suppressValue(t.getExtension("passThrough").run(e,o.contextOrFrameLookup(e,n,"i18n")),t.opts.autoescape),i+="\n",t.getTemplate("include/macros.html",!1,"cosinnus/templates/cosinnus/universal/navbar/quicksearch.html",!1,function(u,c){return u?void s(u):void c.getExported(function(u,c){if(u)return void s(u);e.setVariable("macros",c),i+='\n\n<ul class="item-list">\n\n\t<li>\n\t    <div class="nav-quicksearch-buttons">\n\t\t\t<div class="btn-no-interact nav-quicksearch-button-label">\n\t\t\t\t';var p;if(p=function(){var n="";return n+="\n\t\t\t\t",n+="\n\t\t\t\t",n+=o.suppressValue(t.getExtension("translation").run(e,"Find on map:"),t.opts.autoescape),n+="\n\t\t\t\t"}(),n.set("filter_annotations_prefix",p,!0),n.topLevel&&e.setVariable("filter_annotations_prefix",p),n.topLevel&&e.addExport("filter_annotations_prefix",p),i+="\n\t\t\t    ",i+=o.suppressValue(o.contextOrFrameLookup(e,n,"filter_annotations_prefix"),t.opts.autoescape),i+='\n\t\t    </div>\n\t\t    <div>\n\t\t\t\t<a class="rounded-button button-color-people result-filter-button quicksearch-filterbutton" data-result-filter-type="people">\n\t\t\t\t\t',i+=o.suppressValue((a=16,r=22,o.callWrap(o.memberLookup(c,"typeLabel"),'macros["typeLabel"]',e,["people","rounded-button-inner",o.makeKeywordArgs({useStyles:!1,COSINNUS_TRANS:o.contextOrFrameLookup(e,n,"COSINNUS_TRANS")})])),t.opts.autoescape),i+='\n\t\t\t\t</a>\n\t\t\t\t<a class="rounded-button button-color-projects result-filter-button quicksearch-filterbutton" data-result-filter-type="projects">\n\t\t\t\t\t',i+=o.suppressValue((a=19,r=22,o.callWrap(o.memberLookup(c,"typeLabel"),'macros["typeLabel"]',e,["projects","rounded-button-inner",o.makeKeywordArgs({useStyles:!1,COSINNUS_TRANS:o.contextOrFrameLookup(e,n,"COSINNUS_TRANS")})])),t.opts.autoescape),i+='\n\t\t\t\t</a>\n\t\t\t\t<a class="rounded-button button-color-groups result-filter-button quicksearch-filterbutton" data-result-filter-type="groups">\n\t\t\t\t\t',i+=o.suppressValue((a=22,r=22,o.callWrap(o.memberLookup(c,"typeLabel"),'macros["typeLabel"]',e,["groups","rounded-button-inner",o.makeKeywordArgs({useStyles:!1,COSINNUS_TRANS:o.contextOrFrameLookup(e,n,"COSINNUS_TRANS")})])),t.opts.autoescape),i+='\n\t\t\t\t</a>\n\t\t\t\t<a class="rounded-button button-color-events result-filter-button quicksearch-filterbutton" data-result-filter-type="events">\n\t\t\t\t\t',i+=o.suppressValue((a=25,r=22,o.callWrap(o.memberLookup(c,"typeLabel"),'macros["typeLabel"]',e,["events","rounded-button-inner",o.makeKeywordArgs({useStyles:!1,COSINNUS_TRANS:o.contextOrFrameLookup(e,n,"COSINNUS_TRANS")})])),t.opts.autoescape),i+="\n\t\t\t\t</a>\n\t\t\t\t",o.contextOrFrameLookup(e,n,"COSINNUS_CONFERENCES_ENABLED")&&(i+='\n\t\t\t\t\t<a class="rounded-button button-color-conferences result-filter-button quicksearch-filterbutton" data-result-filter-type="conferences">\n\t\t\t\t\t\t',i+=o.suppressValue((a=29,r=23,o.callWrap(o.memberLookup(c,"typeLabel"),'macros["typeLabel"]',e,["conferences","rounded-button-inner",o.makeKeywordArgs({useStyles:!1,COSINNUS_TRANS:o.contextOrFrameLookup(e,n,"COSINNUS_TRANS")})])),t.opts.autoescape),i+="\n\t\t\t\t\t</a>\n\t\t\t\t"),i+="\n\t\t\t\t",o.contextOrFrameLookup(e,n,"COSINNUS_IDEAS_ENABLED")&&(i+='\n\t\t\t\t\t<a class="rounded-button button-color-ideas result-filter-button quicksearch-filterbutton" data-result-filter-type="ideas">\n\t\t\t\t\t\t',i+=o.suppressValue((a=34,r=23,o.callWrap(o.memberLookup(c,"typeLabel"),'macros["typeLabel"]',e,["ideas","rounded-button-inner",o.makeKeywordArgs({useStyles:!1,COSINNUS_TRANS:o.contextOrFrameLookup(e,n,"COSINNUS_TRANS")})])),t.opts.autoescape),i+="\n\t\t\t\t\t</a>\n\t\t\t\t"),i+="\n                ",o.contextOrFrameLookup(e,n,"COSINNUS_ORGANIZATIONS_ENABLED")&&(i+='\n                    <a class="rounded-button button-color-organizations result-filter-button quicksearch-filterbutton" data-result-filter-type="organizations">\n                        ',
i+=o.suppressValue((a=39,r=41,o.callWrap(o.memberLookup(c,"typeLabel"),'macros["typeLabel"]',e,["organizations","rounded-button-inner",o.makeKeywordArgs({useStyles:!1,COSINNUS_TRANS:o.contextOrFrameLookup(e,n,"COSINNUS_TRANS")})])),t.opts.autoescape),i+="\n                    </a>\n                "),i+="\n\t\t\t</div>\n\t\t</div>\n\t</li>\n\n\t",o.contextOrFrameLookup(e,n,"query")&&t.getFilter("length").call(e,o.contextOrFrameLookup(e,n,"query"))>2){i+="\n\t\t";var d;d=function(){var n="";return n+="\n\t\t\t",n+="\n\t\t\t",n+=o.suppressValue(t.getExtension("translation").run(e,"Entire Network"),t.opts.autoescape),n+="\n\t\t"}(),n.set("default_annotation",d,!0),n.topLevel&&e.setVariable("default_annotation",d),n.topLevel&&e.addExport("default_annotation",d),i+="\n\t\t";var m;m=function(){var n="";return n+="\n\t\t\t",n+="\n\t\t\t",n+=o.suppressValue(t.getExtension("translation").run(e,"On the Map"),t.opts.autoescape),n+="\n\t\t"}(),n.set("map_annotation",m,!0),n.topLevel&&e.setVariable("map_annotation",m),n.topLevel&&e.addExport("map_annotation",m),i+="\n\t\t";var f;f=function(){var n="";return n+="\n\t\t\t",n+="\n\t\t\t",n+=o.suppressValue(t.getExtension("translation").run(e,"In my Groups and Projects"),t.opts.autoescape),n+="\n\t\t"}(),n.set("groups_annotation",f,!0),n.topLevel&&e.setVariable("groups_annotation",f),n.topLevel&&e.addExport("groups_annotation",f),i+="\n\t\t";var h;h=function(){var n="";return n+="\n\t\t\t",n+="\n\t\t\t",n+=o.suppressValue(t.getExtension("translation").run(e,"In my Cloud Files"),t.opts.autoescape),n+="\n\t\t"}(),n.set("cloudfiles_annotation",h,!0),n.topLevel&&e.setVariable("cloudfiles_annotation",h),n.topLevel&&e.addExport("cloudfiles_annotation",h),i+="\n\t\t\n\t\t",i+=o.suppressValue((a=64,r=18,o.callWrap(o.memberLookup(c,"listItem"),'macros["listItem"]',e,[o.contextOrFrameLookup(e,n,"query"),o.memberLookup(o.contextOrFrameLookup(e,n,"searchMethods"),"default"),"fa-search",o.makeKeywordArgs({annotation:o.contextOrFrameLookup(e,n,"default_annotation"),includeUnderdrop:!0})])),t.opts.autoescape),i+="\n\t\t",i+=o.suppressValue((a=65,r=18,o.callWrap(o.memberLookup(c,"listItem"),'macros["listItem"]',e,[o.contextOrFrameLookup(e,n,"query"),o.memberLookup(o.contextOrFrameLookup(e,n,"searchMethods"),"map"),"fa-search",o.makeKeywordArgs({annotation:o.contextOrFrameLookup(e,n,"map_annotation"),includeUnderdrop:!0})])),t.opts.autoescape),i+="\n\t\t",i+=o.suppressValue((a=66,r=18,o.callWrap(o.memberLookup(c,"listItem"),'macros["listItem"]',e,[o.contextOrFrameLookup(e,n,"query"),o.memberLookup(o.contextOrFrameLookup(e,n,"searchMethods"),"groups"),"fa-search",o.makeKeywordArgs({annotation:o.contextOrFrameLookup(e,n,"groups_annotation"),includeUnderdrop:!0})])),t.opts.autoescape),i+="\n\n\t\t",o.contextOrFrameLookup(e,n,"cloudEnabled")&&(i+="\n\t\t\t",i+=o.suppressValue((a=69,r=19,o.callWrap(o.memberLookup(c,"listItem"),'macros["listItem"]',e,[o.contextOrFrameLookup(e,n,"query"),o.memberLookup(o.contextOrFrameLookup(e,n,"searchMethods"),"cloudfiles"),"fa-search",o.makeKeywordArgs({annotation:o.contextOrFrameLookup(e,n,"cloudfiles_annotation"),includeUnderdrop:!0})])),t.opts.autoescape),i+="\n\t\t"),i+="\n\t\t\n\t\t",n=n.push();var v=o.contextOrFrameLookup(e,n,"topicsSearchMethods");if(v){var g;if(o.isArray(v)){var k=v.length;for(g=0;g<v.length;g++){var b=v[g][0];n.set("topic_title",v[g][0]);var x=v[g][1];n.set("topic_url",v[g][1]),n.set("loop.index",g+1),n.set("loop.index0",g),n.set("loop.revindex",k-g),n.set("loop.revindex0",k-g-1),n.set("loop.first",0===g),n.set("loop.last",g===k-1),n.set("loop.length",k),i+="\n\t\t\t";var L;L=function(){var n="";return n+="\n\t\t\t\t",n+="\n\t\t\t\t",n+=o.suppressValue(t.getExtension("translation").run(e,"Topic"),t.opts.autoescape),n+=": ",n+=o.suppressValue(t.getFilter("safe").call(e,b),t.opts.autoescape),n+="\n\t\t\t"}(),n.set("topic_label",L,!0),n.topLevel&&e.setVariable("topic_label",L),n.topLevel&&e.addExport("topic_label",L),i+="\n\t\t\t",i+=o.suppressValue((a=77,r=19,o.callWrap(o.memberLookup(c,"listItem"),'macros["listItem"]',e,[t.getFilter("safe").call(e,o.contextOrFrameLookup(e,n,"topic_label")),x,"fa-filter",o.makeKeywordArgs({includeUnderdrop:!0})])),t.opts.autoescape),i+="\n\t\t"}}else{g=-1;var k=o.keys(v).length;for(var _ in v){g++;var O=v[_];n.set("topic_title",_),n.set("topic_url",O),n.set("loop.index",g+1),n.set("loop.index0",g),n.set("loop.revindex",k-g),n.set("loop.revindex0",k-g-1),n.set("loop.first",0===g),n.set("loop.last",g===k-1),n.set("loop.length",k),i+="\n\t\t\t";var w;w=function(){var n="";return n+="\n\t\t\t\t",n+="\n\t\t\t\t",n+=o.suppressValue(t.getExtension("translation").run(e,"Topic"),t.opts.autoescape),n+=": ",n+=o.suppressValue(t.getFilter("safe").call(e,_),t.opts.autoescape),n+="\n\t\t\t"}(),n.set("topic_label",w,!0),n.topLevel&&e.setVariable("topic_label",w),n.topLevel&&e.addExport("topic_label",w),i+="\n\t\t\t",i+=o.suppressValue((a=77,r=19,o.callWrap(o.memberLookup(c,"listItem"),'macros["listItem"]',e,[t.getFilter("safe").call(e,o.contextOrFrameLookup(e,n,"topic_label")),O,"fa-filter",o.makeKeywordArgs({includeUnderdrop:!0})])),t.opts.autoescape),i+="\n\t\t"}}}n=n.pop(),i+=" \n\n\t\t",n=n.push();var y=o.contextOrFrameLookup(e,n,"sdgSearchMethods");if(y){var F;if(o.isArray(y)){var S=y.length;for(F=0;F<y.length;F++){var E=y[F][0];n.set("sdg_title",y[F][0]);var V=y[F][1];n.set("sdg_url",y[F][1]),n.set("loop.index",F+1),n.set("loop.index0",F),n.set("loop.revindex",S-F),n.set("loop.revindex0",S-F-1),n.set("loop.first",0===F),n.set("loop.last",F===S-1),n.set("loop.length",S),i+="\n\t\t\t";var C;C=function(){var n="";return n+="\n\t\t\t\t",n+="\n\t\t\t\t",n+=o.suppressValue(t.getExtension("translation").run(e,"SDG"),t.opts.autoescape),n+=": ",n+=o.suppressValue(t.getFilter("safe").call(e,E),t.opts.autoescape),n+="\n\t\t\t"}(),n.set("sdg_label",C,!0),n.topLevel&&e.setVariable("sdg_label",C),n.topLevel&&e.addExport("sdg_label",C),i+="\n\t\t\t",i+=o.suppressValue((a=85,r=19,o.callWrap(o.memberLookup(c,"listItem"),'macros["listItem"]',e,[t.getFilter("safe").call(e,o.contextOrFrameLookup(e,n,"sdg_label")),V,"fa-filter",o.makeKeywordArgs({includeUnderdrop:!0})])),t.opts.autoescape),i+="\n\t\t"}}else{F=-1;var S=o.keys(y).length;for(var T in y){F++;var N=y[T];n.set("sdg_title",T),n.set("sdg_url",N),n.set("loop.index",F+1),n.set("loop.index0",F),n.set("loop.revindex",S-F),n.set("loop.revindex0",S-F-1),n.set("loop.first",0===F),n.set("loop.last",F===S-1),n.set("loop.length",S),i+="\n\t\t\t";var I;I=function(){var n="";return n+="\n\t\t\t\t",n+="\n\t\t\t\t",n+=o.suppressValue(t.getExtension("translation").run(e,"SDG"),t.opts.autoescape),n+=": ",n+=o.suppressValue(t.getFilter("safe").call(e,T),t.opts.autoescape),n+="\n\t\t\t"}(),n.set("sdg_label",I,!0),n.topLevel&&e.setVariable("sdg_label",I),n.topLevel&&e.addExport("sdg_label",I),i+="\n\t\t\t",i+=o.suppressValue((a=85,r=19,o.callWrap(o.memberLookup(c,"listItem"),'macros["listItem"]',e,[t.getFilter("safe").call(e,o.contextOrFrameLookup(e,n,"sdg_label")),N,"fa-filter",o.makeKeywordArgs({includeUnderdrop:!0})])),t.opts.autoescape),i+="\n\t\t"}}}n=n.pop(),i+=" \n\t\t\n\t\t",i+="\n\t\t",n=n.push();var A=o.contextOrFrameLookup(e,n,"quicksearchResults");if(A)for(var R=A.length,D=0;D<A.length;D++){var P=A[D];n.set("item",P),n.set("loop.index",D+1),n.set("loop.index0",D),n.set("loop.revindex",R-D),n.set("loop.revindex0",R-D-1),n.set("loop.first",0===D),n.set("loop.last",D===R-1),n.set("loop.length",R),i+="\n\t\t\t",i+="\n\t\t\t","fa-cloud"==o.memberLookup(P,"icon")?(i+="\n\t\t\t\t",i+=o.suppressValue((a=92,r=20,o.callWrap(o.memberLookup(c,"listItem"),'macros["listItem"]',e,[o.memberLookup(P,"text"),o.memberLookup(P,"url"),o.memberLookup(P,"icon"),o.makeKeywordArgs({subtext:o.memberLookup(P,"subtext"),annotation:o.memberLookup(P,"group"),annotationIcon:o.memberLookup(P,"group_icon"),includeUnderdrop:!0})])),t.opts.autoescape),i+="\n\t\t\t"):(i+="\n\t\t\t\t",i+=o.suppressValue((a=94,r=20,o.callWrap(o.memberLookup(c,"listItem"),'macros["listItem"]',e,[o.memberLookup(P,"text"),o.memberLookup(P,"url"),o.memberLookup(P,"icon"),o.makeKeywordArgs({annotation:o.memberLookup(P,"group"),annotationIcon:o.memberLookup(P,"group_icon"),includeUnderdrop:!0})])),t.opts.autoescape),i+="\n\t\t\t"),i+="\n\t\t"}n=n.pop(),i+="\n\t"}i+="\n</ul>\n",l?l.rootRenderFunc(t,e,n,o,s):s(null,i)})})}catch(t){s(o.handleError(t,a,r))}}return{root:t}}()}(),t.exports=r(s,o,s.nunjucksPrecompiled["cosinnus/templates/cosinnus/universal/navbar/quicksearch.html"],a)},function(t,e,n){"use strict";var o=n(4),s=n(5);t.exports=o.extend({app:null,template:n(52),events:{},defaults:{state:{}},initialize:function(t,e){var n=this;n.app=e,o.prototype.initialize.call(n,t);for(var s in n.options.contextDataJSON)n.options[s]=JSON.parse($("<textarea/>").html(n.options.contextDataJSON[s]).text());for(var s in n.options.contextData)n.options[s]=n.options.contextData[s]},render:function(){var t=this;return o.prototype.render.call(t),s.log("*** Rendered navbar main menu! ***"),$.cosinnus.renderMomentDataDate(),t},getTemplateData:function(){var t=this,e=o.prototype.getTemplateData.call(t);return e}})},function(t,e,n){var o,s=n(8);o=s.currentEnv?s.currentEnv:s.currentEnv=new s.Environment([],void 0);var a=(n(9)(o),s.webpackDependencies||(s.webpackDependencies={}));a["include/macros.html"]=n(23);var r=n(10);!function(){(s.nunjucksPrecompiled=s.nunjucksPrecompiled||{})["cosinnus/templates/cosinnus/universal/navbar/main-menu.html"]=function(){function t(t,e,n,o,s){var a=null,r=null,i="";try{var l=null;i+=o.suppressValue(t.getExtension("passThrough").run(e,o.contextOrFrameLookup(e,n,"i18n")),t.opts.autoescape),i+="\n",t.getTemplate("include/macros.html",!1,"cosinnus/templates/cosinnus/universal/navbar/main-menu.html",!1,function(u,c){return u?void s(u):void c.getExported(function(u,c){if(u)return void s(u);if(e.setVariable("macros",c),i+='\n\n<div class="main-menu">\n\t<div class="nav-column">\n\t\t\n\t\t',t.getFilter("length").call(e,o.contextOrFrameLookup(e,n,"groups_invited"))>0){i+='\n\t\t\t<h2 class="headline headline-condensed">\n\t\t\t\t',i+="\n\t\t\t\t",i+=o.suppressValue(t.getExtension("translation").run(e,"Invitations"),t.opts.autoescape),i+=" (",i+=o.suppressValue(t.getFilter("length").call(e,o.contextOrFrameLookup(e,n,"groups_invited")),t.opts.autoescape),i+=')\n\t\t\t</h2>\n\t\t\n\t\t\t<ul class="item-list">\n\t\t\t\t',n=n.push();var p=o.contextOrFrameLookup(e,n,"groups_invited");if(p)for(var d=p.length,m=0;m<p.length;m++){var f=p[m];n.set("item",f),n.set("loop.index",m+1),n.set("loop.index0",m),n.set("loop.revindex",d-m),n.set("loop.revindex0",d-m-1),n.set("loop.first",0===m),n.set("loop.last",m===d-1),n.set("loop.length",d),i+="\n\t\t\t\t\t",i+=o.suppressValue((a=14,r=21,o.callWrap(o.memberLookup(c,"listItem"),'macros["listItem"]',e,[o.memberLookup(f,"text"),o.memberLookup(f,"url"),o.memberLookup(f,"icon"),o.makeKeywordArgs({is_emphasized:o.memberLookup(f,"is_emphasized")})])),t.opts.autoescape),i+="\n\t\t\t\t"}n=n.pop(),i+="\n\t\t\t</ul>\n\t\t\t\n\t\t\t<hr>\n\t\t"}if(i+="\n\t\t\n\t\t",t.getFilter("length").call(e,o.contextOrFrameLookup(e,n,"group_requests"))>0){i+='\n\t\t\t<h2 class="headline headline-condensed">\n\t\t\t\t',i+="\n\t\t\t\t",i+=o.suppressValue(t.getExtension("translation").run(e,"Membership Requests"),t.opts.autoescape),i+=" (",i+=o.suppressValue(o.contextOrFrameLookup(e,n,"group_requests_count"),t.opts.autoescape),i+=')\n\t\t\t</h2>\n\t\t\n\t\t\t<ul class="item-list">\n\t\t\t\t',n=n.push();var h=o.contextOrFrameLookup(e,n,"group_requests");if(h)for(var v=h.length,g=0;g<h.length;g++){var k=h[g];n.set("item",k),n.set("loop.index",g+1),n.set("loop.index0",g),n.set("loop.revindex",v-g),n.set("loop.revindex0",v-g-1),n.set("loop.first",0===g),n.set("loop.last",g===v-1),n.set("loop.length",v),i+="\n\t\t\t\t\t",i+=o.suppressValue((a=29,r=21,o.callWrap(o.memberLookup(c,"listItem"),'macros["listItem"]',e,[o.memberLookup(k,"text"),o.memberLookup(k,"url"),o.memberLookup(k,"icon"),o.makeKeywordArgs({is_emphasized:o.memberLookup(k,"is_emphasized")})])),t.opts.autoescape),i+="\n\t\t\t\t"}n=n.pop(),i+="\n\t\t\t</ul>\n\t\t\t\n\t\t\t<hr>\n\t\t"}if(i+="\n\n\t\t",t.getFilter("length").call(e,o.contextOrFrameLookup(e,n,"conference_requests"))>0){i+='\n\t\t\t<h2 class="headline headline-condensed">\n\t\t\t\t',i+="\n\t\t\t\t",i+=o.suppressValue(t.getExtension("translation").run(e,"Conference Applications"),t.opts.autoescape),i+=" (",i+=o.suppressValue(o.contextOrFrameLookup(e,n,"conference_requests_count"),t.opts.autoescape),i+=')\n\t\t\t</h2>\n\t\t\n\t\t\t<ul class="item-list">\n\t\t\t\t',n=n.push();var b=o.contextOrFrameLookup(e,n,"conference_requests");if(b)for(var x=b.length,L=0;L<b.length;L++){var _=b[L];n.set("item",_),n.set("loop.index",L+1),n.set("loop.index0",L),n.set("loop.revindex",x-L),n.set("loop.revindex0",x-L-1),n.set("loop.first",0===L),n.set("loop.last",L===x-1),n.set("loop.length",x),i+="\n\t\t\t\t\t",i+=o.suppressValue((a=44,r=21,o.callWrap(o.memberLookup(c,"listItem"),'macros["listItem"]',e,[o.memberLookup(_,"text"),o.memberLookup(_,"url"),o.memberLookup(_,"icon"),o.makeKeywordArgs({is_emphasized:o.memberLookup(_,"is_emphasized")})])),t.opts.autoescape),i+="\n\t\t\t\t"}n=n.pop(),i+="\n\t\t\t</ul>\n\t\t\t\n\t\t\t<hr>\n\t\t"}if(i+='\n\t\t\n\t\t<h2 class="headline headline-condensed">\n\t\t\t',i+="\n\t\t\t",i+=o.suppressValue(t.getExtension("translation").run(e,"My Groups and Projects"),t.opts.autoescape),i+='\n\t\t</h2>\n\t\t\n\t\t<ul class="item-list">\n\t\t\t',t.getFilter("length").call(e,o.contextOrFrameLookup(e,n,"group_clusters"))>0){i+="\n\t\t\t\t",n=n.push();var O=o.contextOrFrameLookup(e,n,"group_clusters");if(O)for(var w=O.length,y=0;y<O.length;y++){var F=O[y];n.set("cluster",F),n.set("loop.index",y+1),n.set("loop.index0",y),n.set("loop.revindex",w-y),n.set("loop.revindex0",w-y-1),n.set("loop.first",0===y),n.set("loop.last",y===w-1),n.set("loop.length",w),i+="\n\t\t\t\t\t",n=n.push();var S=F;if(S)for(var E=S.length,V=0;V<S.length;V++){var C=S[V];n.set("item",C),n.set("loop.index",V+1),n.set("loop.index0",V),n.set("loop.revindex",E-V),n.set("loop.revindex0",E-V-1),n.set("loop.first",0===V),n.set("loop.last",V===E-1),n.set("loop.length",E),i+="\n\t\t\t\t\t\t",o.memberLookup(C,"hasmorelink")?(i+='\n\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t<a class="list-item list-item-link" href="#" role="button" titledby=".item-text"> \n\t\t\t\t\t\t\t\t\t<div id="more-link1" class="item-text">\n\t\t\t\t\t\t                ',i+="\n\t\t\t\t\t\t\t\t\t\t",i+=o.suppressValue(t.getExtension("translation").run(e,"Show more Projects of this Group"),t.opts.autoescape),i+="\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<a>\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t"):(i+="\n\t\t\t\t\t\t\t",i+=o.suppressValue((a=70,r=23,o.callWrap(o.memberLookup(c,"listItem"),'macros["listItem"]',e,[o.memberLookup(C,"text"),o.memberLookup(C,"url"),o.memberLookup(C,"icon"),o.makeKeywordArgs({is_emphasized:o.memberLookup(C,"is_emphasized")})])),t.opts.autoescape),i+="\n\t\t\t\t\t\t"),i+="\n\t\t\t\t\t"}n=n.pop(),i+="\n\t\t\t\t\n\t\t\t\t\t",o.memberLookup(o.contextOrFrameLookup(e,n,"loop"),"last")||(i+="\n\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t<hr>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t"),i+="\n\t\t\t\t"}n=n.pop(),i+="\n\t\t\t"}else i+='\n\t\t\t\t<li>\n\t\t\t\t\t<span class="list-item list-item-link no-select" href="#" role="button" titledby=".item-text"> \n\t\t\t    \t\t<div class="item-text">\n\t\t\t                ',i+="\n\t\t\t\t\t\t\t",i+=o.suppressValue(t.getExtension("translation").run(e,"You are not in any groups or projects yet"),t.opts.autoescape),i+="\n\t\t\t    \t\t</div>\n\t\t\t\t\t</span>\n\t\t\t\t</li>\n\t\t\t";if(i+='\n\t\t</ul>\n\t\t\n\t\t<hr>\n\t\t\n\t\t<div class="main-menu-links">\n\t\t    ',o.contextOrFrameLookup(e,n,"COSINNUS_SHOW_PROJECT_AND_GROUP_CREATE_BUTTONS")&&(i+='\n\t\t\t\t<div><a href="',i+=o.suppressValue(o.contextOrFrameLookup(e,n,"group_add_url"),t.opts.autoescape),i+='">\n\t\t\t\t\t',i+="\n\t\t\t\t\t",i+=o.suppressValue(t.getExtension("translation").run(e,"Create new Group"),t.opts.autoescape),i+='\n\t\t\t\t</a></div>\n\t\t\t\t<div><a href="',i+=o.suppressValue(o.contextOrFrameLookup(e,n,"project_add_url"),t.opts.autoescape),i+='">\n\t\t\t\t\t',i+="\n\t\t\t\t\t",i+=o.suppressValue(t.getExtension("translation").run(e,"Create new Project"),t.opts.autoescape),i+=" \n\t\t\t\t</a></div>\n\t\t\t"),i+='\n\t\t\t<div><a href="/groups/">\n\t\t\t\t',i+="\n\t\t\t\t",i+=o.suppressValue(t.getExtension("translation").run(e,"Browse all Groups"),t.opts.autoescape),i+=' \n\t\t\t</a></div>\n\t\t\t<div><a href="/projects/">\n\t\t\t\t',i+="\n\t\t\t\t",i+=o.suppressValue(t.getExtension("translation").run(e,"Browse all Projects"),t.opts.autoescape),i+=' \n\t\t\t</a></div>\n\t\t\t<div><a href="/map/?matching=true">\n\t\t\t\t',i+="\n\t\t\t\t",i+=o.suppressValue(t.getExtension("translation").run(e,"Find partners"),t.opts.autoescape),i+="\n\t\t\t</a></div>\n\t\t</div>\n\t</div>\n\t\n\t",o.contextOrFrameLookup(e,n,"COSINNUS_CONFERENCES_ENABLED")||o.contextOrFrameLookup(e,n,"COSINNUS_IDEAS_ENABLED")||o.contextOrFrameLookup(e,n,"COSINNUS_ORGANIZATIONS_ENABLED")){if(i+='\n\t<div class="nav-column">\n\t    ',o.contextOrFrameLookup(e,n,"COSINNUS_CONFERENCES_ENABLED")){if(i+='\n\t        <h2 class="headline headline-condensed">\n\t\t\t    ',i+=o.suppressValue(o.memberLookup(o.contextOrFrameLookup(e,n,"COSINNUS_TRANS"),"COSINNUS_TRANS_MY_CONFERENCES"),t.opts.autoescape),i+='\n\t        </h2>\n\t        \n\t        <ul class="item-list">\n\t            ',t.getFilter("length").call(e,o.contextOrFrameLookup(e,n,"my_conferences"))){i+="\n\t                ",n=n.push();var T=o.contextOrFrameLookup(e,n,"my_conferences");if(T)for(var N=T.length,I=0;I<T.length;I++){var A=T[I];n.set("item",A),n.set("loop.index",I+1),n.set("loop.index0",I),n.set("loop.revindex",N-I),n.set("loop.revindex0",N-I-1),n.set("loop.first",0===I),n.set("loop.last",I===N-1),n.set("loop.length",N),i+="\n\t                    ",i+=o.suppressValue((a=130,r=37,o.callWrap(o.memberLookup(c,"listItem"),'macros["listItem"]',e,[o.memberLookup(A,"text"),o.memberLookup(A,"url"),o.memberLookup(A,"icon"),o.makeKeywordArgs({is_emphasized:o.memberLookup(A,"is_emphasized")})])),t.opts.autoescape),i+="\n\t                "}n=n.pop(),i+="\n\t            "}else i+='\n\t                <li>\n\t                    <span class="list-item list-item-link no-select" href="#" role="button" titledby=".item-text">\n\t                        <div class="item-text">\n\t                            ',i+=o.suppressValue(o.memberLookup(o.contextOrFrameLookup(e,n,"COSINNUS_TRANS"),"COSINNUS_TRANS_MY_CONFERENCES_EMPTY"),t.opts.autoescape),i+="\n\t                        </div>\n\t                    </span>\n\t                </li>    \n\t\t        ";i+="\n\t        </ul>\n\t            \n\t        <hr>\n\t        ",o.contextOrFrameLookup(e,n,"COSINNUS_USER_CAN_CREATE_CONFERENCE")&&(i+='\n\t           <div class="main-menu-links">\n\t\t           <div><a href="/conferences/add/">\n\t                    ',i+=o.suppressValue(o.memberLookup(o.contextOrFrameLookup(e,n,"COSINNUS_TRANS"),"COSINNUS_TRANS_CREATE_CONFERENCE"),t.opts.autoescape),i+=" \n\t                </a></div>\n                </div>\n            "),i+='\n            <div class="main-menu-links">\n                <div><a href="/conferences/">\n                    ',i+=o.suppressValue(o.memberLookup(o.contextOrFrameLookup(e,n,"COSINNUS_TRANS"),"COSINNUS_TRANS_BROWSE_ALL_CONFERENCES"),t.opts.autoescape),i+="\n                </a></div>\n            </div>\n            \n            ",(o.contextOrFrameLookup(e,n,"COSINNUS_ORGANIZATIONS_ENABLED")||o.contextOrFrameLookup(e,n,"COSINNUS_IDEAS_ENABLED"))&&(i+="\n            <hr>\n            "),i+="\n        "}if(i+="\n\t\n\t\t",o.contextOrFrameLookup(e,n,"COSINNUS_ORGANIZATIONS_ENABLED")){if(i+='\n\t\t\t<h2 class="headline headline-condensed">\n\t\t\t\t',i+="\n\t\t\t\t",i+=o.suppressValue(t.getExtension("translation").run(e,"My Organizations"),t.opts.autoescape),i+='\n\t\t\t</h2>\n\t\t    <ul class="item-list">\n\t\t\t',t.getFilter("length").call(e,o.contextOrFrameLookup(e,n,"my_organizations"))){i+="\n\t\t\t\t",n=n.push();var R=o.contextOrFrameLookup(e,n,"my_organizations");if(R)for(var D=R.length,P=0;P<R.length;P++){var U=R[P];n.set("item",U),n.set("loop.index",P+1),n.set("loop.index0",P),n.set("loop.revindex",D-P),n.set("loop.revindex0",D-P-1),n.set("loop.first",0===P),n.set("loop.last",P===D-1),n.set("loop.length",D),i+="\n\t\t\t\t\t",i+=o.suppressValue((a=170,r=21,o.callWrap(o.memberLookup(c,"listItem"),'macros["listItem"]',e,[o.memberLookup(U,"text"),o.memberLookup(U,"url"),o.memberLookup(U,"icon"),o.makeKeywordArgs({is_emphasized:o.memberLookup(U,"is_emphasized")})])),t.opts.autoescape),i+="\n\t\t\t\t"}n=n.pop(),i+="\n\t\t\t"}else i+='\n\t\t\t\t<li>\n\t\t\t\t\t<span class="list-item list-item-link no-select" href="#" role="button" titledby=".item-text">\n\t\t\t\t\t\t<div class="item-text">\n\t\t\t\t\t\t\t',i+="\n\t\t\t\t\t\t\t",i+=o.suppressValue(t.getExtension("translation").run(e,"You have not created any organizations yet."),t.opts.autoescape),i+="\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</span>\n\t\t\t\t</li>\n\t\t\t";i+='\n\t\t\t</ul>\n\t\t\t<hr>\n\t\t\t\n\t\t\t<div class="main-menu-links">\n\t\t\t\t<div><a href="',i+=o.suppressValue(o.contextOrFrameLookup(e,n,"organization_add_url"),t.opts.autoescape),i+='">\n\t\t\t\t\t',i+="\n\t\t\t\t\t",i+=o.suppressValue(t.getExtension("translation").run(e,"Create new Organization"),t.opts.autoescape),i+=' \n\t\t\t\t</a></div>\n\t\t\t\t<div><a href="/organizations/">\n\t\t\t\t\t',i+="\n\t\t\t\t\t",i+=o.suppressValue(t.getExtension("translation").run(e,"Browse all Organizations"),t.opts.autoescape),i+=' \n\t\t\t\t</a></div>\n\t\t\t\t<div style="display:none;"><a href="/map/?people=false&events=false&projects=false&groups=false&ideas=false&organizations=true">\n\t\t\t\t\t',i+="\n\t\t\t\t\t",i+=o.suppressValue(t.getExtension("translation").run(e,"Search for Organizations"),t.opts.autoescape),i+=" \n\t\t\t\t</a></div>\n\t\t\t</div>\n\t\t\t\n\t\t\t",o.contextOrFrameLookup(e,n,"COSINNUS_IDEAS_ENABLED")&&(i+="\n\t\t\t<hr>\n\t\t\t"),i+="\n\t\t"}if(i+="\n\t\t\n\t\t",o.contextOrFrameLookup(e,n,"COSINNUS_IDEAS_ENABLED")){if(i+='\n\t\t\t<h2 class="headline headline-condensed">\n\t\t\t\t',i+="\n\t\t\t\t",i+=o.suppressValue(t.getExtension("translation").run(e,"Ideas I am following"),t.opts.autoescape),i+='\n\t\t\t</h2>\n\t\t\t\n\t\t\t<ul class="item-list">\n\t\t\t\t',t.getFilter("length").call(e,o.contextOrFrameLookup(e,n,"followed_ideas"))>0){i+="\n\t\t\t\t\t",n=n.push();var M=o.contextOrFrameLookup(e,n,"followed_ideas");if(M)for(var B=M.length,j=0;j<M.length;j++){var $=M[j];n.set("item",$),n.set("loop.index",j+1),n.set("loop.index0",j),n.set("loop.revindex",B-j),n.set("loop.revindex0",B-j-1),n.set("loop.first",0===j),n.set("loop.last",j===B-1),n.set("loop.length",B),i+="\n\t\t\t\t\t\t",i+=o.suppressValue((a=214,r=22,o.callWrap(o.memberLookup(c,"listItem"),'macros["listItem"]',e,[o.memberLookup($,"text"),o.memberLookup($,"url"),o.memberLookup($,"icon"),o.makeKeywordArgs({is_emphasized:o.memberLookup($,"is_emphasized")})])),t.opts.autoescape),i+="\n\t\t\t\t\t"}n=n.pop(),i+="\n\t\t\t\t"}else i+='\n\t\t\t\t\t<li>\n\t\t\t\t\t\t<span class="list-item list-item-link no-select" href="#" role="button" titledby=".item-text"> \n\t\t\t\t    \t\t<div class="item-text">\n\t\t\t\t                ',i+="\n\t\t\t\t\t\t\t\t",i+=o.suppressValue(t.getExtension("translation").run(e,"You are not following any ideas yet."),t.opts.autoescape),i+="\n\t\t\t\t    \t\t</div>\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</li>\n\t\t\t\t";if(i+="\n\t\t\t</ul>\n\t\t\t\n\t\t\t<hr>\n\t\t\t\n\t\t\t",t.getFilter("length").call(e,o.contextOrFrameLookup(e,n,"my_ideas"))){i+='\n\t\t\t\t<h2 class="headline headline-condensed">\n\t\t\t\t\t',i+="\n\t\t\t\t\t",i+=o.suppressValue(t.getExtension("translation").run(e,"My Ideas"),t.opts.autoescape),i+='\n\t\t\t\t</h2>\n\t\t\t\t<ul class="item-list">\n\t\t\t\t\t',n=n.push();var z=o.contextOrFrameLookup(e,n,"my_ideas");if(z)for(var q=z.length,W=0;W<z.length;W++){var G=z[W];n.set("item",G),n.set("loop.index",W+1),n.set("loop.index0",W),n.set("loop.revindex",q-W),n.set("loop.revindex0",q-W-1),n.set("loop.first",0===W),n.set("loop.last",W===q-1),n.set("loop.length",q),i+="\n\t\t\t\t\t\t",i+=o.suppressValue((a=237,r=22,o.callWrap(o.memberLookup(c,"listItem"),'macros["listItem"]',e,[o.memberLookup(G,"text"),o.memberLookup(G,"url"),o.memberLookup(G,"icon"),o.makeKeywordArgs({is_emphasized:o.memberLookup(G,"is_emphasized")})])),t.opts.autoescape),i+="\n\t\t\t\t\t"}n=n.pop(),i+="\n\t\t\t\t</ul>\n\t\t\t\t<hr>\n\t\t\t"}i+='\n\t\t\t\n\t\t\t<div class="main-menu-links">\n\t\t\t\t<div><a href="',i+=o.suppressValue(o.contextOrFrameLookup(e,n,"idea_add_url"),t.opts.autoescape),i+='">\n\t\t\t\t\t',i+="\n\t\t\t\t\t",i+=o.suppressValue(t.getExtension("translation").run(e,"Post new Idea"),t.opts.autoescape),i+=' \n\t\t\t\t</a></div>\n\t\t\t\t<div><a href="/ideas/">\n\t\t\t\t\t',i+="\n\t\t\t\t\t",i+=o.suppressValue(t.getExtension("translation").run(e,"Browse all Ideas"),t.opts.autoescape),i+=' \n\t\t\t\t</a></div>\n\t\t\t\t<div style="display:none;"><a href="/map/?people=false&events=false&projects=false&groups=false&conferences=false&ideas=true&organizations=false">\n\t\t\t\t\t',i+="\n\t\t\t\t\t",i+=o.suppressValue(t.getExtension("translation").run(e,"Search for Ideas"),t.opts.autoescape),i+=" \n\t\t\t\t</a></div>\n\t\t\t</div>\n\t\t"}i+="\n\t\t\n\t</div>\n\t"}if(i+='\n\t\n\t<div class="nav-column">\n\t\t<h2 class="headline headline-condensed">\n\t\t\t',i+="\n\t\t\t",i+=o.suppressValue(t.getExtension("translation").run(e,"My Events"),t.opts.autoescape),i+='\n\t\t</h2>\n\t\t\n\t\t<ul class="item-list">\n\t\t\t',t.getFilter("length").call(e,o.contextOrFrameLookup(e,n,"attending_events"))>0){i+="\n\t\t\t\t",n=n.push();var H=o.contextOrFrameLookup(e,n,"attending_events");if(H)for(var K=H.length,J=0;J<H.length;J++){var Y=H[J];n.set("item",Y),n.set("loop.index",J+1),n.set("loop.index0",J),n.set("loop.revindex",K-J),n.set("loop.revindex0",K-J-1),n.set("loop.first",0===J),n.set("loop.last",J===K-1),n.set("loop.length",K),i+="\n\t\t\t\t\t",i+=o.suppressValue((a=271,r=21,o.callWrap(o.memberLookup(c,"listItem"),'macros["listItem"]',e,[o.memberLookup(Y,"text"),o.memberLookup(Y,"url"),o.memberLookup(Y,"icon"),o.makeKeywordArgs({subtext:o.memberLookup(Y,"subtext"),is_emphasized:o.memberLookup(Y,"is_emphasized")})])),t.opts.autoescape),i+="\n\t\t\t\t"}n=n.pop(),i+="\n\t\t\t"}else i+='\n\t\t\t\t<li>\n\t\t\t\t\t<span class="list-item list-item-link no-select" href="#" role="button" titledby=".item-text"> \n\t\t\t    \t\t<div class="item-text">\n\t\t\t                ',i+="\n\t\t\t\t\t\t\t",i+=o.suppressValue(t.getExtension("translation").run(e,"You have not RSVPed to any Events."),t.opts.autoescape),i+="\n\t\t\t    \t\t</div>\n\t\t\t\t\t</span>\n\t\t\t\t</li>\n\t\t\t";i+="\n\t\t</ul>\n\t\t\n\t\t",(o.contextOrFrameLookup(e,n,"event_add_url")||o.contextOrFrameLookup(e,n,"event_calendar_url"))&&(i+='\n\t\t\t<hr>\n\t\t\t\n\t\t\t<div class="main-menu-links">\n\t\t\t    ',o.contextOrFrameLookup(e,n,"event_add_url")&&(i+='\n\t\t\t\t\t<div><a href="',i+=o.suppressValue(o.contextOrFrameLookup(e,n,"event_add_url"),t.opts.autoescape),i+='">\n\t\t\t\t\t\t',i+="\n\t\t\t\t\t\t",i+=o.suppressValue(t.getExtension("translation").run(e,"Add Event"),t.opts.autoescape),i+=" \n\t\t\t\t\t</a></div>\n\t            "),i+="\n\t\t\t\t",o.contextOrFrameLookup(e,n,"event_calendar_url")&&(i+='\n\t\t\t\t\t<div><a href="',i+=o.suppressValue(o.contextOrFrameLookup(e,n,"event_calendar_url"),t.opts.autoescape),i+='">\n\t\t\t\t\t\t',i+="\n\t\t\t\t\t\t",i+=o.suppressValue(t.getExtension("translation").run(e,"Go to Calendar"),t.opts.autoescape),i+=" \n\t\t\t\t\t</a></div>\n\t            "),i+="\n\t\t\t</div>\n\t\t"),i+="\n\t\t\n\t</div>\n</div>",l?l.rootRenderFunc(t,e,n,o,s):s(null,i)})})}catch(t){s(o.handleError(t,a,r))}}return{root:t}}()}(),t.exports=r(s,o,s.nunjucksPrecompiled["cosinnus/templates/cosinnus/universal/navbar/main-menu.html"],a)},function(t,e,n){"use strict";var o=n(54),s=n(5);t.exports=o.extend({app:null,template:n(55),fetchURL:"/profile/api/alerts/get/",$notificationButtonEl:null,$messagesButtonEl:null,pollIntervalObj:null,defaults:{type:null,loadMoreEnabled:!0,pollInterval:6e4,pollResetMinutes:60,state:{newestTimestamp:null,unseenCount:0,hasUnrenderedItems:!0,lastPollDate:null,originalPageTitle:null}},events:{"click .show-more":"onShowMoreClicked"},initialize:function(t,e){var n=this;n.app=e,o.prototype.initialize.call(n,t),n.options.type=t.type,n.$notificationButtonEl=$("#navbar-notifications-button"),n.$messagesButtonEl=$("#navbar-messages-button"),n.$notificationButtonEl.on("click",n.thisContext(n.onNotificationButtonClicked)),n.state.originalPageTitle=document.title},getWidgetId:function(){return"notification-widget"},getParamsForFetchRequest:function(t){var e=this;if("undefined"!=typeof t&&1==t.isPoll)return{urlSuffix:e.state.newestTimestamp,urlParams:null};var n=null;return e.options.loadMoreEnabled&&e.state.offsetTimestamp&&(n={offset_timestamp:e.state.offsetTimestamp}),{urlSuffix:null,urlParams:n}},handleData:function(t){var e=this,n=t.data;n.polled_timestamp?n.items.length>0&&(e.addNewerItems(n.items),e.state.hasUnrenderedItems=!0):e.state.offsetTimestamp?(Array.prototype.push.apply(e.widgetData.items,n.items),e.state.hasUnrenderedItems=!0):(e.widgetData=n,e.state.hasUnrenderedItems=!0,e.initPoll()),!n.polled_timestamp&&e.options.loadMoreEnabled&&("has_more"in n&&(e.state.hasMore=n.has_more),"offset_timestamp"in n&&n.offset_timestamp&&(e.state.offsetTimestamp=n.offset_timestamp)),"undefined"!==n.newest_timestamp&&n.newest_timestamp&&(e.state.newestTimestamp=n.newest_timestamp);var o=!1;"undefined"!==n.unseen_count&&n.unseen_count>=0&&(e.state.unseenCount=n.unseen_count,o=!0),"undefined"!==n.unread_messages_count&&n.unread_messages_count>=0&&(e.state.unreadMessagesCount=n.unread_messages_count,o=!0),1==o&&(e.afterRender(),e.updatePageTitle())},addNewerItems:function(t){for(var e=this,n=e.widgetData.items,o=n.length-1;o>=0;o--){for(var s=n[o].id,a=!1,r=0;r<t.length;r++)if(t[r].id==s){a=!0;break}a&&n.splice(o,1)}Array.prototype.push.apply(t,n),e.widgetData.items=t},initPoll:function(){var t=this;null==t.pollIntervalObj&&(t.pollIntervalObj=setTimeout(t.thisContext(t.pollFunction),t.options.pollInterval))},pollFunction:function(){var t=this,e=!1;if(null!==t.state.lastPollDate){var n=Math.abs(t.state.lastPollDate-new Date),o=Math.floor(n/1e3/60);e=o>=t.options.pollResetMinutes}e?t.reloadWidget():(t.load({isPoll:!0}),t.state.lastPollDate=new Date,t.pollIntervalObj=setTimeout(t.thisContext(t.pollFunction),t.options.pollInterval))},stopPoll:function(){var t=this;clearTimeout(t.pollIntervalObj),t.pollIntervalObj=null},reloadWidget:function(){var t=this;t.stopPoll(),t.state.offsetTimestamp=null,t.state.newestTimestamp=null,t.state.unseenCount=0,t.state.unreadMessagesCount=0,t.state.lastPollDate=null,t.load()},render:function(){var t=this;return t.state.hasUnrenderedItems&&(t.state.hasUnrenderedItems=!1,o.prototype.render.call(t),s.log("# ## Rendered notification widget "+t.widgetId)),$.cosinnus.renderMomentDataDate(),t},afterRender:function(){var t=this;t.state.unseenCount&&t.state.unseenCount>0?t.$notificationButtonEl.find(".message-counter").text(t.state.unseenCount).show():t.$notificationButtonEl.find(".message-counter").hide(),t.state.unreadMessagesCount&&t.state.unreadMessagesCount>0?t.$messagesButtonEl.find(".message-counter").text(t.state.unreadMessagesCount).show():t.$messagesButtonEl.find(".message-counter").hide()},getTemplateData:function(){var t=this,e=o.prototype.getTemplateData.call(t);return e},onNotificationButtonClicked:function(t){var e=this;this.$notificationButtonEl.hasClass("collapsed")&&e.state.newestTimestamp&&e.markSeen()},markSeen:function(){var t=this,e="/profile/api/alerts/markseen/"+t.state.newestTimestamp+"/";$.ajax(e,{type:"POST",timeout:15e3,success:function(e,n,o){
t.markSeenLocal(),s.log("Successfully marked as seen!")},error:function(e,n){t.markSeenLocal(),s.log("Error during marking as seen!")}})},markSeenLocal:function(){var t=this;t.state.unseenCount=0,t.afterRender(),t.updatePageTitle()},updatePageTitle:function(){var t=this,e="",n=t.state.unseenCount+t.state.unreadMessagesCount;n>0&&(e="("+n+") "),document.title=e+t.state.originalPageTitle}})},function(t,e,n){"use strict";var o=n(4),s=n(5);t.exports=o.extend({App:null,fetchURL:null,widgetId:null,widgetData:{},defaults:{isMovable:!1,isHidable:!1,loadMoreEnabled:!1,state:{sortIndex:0,hasMore:!1,offsetTimestamp:null}},events:{"click .show-more":"onShowMoreClicked"},initialize:function(t,e){var n=this;n.app=e,o.prototype.initialize.call(n,t),n.widgetId=n.getWidgetId()},getWidgetId:function(){alert('ImproperlyImplemented: this view must implement the function "setWidgetId"!')},getParamsForFetchRequest:function(){var t=this,e={};return t.options.loadMoreEnabled&&t.state.offsetTimestamp&&(e={offset_timestamp:t.state.offsetTimestamp,page_size:5}),{urlSuffix:null,urlParams:e}},load:function(t){var e=this;return new Promise(function(n,o){e.loadData(t).then(e.thisContext(e.render)).then(function(){s.log("# ### loaded and resolving widget "+e.widgetId),n()})})},loadData:function(t){var e=this;return new Promise(function(n,o){e.state.hadErrors=!1,e.state.errorResponseText=null;var a=e.getParamsForFetchRequest(t),r=e.fetchURL+(a.urlSuffix?a.urlSuffix+"/":"");a.urlParams&&(r+="?"+$.param(a.urlParams)),$.ajax(r,{type:"GET",success:function(t,n,o){s.log("# # Fetched data for widget "+e.widgetId),200==o.status?e.handleData(t):e.state.hadErrors=!0},error:function(t,n){e.state.hadErrors=!0,e.state.errorResponseText=t.responseText},complete:function(t,e){n()}})})},handleData:function(t){var e=this,n=t.data;e.state.offsetTimestamp?Array.prototype.push.apply(e.widgetData.items,n.items):e.widgetData=n,e.options.loadMoreEnabled&&("has_more"in n&&(e.state.hasMore=n.has_more),"offset_timestamp"in n&&(e.state.offsetTimestamp=n.offset_timestamp))},onShowMoreClicked:function(t){this.load().then(function(){$.cosinnus.renderMomentDataDate()})},getTemplateData:function(){var t=this,e=o.prototype.getTemplateData(t),e=_.extend(e,t.state,t.options,t.widgetData);return e}})},function(t,e,n){var o,s=n(8);o=s.currentEnv?s.currentEnv:s.currentEnv=new s.Environment([],void 0);var a=(n(9)(o),s.webpackDependencies||(s.webpackDependencies={}));a["include/macros.html"]=n(23),a["include/notification-item.html"]=n(56);var r=n(10);!function(){(s.nunjucksPrecompiled=s.nunjucksPrecompiled||{})["cosinnus/templates/cosinnus/universal/navbar/notification-widget.html"]=function(){function t(t,e,n,o,s){var a=null,r=null,i="";try{var l=null;t.getTemplate("include/macros.html",!1,"cosinnus/templates/cosinnus/universal/navbar/notification-widget.html",!1,function(u,c){return u?void s(u):void c.getExported(function(u,c){return u?void s(u):(e.setVariable("macros",c),i+="\n",void t.getTemplate("include/notification-item.html",!1,"cosinnus/templates/cosinnus/universal/navbar/notification-widget.html",!1,function(u,c){return u?void s(u):void c.getExported(function(u,c){if(u)return void s(u);if(e.setVariable("notification_macros",c),i+='\n\n<div class="nav-column nav-column-fullwidth">\n    \n\t',o.contextOrFrameLookup(e,n,"hadErrors"))i+='\n\t    <ul class="item-list">\n\t        <li>\n\t            <span class="list-item list-item-link list-item-center no-select" href="#" role="button" titledby=".item-text"> \n\t                <div class="item-text">\n\t                    ',i+="\n\t                    ",i+=o.suppressValue(t.getExtension("translation").run(e,"There was an error loading the widget"),t.opts.autoescape),i+="\n\t                </div>\n\t            </span>\n\t        </li>\n\t    </ul>\n\t";else{if(i+='\n        <h2 class="headline headline-condensed">\n            ',i+="\n            ",i+=o.suppressValue(t.getExtension("translation").run(e,"Notifications"),t.opts.autoescape),i+='\n        </h2>\n        \n        <ul class="item-list item-list-divided bordered">\n            ',t.getFilter("length").call(e,o.contextOrFrameLookup(e,n,"items"))>0){i+="\n                ",n=n.push();var p=o.contextOrFrameLookup(e,n,"items");if(p)for(var d=p.length,m=0;m<p.length;m++){var f=p[m];n.set("item",f),n.set("loop.index",m+1),n.set("loop.index0",m),n.set("loop.revindex",d-m),n.set("loop.revindex0",d-m-1),n.set("loop.first",0===m),n.set("loop.last",m===d-1),n.set("loop.length",d),i+="\n                    ",i+=o.suppressValue((a=25,r=57,o.callWrap(o.memberLookup(c,"notificationItem"),'notification_macros["notificationItem"]',e,[o.memberLookup(f,"text"),o.memberLookup(f,"url"),o.memberLookup(f,"user_icon_or_image_url"),o.makeKeywordArgs({subtext:o.memberLookup(f,"group"),subtextIcon:o.memberLookup(f,"group_icon"),actionTime:o.memberLookup(f,"action_datetime"),annotationIcon:o.memberLookup(f,"item_icon_or_image_url"),is_emphasized:o.memberLookup(f,"is_emphasized"),subItems:o.memberLookup(f,"sub_items"),itemId:o.memberLookup(f,"id"),makeSafe:!0})])),t.opts.autoescape),i+="\n                "}n=n.pop(),i+="\n                ",o.contextOrFrameLookup(e,n,"loadMoreEnabled")&&o.contextOrFrameLookup(e,n,"hasMore")&&(i+='\n                    <li>\n                        <a class="list-item list-item-link show-more" role="button" titledby=".item-text"> \n                            <div class="item-icon item-icon-offset">\n                                <i class="fas fa-fw"></i>\n                            </div>\n                            <div class="item-text">\n                                ',i+="\n                                ",i+=o.suppressValue(t.getExtension("translation").run(e,"Show more"),t.opts.autoescape),i+="\n                            </div>\n                        </a>\n                    </li>\n                "),i+="\n            "}else i+='\n                <li>\n                    <span class="list-item list-item-link no-select" href="#" role="button" titledby=".item-text"> \n                        <div class="item-text">\n                            ',i+="\n                            ",i+=o.suppressValue(t.getExtension("translation").run(e,"No current notifications"),t.opts.autoescape),i+="\n                        </div>\n                    </span>\n                </li>\n            ";i+="\n        </ul>\n        \n\t"}i+="\n\t\n</div>\n",l?l.rootRenderFunc(t,e,n,o,s):s(null,i)})}))})})}catch(t){s(o.handleError(t,a,r))}}return{root:t}}()}(),t.exports=r(s,o,s.nunjucksPrecompiled["cosinnus/templates/cosinnus/universal/navbar/notification-widget.html"],a)},function(t,e,n){var o,s=n(8);o=s.currentEnv?s.currentEnv:s.currentEnv=new s.Environment([],void 0);var a=(n(9)(o),s.webpackDependencies||(s.webpackDependencies={}));a["include/macros.html"]=n(23);var r=n(10);!function(){(s.nunjucksPrecompiled=s.nunjucksPrecompiled||{})["cosinnus/templates/cosinnus/universal/include/notification-item.html"]=function(){function t(t,e,n,o,s){var a=null,r=null,i="";try{var l=null;t.getTemplate("include/macros.html",!1,"cosinnus/templates/cosinnus/universal/include/notification-item.html",!1,function(u,c){return u?void s(u):void c.getExported(function(u,c){if(u)return void s(u);e.setVariable("macros",c),i+="\n\n";var p=o.makeMacro(["text","url","icon"],["subtext","subtextIcon","actionTime","annotationIcon","is_emphasized","subItems","itemId","inactive","makeSafe"],function(s,i,l,u){n=n.push(!0),u=u||{},u.hasOwnProperty("caller")&&n.set("caller",u.caller),n.set("text",s),n.set("url",i),n.set("icon",l),n.set("subtext",u.hasOwnProperty("subtext")?u.subtext:o.contextOrFrameLookup(e,n,"null")),n.set("subtextIcon",u.hasOwnProperty("subtextIcon")?u.subtextIcon:o.contextOrFrameLookup(e,n,"null")),n.set("actionTime",u.hasOwnProperty("actionTime")?u.actionTime:o.contextOrFrameLookup(e,n,"null")),n.set("annotationIcon",u.hasOwnProperty("annotationIcon")?u.annotationIcon:o.contextOrFrameLookup(e,n,"null")),n.set("is_emphasized",!!u.hasOwnProperty("is_emphasized")&&u.is_emphasized),n.set("subItems",u.hasOwnProperty("subItems")?u.subItems:[]),n.set("itemId",u.hasOwnProperty("itemId")?u.itemId:o.contextOrFrameLookup(e,n,"null")),n.set("inactive",!!u.hasOwnProperty("inactive")&&u.inactive),n.set("makeSafe",!u.hasOwnProperty("makeSafe")||u.makeSafe);var p="";if(p+='\n\n    <li class="list-item-group">\n        <div class="main-item">\n            <a class="list-item list-item-extended ',o.contextOrFrameLookup(e,n,"is_emphasized")&&(p+="list-item-emphasized "),o.contextOrFrameLookup(e,n,"inactive")&&(p+="inactive no-select"),p+='" href="',p+=o.suppressValue(i,t.opts.autoescape),p+='" role="button" titledby=".item-text-primary"> \n                <div class="item-icon item-icon-offset item-icon-vertical-center">\n                    ',l&&o.inOperator("/",l)?(p+='\n                        <img src="',p+=o.suppressValue(l,t.opts.autoescape),p+='"></img>\n                    '):(p+='\n                        <i class="fas fa-fw ',p+=o.suppressValue(l,t.opts.autoescape),p+='"></i>\n                    '),p+='\n                </div>\n                <div class="item-text item-text-dual">\n                    <div class="item-text-primary">\n                        ',o.contextOrFrameLookup(e,n,"makeSafe")?(p+="\n                            ",p+=o.suppressValue(t.getFilter("safe").call(e,s),t.opts.autoescape),p+="\n                        "):(p+="\n                            ",p+=o.suppressValue(s,t.opts.autoescape),p+=" \n                        "),p+="\n                    </div>\n                    ",(o.contextOrFrameLookup(e,n,"subtext")||o.contextOrFrameLookup(e,n,"actionTime"))&&(p+='\n                        <div class="item-text-tertiary">\n                            ',o.contextOrFrameLookup(e,n,"actionTime")&&(p+='\n                                <i class="fas fa-fw fa-clock"></i>\n                                <span class="moment-data-date" data-date="',p+=o.suppressValue(o.contextOrFrameLookup(e,n,"actionTime"),t.opts.autoescape),p+='"></span>\n                                <span class="item-text-inline-spacer"></span>\n                            '),p+="\n                            ",o.contextOrFrameLookup(e,n,"subtext")&&(p+="\n                                ",o.contextOrFrameLookup(e,n,"subtextIcon")&&(p+='\n                                    <i class="fas fa-fw ',p+=o.suppressValue(o.contextOrFrameLookup(e,n,"subtextIcon"),t.opts.autoescape),p+='"></i>\n                                '),p+="\n                                ",p+=o.suppressValue(o.contextOrFrameLookup(e,n,"subtext"),t.opts.autoescape),p+="\n                            "),p+="\n                        </div>\n                    "),p+="\n                </div>\n                ",o.contextOrFrameLookup(e,n,"annotationIcon")&&(p+='\n                    <div class="right-side-annotation item-icon item-icon-vertical-center item-icon-fixed-width">\n                        ',o.contextOrFrameLookup(e,n,"annotationIcon")&&o.inOperator("/",o.contextOrFrameLookup(e,n,"annotationIcon"))?(p+='\n                            <img src="',p+=o.suppressValue(o.contextOrFrameLookup(e,n,"annotationIcon"),t.opts.autoescape),p+='"></img>\n                        '):(p+='\n                            <i class="fas fa-fw ',p+=o.suppressValue(o.contextOrFrameLookup(e,n,"annotationIcon"),t.opts.autoescape),p+='"></i>\n                        '),p+="\n                    </div>\n                "),p+="\n            </a>\n            \n            ",t.getFilter("length").call(e,o.contextOrFrameLookup(e,n,"subItems"))>0&&(p+='\n                <a class="list-item-group-dropdown-link collapsed" data-toggle="collapse" href="#notification-collapse-',p+=o.suppressValue(o.contextOrFrameLookup(e,n,"itemId"),t.opts.autoescape),p+='" \n                           role="button" aria-expanded="false" aria-controls="notification-collapse-',p+=o.suppressValue(o.contextOrFrameLookup(e,n,"itemId"),t.opts.autoescape),p+='">\n                    <i class="fas fa-fw fa-caret-right show-collapsed"></i>\n                    <i class="fas fa-fw fa-caret-down show-uncollapsed"></i>\n                </a>\n            '),p+="\n        </div>\n        \n        ",t.getFilter("length").call(e,o.contextOrFrameLookup(e,n,"subItems"))>0){p+='\n\t        <div class="sub-item-container collapse" id="notification-collapse-',p+=o.suppressValue(o.contextOrFrameLookup(e,n,"itemId"),t.opts.autoescape),p+='">\n\t            <ul class="item-list item-list-divided">\n\t                ',n=n.push();var d=o.contextOrFrameLookup(e,n,"subItems");if(d)for(var m=d.length,f=0;f<d.length;f++){var h=d[f];n.set("subItem",h),n.set("loop.index",f+1),n.set("loop.index0",f),n.set("loop.revindex",m-f),n.set("loop.revindex0",m-f-1),n.set("loop.first",0===f),n.set("loop.last",f===m-1),n.set("loop.length",m),p+="\n\t                    ",p+=o.suppressValue((a=62,r=37,o.callWrap(o.memberLookup(c,"listItem"),'macros["listItem"]',e,[o.memberLookup(h,"title"),o.memberLookup(h,"url"),o.memberLookup(h,"icon_or_image_url"),o.makeKeywordArgs({padded:!0})])),t.opts.autoescape),p+="\n\t                "}n=n.pop(),p+="\n\t            </ul>\n\t        </div>\n        "}return p+="\n    </li>\n",n=n.pop(),new o.SafeString(p)});e.addExport("notificationItem"),e.setVariable("notificationItem",p),i+="\n",l?l.rootRenderFunc(t,e,n,o,s):s(null,i)})})}catch(t){s(o.handleError(t,a,r))}}return{root:t}}()}(),t.exports=r(s,o,s.nunjucksPrecompiled["cosinnus/templates/cosinnus/universal/include/notification-item.html"],a)},function(t,e,n){"use strict";var o=n(4),s=n(58),a=n(61),r=n(64),i=n(66),l=n(68),u=n(70),c=n(72),p=n(74),d=n(5);t.exports=o.extend({app:null,template:null,el:null,$el:null,leftBar:".dashboard-left-bar-content",$leftBar:null,rightBar:".dashboard-right-bar-content",$rightBar:null,timeline:".timeline-root",$timeline:null,timelineView:null,groupWidgetView:null,ideasWidgetView:null,starredUsersWidgetView:null,starredObjectsWidgetView:null,followedObjectsWidgetView:null,uiPrefsView:null,typedContentWidgetTypes:["pads","files"].concat(COSINNUS_ROCKET_ENABLED||!COSINNUS_MESSAGES_ENABLED?[]:["messages"]).concat(COSINNUS_CLOUD_DASHBOARD_WIDGET_ENABLED?["cloud_files"]:[]).concat(["events","todos","polls"]).concat(COSINNUS_V2_DASHBOARD_SHOW_MARKETPLACE?["offers"]:[]),typedContentWidgets:{},uiPrefKeyRightBarWidget:"dashboard_widgets_sort_key__",defaults:{state:{}},events:{},initialize:function(t,e){var n=this;n.app=e,o.prototype.initialize.call(n,t),n.uiPrefsView=new p(n.options.uiPrefs),n.el=".v2-dashboard",n.$el=$(n.el),n.$el.removeClass("loading"),n.$leftBar=n.$el.find(n.leftBar),n.$rightBar=n.$el.find(n.rightBar),n.$timeline=n.$el.find(n.timeline),n.loadLeftBar(),n.loadRightBar(),n.loadTimeline()},loadLeftBar:function(){var t=this;t.groupWidgetView=new a({el:t.$el.find(".group-widget-root")},t.app);var e=[t.groupWidgetView.load()];COSINNUS_IDEAS_ENABLED&&(t.ideasWidgetView=new r({el:t.$el.find(".ideas-widget-root")},t.app),e.push(t.ideasWidgetView.load())),t.starredUsersWidgetView=new i({el:t.$el.find(".starred-users-widget-root")},t.app),e.push(t.starredUsersWidgetView.load()),t.starredObjectsWidgetView=new l({el:t.$el.find(".starred-objects-widget-root")},t.app),e.push(t.starredObjectsWidgetView.load()),t.followedObjectsWidgetView=new u({el:t.$el.find(".followed-objects-widget-root")},t.app),e.push(t.followedObjectsWidgetView.load()),Promise.all(e).then(function(){t.$leftBar.show();var e=$("#userdashboard-map-iframe");e.length>0&&e.attr("src",e.attr("src_delayed"))})},loadRightBar:function(){var t=this,e=[];$.each(t.typedContentWidgetTypes,function(n,o){t.typedContentWidgets[o]=new c({elParent:t.$el.find(".typed-widgets-root"),type:o,sortIndex:t.uiPrefsView.getUiPref(t.uiPrefKeyRightBarWidget+o)},t.app),e.push(t.typedContentWidgets[o].load())}),Promise.all(e).then(function(){$.cosinnus.renderMomentDataDate(),t.sortRightBarWidgets(),t.manageWidgetConditions(),t.$rightBar.show(),d.log("# #### showing right bar.")})},sortRightBarWidgets:function(){this.$rightBar.find("div.widget-content").sortElements(function(t,e){return $(t).attr("data-sort-index")>$(e).attr("data-sort-index")?1:-1})},manageWidgetConditions:function(){this.uiPrefsView.getUiPref("timeline__hide_welcome_widget_box")?this.$rightBar.find(".welcome_widget_box").remove():this.$rightBar.find(".welcome_widget_box").show()},loadTimeline:function(){var t=this,e=t.$el.find(".dashboard-welcome-frame");if(t.uiPrefsView.getUiPref("timeline__hide_welcome_screen")||0==e.length){e.length>0&&e.remove();var n=t.$el.find(".dashboard-announcement-frame");n.length>0&&n.show()}else e.show();t.timelineView=new s({el:t.$el.find(".timeline-root"),forceOnlyMine:t.options.forceOnlyMine},t.app,t.uiPrefsView),t.timelineView.load()},checkQuickSearchFocusOut:function(t){this.$el.hasClass("active")&&!this.el.contains(t.target)&&(this.$el.removeClass("active"),document.addEventListener("click",this.thisContext(this.checkQuickSearchFocusOut)))},moveRightSideWidget:function(t,e){var n=this,o=n.$rightBar.find('.widget-content[data-content-type="'+t+'"]');if(0!=o.length){var s=e?o.prev(".widget-content"):o.next(".widget-content");if(0!=s.length){var a=o.attr("data-sort-index"),r=s.attr("data-sort-index");o.attr("data-sort-index",r),s.attr("data-sort-index",a),n.sortRightBarWidgets();var i={};i[n.uiPrefKeyRightBarWidget+o.attr("data-content-type")]=r,i[n.uiPrefKeyRightBarWidget+s.attr("data-content-type")]=a,n.uiPrefsView.saveUiPrefs(i)}}}})},function(t,e,n){"use strict";var o=n(4),s=n(5);t.exports=o.extend({app:null,template:n(59),fetchURL:"/dashboard/api/timeline/",uiPrefsView:null,defaults:{forceOnlyMine:!1,onlyMine:!0,onlyForum:!0,onlyPublic:!1,state:{loading:!1,currentRequest:null,hadErrors:!1,itemsLoaded:0,offsetTimestamp:null,hasMore:!0}},events:{"change .toggle-only-mine":"toggleOnlyMineClicked","change .toggle-only-forum":"toggleOnlyForumClicked","change .toggle-only-public":"toggleOnlyPublicClicked","click .retry-load":"retryLoadAfterErrors","click .show-all-comments":"showAllCommentsForItem","click .comment-form :not(textarea)":"delegateTextInputClick","keypress .comment-form textarea":"commentTextboxKeyPressed"},initialize:function(t,e,n){var s=this;s.app=e,o.prototype.initialize.call(s,t),s.uiPrefsView=n,s.options.onlyMine=s.uiPrefsView.getUiPref("timeline__only_mine"),s.options.onlyForum=s.uiPrefsView.getUiPref("timeline__only_forum"),s.options.onlyPublic=s.uiPrefsView.getUiPref("timeline__only_public"),s.initializeParams(),s.render()},initializeParams:function(){var t=this;t.state.itemsLoaded=0,t.state.offsetTimestamp=null,t.state.hasMore=!0},getParamsForFetchRequest:function(){var t=this,e={only_mine:t.options.forceOnlyMine||t.options.onlyMine,only_forum:t.options.onlyForum,only_public:t.options.onlyPublic};return t.state.offsetTimestamp&&(e.offset_timestamp=t.state.offsetTimestamp),{urlSuffix:null,urlParams:e}},render:function(){var t=this;return o.prototype.render.call(t),s.log("*** Rendered timeline! ***"),t},resetAndLoad:function(){var t=this;t.state.currentRequest&&(t.state.currentRequest.abort(),t.state.currentRequest=null),t.state.loading=!1,t.state.hadErrors=!1,t.initializeParams(),t.render(),t.load()},retryLoadAfterErrors:function(){var t=this;t.state.hadErrors=!1,t.load()},showAllCommentsForItem:function(t){var e=$(t.target);e.parents(".timeline-item-comments").find(".shown-when-more").hide(),e.parents(".timeline-item-comments").find(".comment-hidden").fadeIn()},delegateTextInputClick:function(t){$(t.target).parents(".comment-form").find("textarea").focus()},commentTextboxKeyPressed:function(t){if(13==t.keyCode&&!t.shiftKey&&!t.ctrlKey){var e=$(t.target).parents("form");e.hasClass("disabled")||e.submit(),t.preventDefault()}},load:function(){var t=this;if(!t.state.loading&&!t.state.hadErrors&&t.state.hasMore)return new Promise(function(e,n){t.state.loading=!0,t.showLoadingPlaceholder(),t.hideErrorMessage();var o=function(){t.state.loading=!1,t.hideLoadingPlaceholder(),e()};t.loadData().then(function(e){s.log("# timeline received data and will handle them"),t.enableInfiniteScroll(),t.handleData(e),o()}).catch(function(e){t.handleError(e),o()})})},loadData:function(){var t=this;return new Promise(function(e,n){var o=t.getParamsForFetchRequest(),s=t.fetchURL+(o.urlSuffix?o.urlSuffix+"/":"");o.urlParams&&(s+="?"+$.param(o.urlParams)),t.state.currentRequest=$.ajax(s,{type:"GET",success:function(t,o,s){200==s.status?e(t.data):n(s.statusText)},error:function(t,e){n(e)},complete:function(){t.state.currentRequest=null}})})},handleData:function(t){var e=this;s.log("# # Fetched data for timeline"),s.log(t),t.count>0&&e.renderLoadedItems(t.items),1==t.has_more?(e.state.hasMore=!0,e.state.offsetTimestamp=t.last_timestamp):(e.state.hasMore=!1,e.showFinalDot(),e.disableInfiniteScroll())},renderLoadedItems:function(t){var e=this,n=e.$el.find(".timeline");$.each(t,function(t,e){n.append(e)}),$.cosinnus.renderMomentDataDate(),$.cosinnus.truncatedTextfield(),e.removeEmptyDivs()},handleError:function(t){var e=this;s.log("# # Fetched data for timeline"),e.disableInfiniteScroll(),e.showErrorMessage()},showErrorMessage:function(t){this.$el.find(".timeline-error-message").show()},hideErrorMessage:function(){this.$el.find(".timeline-error-message").hide()},showLoadingPlaceholder:function(){var t=this.$el.height();this.$el.find(".timeline-placeholder-frame").css({top:t}).show()},hideLoadingPlaceholder:function(){this.$el.find(".timeline-placeholder-frame").hide()},showFinalDot:function(){this.$el.find(".timeline-final-dot").show()},enableInfiniteScroll:function(){var t=this;$(window).off("scroll").on("scroll",t.thisContext(this.onScroll))},disableInfiniteScroll:function(){$(window).off("scroll")},toggleOnlyMineClicked:function(t){var e=this;e.options.forceOnlyMine||(e.options.onlyMine=t.target.checked,e.uiPrefsView.saveUiPrefs({timeline__only_mine:e.options.onlyMine}),e.resetAndLoad())},toggleOnlyForumClicked:function(t){var e=this;e.options.forceOnlyMine||(e.options.onlyForum=t.target.checked,e.uiPrefsView.saveUiPrefs({timeline__only_forum:e.options.onlyForum}),e.resetAndLoad())},toggleOnlyPublicClicked:function(t){var e=this;e.options.forceOnlyMine||(e.options.onlyPublic=t.target.checked,e.uiPrefsView.saveUiPrefs({timeline__only_public:e.options.onlyPublic}),e.resetAndLoad())},removeEmptyDivs:function(){var t=this;t.$el.find(".remove-if-prev-empty").each(function(){var t=$(this);0==t.prev().text().replace(/\s/g,"").length&&t.remove()}),t.$el.find(".remove-if-next-empty").each(function(){var t=$(this);0==t.next().text().replace(/\s/g,"").length&&t.remove()}),t.$el.find(".remove-if-empty").each(function(){var t=$(this);0==t.text().replace(/\s/g,"").length&&t.remove()})},onScroll:function(t){var e=this;if(e.$el.is(":visible")){var n=$(window);n.height()+n.scrollTop()>=$(document).height()-250&&e.load()}}})},function(t,e,n){var o,s=n(8);o=s.currentEnv?s.currentEnv:s.currentEnv=new s.Environment([],void 0);var a=(n(9)(o),s.webpackDependencies||(s.webpackDependencies={}));a["userdashboard/timeline-item-placeholder"]=n(60);var r=n(10);!function(){(s.nunjucksPrecompiled=s.nunjucksPrecompiled||{})["cosinnus/templates/cosinnus/universal/userdashboard/timeline.html"]=function(){function t(t,e,n,o,s){var a=null,r=null,i="";try{var l=null;o.contextOrFrameLookup(e,n,"forceOnlyMine")||(i+='\n\t<div class="timeline-controls">\n\t\n\t    <h2 class="headline inlayed-headline">\n\t        ',i+="\n\t        ",i+=o.suppressValue(t.getExtension("translation").run(e,"Filter"),t.opts.autoescape),i+='\n\t    </h2>\n\t    \n        <table class="onoffswitch-frame">\n            <tr>\n                <td>\n                    <div class="onoffswitch">\n                        <input type="checkbox" name="onoffswitch-only-forum"\n                             class="onoffswitch-checkbox toggle-only-forum" id="check-only-forum" \n                             ',o.contextOrFrameLookup(e,n,"onlyForum")&&(i+="checked"),i+='>\n                        <label class="onoffswitch-label" for="check-only-forum">\n                            <span class="onoffswitch-inner"></span>\n                            <span class="onoffswitch-switch"></span>\n                        </label>\n                    </div>\n                </td>\n                <td class="onoffswitch-text-label text-bold text-small">\n                    ',i+="\n                    ",i+=o.suppressValue(t.getExtension("translation").run(e,"Content from the Forum"),t.opts.autoescape),i+='\n                </td>\n            </tr>\n        </table>\n\t\n\t\t<table class="onoffswitch-frame">\n            <tr>\n                <td>\n                    <div class="onoffswitch">\n                        <input type="checkbox" name="onoffswitch-only-mine"\n                             class="onoffswitch-checkbox toggle-only-mine" id="check-only-mine" \n                             ',o.contextOrFrameLookup(e,n,"onlyMine")&&(i+="checked"),i+='>\n                        <label class="onoffswitch-label" for="check-only-mine">\n                            <span class="onoffswitch-inner"></span>\n                            <span class="onoffswitch-switch"></span>\n                        </label>\n                    </div>\n                </td>\n                <td class="onoffswitch-text-label text-bold text-small">\n                    ',i+="\n                    ",i+=o.suppressValue(t.getExtension("translation").run(e,"Content from my Groups and Projects"),t.opts.autoescape),i+='\n                </td>\n            </tr>\n        </table>\n        \n        <table class="onoffswitch-frame">\n            <tr>\n                <td>\n                    <div class="onoffswitch">\n                        <input type="checkbox" name="onoffswitch-only-public"\n                             class="onoffswitch-checkbox toggle-only-public" id="check-only-public" \n                             ',o.contextOrFrameLookup(e,n,"onlyPublic")&&(i+="checked"),i+='>\n                        <label class="onoffswitch-label" for="check-only-public">\n                            <span class="onoffswitch-inner"></span>\n                            <span class="onoffswitch-switch"></span>\n                        </label>\n                    </div>\n                </td>\n                <td class="onoffswitch-text-label text-bold text-small">\n                    ',o.contextOrFrameLookup(e,n,"COSINNUS_USER_EXTERNAL_USERS_FORBIDDEN")?(i+="\n                        ",i+="\n                        ",i+=o.suppressValue(t.getExtension("translation").run(e,"Platform content"),t.opts.autoescape),i+="\n                    "):(i+="\n                        ",i+="\n                        ",i+=o.suppressValue(t.getExtension("translation").run(e,"Public content"),t.opts.autoescape),i+="\n                    "),i+="\n                </td>\n            </tr>\n        </table>\n\t</div>\n"),i+='\n\n<div class="timeline">\n\t',i+='\n\t<div data-target="ajax-form-result-anchor" data-ajax-form-id="note-create-form"></div>\n</div>\n\n\n<div class="timeline-error-message" style="display: none;">\n\t<div>\n\t\t',i+="\n        ",i+=o.suppressValue(t.getExtension("translation").run(e,"We could not load more data at this time."),t.opts.autoescape),i+='\n\t\t<a href="#" class="retry-load">\n\t        ',i+="\n\t        ",i+=o.suppressValue(t.getExtension("translation").run(e,"Retry"),t.opts.autoescape),i+='\n\t    </a>\n    </div>\n</div>\n\n<div class="timeline-final-dot" style="display: none;">\n\t<div>\n\t\t<i class="fas fa-fw fa-circle"></i>\n\t</div>\n</div>\n\n<div class="timeline-placeholder-frame" style="display: none;">\n\t',t.getTemplate("userdashboard/timeline-item-placeholder",!1,"cosinnus/templates/cosinnus/universal/userdashboard/timeline.html",null,function(a,r){return a?void s(a):void r.render(e.getVariables(),n,function(a,r){return a?void s(a):(i+=r,i+="\n\t",void t.getTemplate("userdashboard/timeline-item-placeholder",!1,"cosinnus/templates/cosinnus/universal/userdashboard/timeline.html",null,function(a,r){return a?void s(a):void r.render(e.getVariables(),n,function(a,r){return a?void s(a):(i+=r,i+="\n\t",void t.getTemplate("userdashboard/timeline-item-placeholder",!1,"cosinnus/templates/cosinnus/universal/userdashboard/timeline.html",null,function(a,r){return a?void s(a):void r.render(e.getVariables(),n,function(a,r){return a?void s(a):(i+=r,i+="\n</div>\n",void(l?l.rootRenderFunc(t,e,n,o,s):s(null,i)))})}))})}))})})}catch(t){s(o.handleError(t,a,r))}}return{root:t}}()}(),t.exports=r(s,o,s.nunjucksPrecompiled["cosinnus/templates/cosinnus/universal/userdashboard/timeline.html"],a)},function(t,e,n){var o,s=n(8);o=s.currentEnv?s.currentEnv:s.currentEnv=new s.Environment([],void 0);var a=(n(9)(o),s.webpackDependencies||(s.webpackDependencies={})),r=n(10);!function(){(s.nunjucksPrecompiled=s.nunjucksPrecompiled||{})["cosinnus/templates/cosinnus/universal/userdashboard/timeline-item-placeholder.html"]=function(){function t(t,e,n,o,s){var a=null,r=null,i="";try{var l=null;i+='<div class="timeline-item placeholder">\n\t\n\t<div class="timeline-item-row header">\n\t\t<div class="header-avatar">\n\t\t\t<div class="animated-background image"></div>\n\t\t</div>\n\t\t<div class="header-info">\n\t\t\t<div class="item-info">\n\t\t\t\t<div class="animated-background regular-line w1"></div>\n\t\t\t</div>\n\t\t\t<div class="item-date pale-color">\n\t\t\t\t<div class="animated-background thin-line w2"></div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n\t\n\t<div class="timeline-item-row body">\n\t\t<div class="animated-background regular-line w3"></div>\n\t\t<div class="animated-background regular-line w4"></div>\n\t\t<div class="animated-background regular-line w5"></div>\n\t\t<div class="placeholder-spacer"></div>\n\t</div>\n\t\n</div>',l?l.rootRenderFunc(t,e,n,o,s):s(null,i)}catch(t){s(o.handleError(t,a,r))}}return{root:t}}()}(),t.exports=r(s,o,s.nunjucksPrecompiled["cosinnus/templates/cosinnus/universal/userdashboard/timeline-item-placeholder.html"],a)},function(t,e,n){"use strict";var o=n(54),s=n(5);t.exports=o.extend({app:null,template:n(62),fetchURL:"/dashboard/api/user_groups/",defaults:{state:{}},events:{},getWidgetId:function(){return"group-widget"},getParamsForFetchRequest:function(){return{urlSuffix:null,urlParams:{}}},render:function(){var t=this;return o.prototype.render.call(t),s.log("*** Rendered group-widget! ***"),t},getTemplateData:function(){var t=this,e=o.prototype.getTemplateData.call(t);return e}})},function(t,e,n){var o,s=n(8);o=s.currentEnv?s.currentEnv:s.currentEnv=new s.Environment([],void 0);var a=(n(9)(o),s.webpackDependencies||(s.webpackDependencies={}));a["userdashboard/base-widget"]=n(63),a["include/macros.html"]=n(23);var r=n(10);!function(){(s.nunjucksPrecompiled=s.nunjucksPrecompiled||{})["cosinnus/templates/cosinnus/universal/userdashboard/group-widget.html"]=function(){function t(t,e,n,o,s){var a=null,r=null,i="";try{var l=null;t.getTemplate("userdashboard/base-widget",!0,"cosinnus/templates/cosinnus/universal/userdashboard/group-widget.html",!1,function(a,r){if(a)return void s(a);l=r;for(var u in l.blocks)e.addBlock(u,l.blocks[u]);i+="\n",t.getTemplate("include/macros.html",!1,"cosinnus/templates/cosinnus/universal/userdashboard/group-widget.html",!1,function(a,r){return a?void s(a):void r.getExported(function(a,r){return a?void s(a):(e.setVariable("macros",r),i+="\n\n",void(l?function(t,e,n,o,s){s("")}:e.getBlock("title"))(t,e,n,o,function(a,r){return a?void s(a):(i+=r,i+="\n\n",void(l?function(t,e,n,o,s){s("")}:e.getBlock("content"))(t,e,n,o,function(a,r){return a?void s(a):(i+=r,void(l?l.rootRenderFunc(t,e,n,o,s):s(null,i)))}))}))})})})}catch(t){s(o.handleError(t,a,r))}}function e(t,e,n,o,s){var a=null,r=null,i="";try{i+="\n    ",i+="\n\t",i+=o.suppressValue(t.getExtension("translation").run(e,"Groups and Projects"),t.opts.autoescape),i+="\n",s(null,i)}catch(t){s(o.handleError(t,a,r))}}function n(t,e,n,o,s){var a=null,r=null,i="";
try{if(i+="\n\t\n\t",t.getFilter("length").call(e,o.contextOrFrameLookup(e,n,"group_clusters"))>0){i+='\n\t\t<ul class="item-list">\n\t\t\t',n=n.push();var l=o.contextOrFrameLookup(e,n,"group_clusters");if(l)for(var u=l.length,c=0;c<l.length;c++){var p=l[c];n.set("cluster",p),n.set("loop.index",c+1),n.set("loop.index0",c),n.set("loop.revindex",u-c),n.set("loop.revindex0",u-c-1),n.set("loop.first",0===c),n.set("loop.last",c===u-1),n.set("loop.length",u),i+="\n\t\t\t\t",n=n.push();var d=p;if(d)for(var m=d.length,f=0;f<d.length;f++){var h=d[f];n.set("item",h),n.set("loop.index",f+1),n.set("loop.index0",f),n.set("loop.revindex",m-f),n.set("loop.revindex0",m-f-1),n.set("loop.first",0===f),n.set("loop.last",f===m-1),n.set("loop.length",m),i+="\n\t\t\t\t\t",o.memberLookup(h,"hasmorelink")?(i+='\n\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t<a class="list-item list-item-link" href="#" role="button" titledby=".item-text"> \n\t\t\t\t\t\t\t\t<div id="more-link1" class="item-text">\n\t\t\t\t\t                ',i+="\n\t\t\t\t\t\t\t\t\t",i+=o.suppressValue(t.getExtension("translation").run(e,"Show more Projects of this Group"),t.opts.autoescape),i+="\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<a>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t"):(i+="\n\t\t\t\t\t\t",i+=o.suppressValue((a=24,r=22,o.callWrap(o.memberLookup(o.contextOrFrameLookup(e,n,"macros"),"listItem"),'macros["listItem"]',e,[o.memberLookup(h,"text"),o.memberLookup(h,"url"),o.memberLookup(h,"icon"),o.makeKeywordArgs({is_emphasized:o.memberLookup(h,"is_emphasized")})])),t.opts.autoescape),i+="\n\t\t\t\t\t"),i+="\n\t\t\t\t"}n=n.pop(),i+="\n\t\t\t\n\t\t\t\t",o.memberLookup(o.contextOrFrameLookup(e,n,"loop"),"last")||(i+="\n\t\t\t\t\t<li>\n\t\t\t\t\t\t<hr>\n\t\t\t\t\t</li>\n\t\t\t\t"),i+="\n\t\t\t"}n=n.pop(),i+="\n\t\t</ul>\n\t"}else i+='\n\t\t<div class="widget-info-box no-select">\n            ',i+="\n\t\t\t",i+=o.suppressValue(t.getExtension("translation").run(e,"Here you can find an overview of your Groups and Projects once you become active in one or more of them."),t.opts.autoescape),i+="\n\t\t\t<br/>\n\t\t\t<br/>\n            ",i+="\n\t\t\t",i+=o.suppressValue(t.getExtension("translation").run(e,"You can create Groups or Projects via the '+' button in the header."),t.opts.autoescape),i+="\n\t\t</div>\n\t";i+="\n\t\n",s(null,i)}catch(t){s(o.handleError(t,a,r))}}return{b_title:e,b_content:n,root:t}}()}(),t.exports=r(s,o,s.nunjucksPrecompiled["cosinnus/templates/cosinnus/universal/userdashboard/group-widget.html"],a)},function(t,e,n){var o,s=n(8);o=s.currentEnv?s.currentEnv:s.currentEnv=new s.Environment([],void 0);var a=(n(9)(o),s.webpackDependencies||(s.webpackDependencies={}));a["include/macros.html"]=n(23);var r=n(10);!function(){(s.nunjucksPrecompiled=s.nunjucksPrecompiled||{})["cosinnus/templates/cosinnus/universal/userdashboard/base-widget.html"]=function(){function t(t,e,n,o,s){var a=null,r=null,i="";try{var l=null;t.getTemplate("include/macros.html",!1,"cosinnus/templates/cosinnus/universal/userdashboard/base-widget.html",!1,function(a,r){return a?void s(a):void r.getExported(function(a,r){return a?void s(a):(e.setVariable("macros",r),i+='\n\n<div class="widget-content" ',void(l?function(t,e,n,o,s){s("")}:e.getBlock("attrs"))(t,e,n,o,function(a,r){return a?void s(a):(i+=r,i+=">\n\t",void(l?function(t,e,n,o,s){s("")}:e.getBlock("widget_dropdown"))(t,e,n,o,function(a,r){return a?void s(a):(i+=r,i+='\n\t\n\t<h2 class="headline">\n\t\t',void(l?function(t,e,n,o,s){s("")}:e.getBlock("title"))(t,e,n,o,function(a,r){return a?void s(a):(i+=r,i+="\n\t</h2>\n\t\n\t",o.contextOrFrameLookup(e,n,"hadErrors")?(i+='\n\t\t<ul class="item-list">\n\t\t\t<li>\n\t\t\t\t<span class="list-item list-item-link list-item-center no-select" href="#" role="button" titledby=".item-text"> \n\t\t    \t\t<div class="item-text">\n\t\t                ',i+="\n\t\t\t\t\t\t",i+=o.suppressValue(t.getExtension("translation").run(e,"There was an error loading the widget"),t.opts.autoescape),i+="\n\t\t    \t\t</div>\n\t\t\t\t</span>\n\t\t\t</li>\n\t\t</ul>\n\t"):(i+="\n\t\n\t\t",(l?function(t,e,n,o,s){s("")}:e.getBlock("content"))(t,e,n,o,function(t,e){return t?void s(t):(i+=e,void(i+="\n\t\t\n\t"))})),i+="\n</div>\n",void(l?l.rootRenderFunc(t,e,n,o,s):s(null,i)))}))}))}))})})}catch(t){s(o.handleError(t,a,r))}}function e(t,e,n,o,s){var a=null,r=null,i="";try{s(null,i)}catch(t){s(o.handleError(t,a,r))}}function n(t,e,n,o,s){var a=null,r=null,i="";try{i+="\n\t\t",(o.contextOrFrameLookup(e,n,"isMovable")||o.contextOrFrameLookup(e,n,"isHidable"))&&(i+='\n\t\t\t<div class="widget-dropdown v2-dropdown dropdown">\n\t\t    \t<a href="#" class="dropdown-toggle" data-toggle="dropdown">\n\t\t            <i class="fas fa-ellipsis-h"></i>\n\t\t        </a>\n\t\t        <ul class="dropdown-menu">\n\t\t\t\t\t<li>\n\t\t\t\t\t\t<a class="sort-up">\n\t\t                \t',i+="\n\t\t\t\t\t\t\t",i+=o.suppressValue(t.getExtension("translation").run(e,"Move up"),t.opts.autoescape),i+='\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</li>\n\t\t\t\t\t<li>\n\t\t\t\t\t\t<a class="sort-down">\n\t\t                \t',i+="\n\t\t\t\t\t\t\t",i+=o.suppressValue(t.getExtension("translation").run(e,"Move down"),t.opts.autoescape),i+="\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</li>\n\t\t        </ul>\n\t\t\t</div>\n\t\t"),i+="\n\t",s(null,i)}catch(t){s(o.handleError(t,a,r))}}function o(t,e,n,o,s){var a=null,r=null,i="";try{s(null,i)}catch(t){s(o.handleError(t,a,r))}}function s(t,e,n,o,s){var a=null,r=null,i="";try{if(i+="\n\t\t\t",t.getFilter("length").call(e,o.contextOrFrameLookup(e,n,"items"))>0){i+='\n\t\t\t\t<ul class="item-list">\n\t\t\t\t\t',n=n.push();var l=o.contextOrFrameLookup(e,n,"items");if(l)for(var u=l.length,c=0;c<l.length;c++){var p=l[c];n.set("item",p),n.set("loop.index",c+1),n.set("loop.index0",c),n.set("loop.revindex",u-c),n.set("loop.revindex0",u-c-1),n.set("loop.first",0===c),n.set("loop.last",c===u-1),n.set("loop.length",u),i+="\n\t\t\t\t\t\t",i+=o.suppressValue((a=48,r=22,o.callWrap(o.memberLookup(o.contextOrFrameLookup(e,n,"macros"),"listItem"),'macros["listItem"]',e,[o.memberLookup(p,"text"),o.memberLookup(p,"url"),o.memberLookup(p,"icon"),o.memberLookup(p,"subtext"),o.makeKeywordArgs({is_emphasized:o.memberLookup(p,"is_emphasized")})])),t.opts.autoescape),i+="\n\t\t\t\t\t"}n=n.pop(),i+="\n\t\t\t\t\t",o.contextOrFrameLookup(e,n,"loadMoreEnabled")&&o.contextOrFrameLookup(e,n,"hasMore")&&(i+='\n\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t<a class="list-item list-item-link show-more" role="button" titledby=".item-text"> \n\t\t\t\t\t\t\t\t<div class="item-icon item-icon-offset">\n\t\t\t\t\t    \t\t\t<i class="fas fa-fw"></i>\n\t\t\t\t\t    \t\t</div>\n\t\t\t\t\t\t\t\t<div class="item-text">\n\t\t\t\t\t                ',i+="\n\t\t\t\t\t\t\t\t\t",i+=o.suppressValue(t.getExtension("translation").run(e,"Show more"),t.opts.autoescape),i+="\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t"),i+="\n\t\t\t\t</ul>\n\t\t\t"}else i+="\n\t\t\t\t",e.getBlock("empty_content")(t,e,n,o,function(t,e){return t?void s(t):(i+=e,void(i+="\n\t\t\t"))});i+="\n\t\t",s(null,i)}catch(t){s(o.handleError(t,a,r))}}function a(t,e,n,o,s){var a=null,r=null,i="";try{i+='\n\t\t\t\t\t<li>\n\t\t\t\t\t\t<span class="list-item list-item-link list-item-center no-select" href="#" role="button" titledby=".item-text"> \n\t\t\t\t    \t\t<div class="item-text">\n\t\t\t\t                ',e.getBlock("empty_message")(t,e,n,o,function(t,e){return t?void s(t):(i+=e,i+="\n\t\t\t\t    \t\t</div>\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</li>\n\t\t\t\t",void s(null,i))})}catch(t){s(o.handleError(t,a,r))}}function r(t,e,n,o,s){var a=null,r=null,i="";try{i+="\n\t\t\t\t\t                ",i+="\n\t\t\t\t\t\t\t\t\t",i+=o.suppressValue(t.getExtension("translation").run(e,"There are no items yet"),t.opts.autoescape),i+="\n\t\t\t\t\t\t\t\t",s(null,i)}catch(t){s(o.handleError(t,a,r))}}return{b_attrs:e,b_widget_dropdown:n,b_title:o,b_content:s,b_empty_content:a,b_empty_message:r,root:t}}()}(),t.exports=r(s,o,s.nunjucksPrecompiled["cosinnus/templates/cosinnus/universal/userdashboard/base-widget.html"],a)},function(t,e,n){"use strict";var o=n(54),s=n(5);t.exports=o.extend({app:null,template:n(65),fetchURL:"/dashboard/api/user_liked_ideas/",defaults:{state:{}},events:{},getWidgetId:function(){return"ideas-widget"},getParamsForFetchRequest:function(){return{urlSuffix:null,urlParams:{}}},render:function(){var t=this;return o.prototype.render.call(t),s.log("*** Rendered ideas-widget! ***"),t},getTemplateData:function(){var t=this,e=o.prototype.getTemplateData.call(t);return e}})},function(t,e,n){var o,s=n(8);o=s.currentEnv?s.currentEnv:s.currentEnv=new s.Environment([],void 0);var a=(n(9)(o),s.webpackDependencies||(s.webpackDependencies={}));a["userdashboard/base-widget"]=n(63),a["include/macros.html"]=n(23);var r=n(10);!function(){(s.nunjucksPrecompiled=s.nunjucksPrecompiled||{})["cosinnus/templates/cosinnus/universal/userdashboard/ideas-widget.html"]=function(){function t(t,e,n,o,s){var a=null,r=null,i="";try{var l=null;t.getTemplate("userdashboard/base-widget",!0,"cosinnus/templates/cosinnus/universal/userdashboard/ideas-widget.html",!1,function(a,r){if(a)return void s(a);l=r;for(var u in l.blocks)e.addBlock(u,l.blocks[u]);i+="\n",t.getTemplate("include/macros.html",!1,"cosinnus/templates/cosinnus/universal/userdashboard/ideas-widget.html",!1,function(a,r){return a?void s(a):void r.getExported(function(a,r){return a?void s(a):(e.setVariable("macros",r),i+="\n\n",void(l?function(t,e,n,o,s){s("")}:e.getBlock("title"))(t,e,n,o,function(a,r){return a?void s(a):(i+=r,i+="\n\n",void(l?function(t,e,n,o,s){s("")}:e.getBlock("empty_content"))(t,e,n,o,function(a,r){return a?void s(a):(i+=r,void(l?l.rootRenderFunc(t,e,n,o,s):s(null,i)))}))}))})})})}catch(t){s(o.handleError(t,a,r))}}function e(t,e,n,o,s){var a=null,r=null,i="";try{i+="\n    ",i+="\n\t",i+=o.suppressValue(t.getExtension("translation").run(e,"Ideas I like"),t.opts.autoescape),i+="\n",s(null,i)}catch(t){s(o.handleError(t,a,r))}}function n(t,e,n,o,s){var a=null,r=null,i="";try{i+='\n\t<div class="widget-info-box no-select">\n        ',i+="\n\t\t",i+=o.suppressValue(t.getExtension("translation").run(e,"Here you can find an overview of Ideas you have liked."),t.opts.autoescape),i+="\n\t\t<br/>\n\t\t<br/>\n        ",i+="\n\t\t",i+=o.suppressValue(t.getExtension("translation").run(e,"You can create your own Ideas via the '+' button in the header or you can discover existing Ideas here"),t.opts.autoescape),i+=':\n\t\t<a href="/map/?people=false&events=false&projects=false&groups=false&conferences=false&ideas=true&organizations=false">\n\t\t    ',i+="\n\t\t\t",i+=o.suppressValue(t.getExtension("translation").run(e,"Discover"),t.opts.autoescape),i+="\n\t\t</a>\n\t</div>\n",s(null,i)}catch(t){s(o.handleError(t,a,r))}}return{b_title:e,b_empty_content:n,root:t}}()}(),t.exports=r(s,o,s.nunjucksPrecompiled["cosinnus/templates/cosinnus/universal/userdashboard/ideas-widget.html"],a)},function(t,e,n){"use strict";var o=n(54),s=n(5);t.exports=o.extend({app:null,template:n(67),fetchURL:"/dashboard/api/user_starred_users/",defaults:{state:{}},events:{},getWidgetId:function(){return"starred-users-widget"},getParamsForFetchRequest:function(){return{urlSuffix:null,urlParams:{}}},render:function(){var t=this;return o.prototype.render.call(t),s.log("*** Rendered ideas-widget! ***"),t},getTemplateData:function(){var t=this,e=o.prototype.getTemplateData.call(t);return e.title=COSINNUS_STARRED_USERS_LIST,e}})},function(t,e,n){var o,s=n(8);o=s.currentEnv?s.currentEnv:s.currentEnv=new s.Environment([],void 0);var a=(n(9)(o),s.webpackDependencies||(s.webpackDependencies={}));a["userdashboard/base-widget"]=n(63),a["include/macros.html"]=n(23);var r=n(10);!function(){(s.nunjucksPrecompiled=s.nunjucksPrecompiled||{})["cosinnus/templates/cosinnus/universal/userdashboard/starred-users-widget.html"]=function(){function t(t,e,n,o,s){var a=null,r=null,i="";try{var l=null;t.getTemplate("userdashboard/base-widget",!0,"cosinnus/templates/cosinnus/universal/userdashboard/starred-users-widget.html",!1,function(a,r){if(a)return void s(a);l=r;for(var u in l.blocks)e.addBlock(u,l.blocks[u]);i+="\n",t.getTemplate("include/macros.html",!1,"cosinnus/templates/cosinnus/universal/userdashboard/starred-users-widget.html",!1,function(a,r){return a?void s(a):void r.getExported(function(a,r){return a?void s(a):(e.setVariable("macros",r),i+="\n\n",void(l?function(t,e,n,o,s){s("")}:e.getBlock("title"))(t,e,n,o,function(a,r){return a?void s(a):(i+=r,i+="\n\n",void(l?function(t,e,n,o,s){s("")}:e.getBlock("content"))(t,e,n,o,function(a,r){return a?void s(a):(i+=r,void(l?l.rootRenderFunc(t,e,n,o,s):s(null,i)))}))}))})})})}catch(t){s(o.handleError(t,a,r))}}function e(t,e,n,o,s){var a=null,r=null,i="";try{i+="\n    ",i+=o.suppressValue(o.contextOrFrameLookup(e,n,"title"),t.opts.autoescape),i+="\n",s(null,i)}catch(t){s(o.handleError(t,a,r))}}function n(t,e,n,o,s){var a=null,r=null,i="";try{if(i+="\n    ",t.getFilter("length").call(e,o.contextOrFrameLookup(e,n,"items"))>0){i+='\n        <ul class="item-list">\n            ',n=n.push();var l=o.contextOrFrameLookup(e,n,"items");if(l)for(var u=l.length,c=0;c<l.length;c++){var p=l[c];n.set("item",p),n.set("loop.index",c+1),n.set("loop.index0",c),n.set("loop.revindex",u-c),n.set("loop.revindex0",u-c-1),n.set("loop.first",0===c),n.set("loop.last",c===u-1),n.set("loop.length",u),i+="\n            ",i+=o.suppressValue((a=11,r=35,o.callWrap(o.memberLookup(o.contextOrFrameLookup(e,n,"macros"),"starredlistItem"),'macros["starredlistItem"]',e,[p])),t.opts.autoescape),i+="\n            "}n=n.pop(),i+="\n        </ul>\n    "}else i+='\n    <div class="widget-info-box no-select">\n        ',i+="\n\t\t",i+=o.suppressValue(t.getExtension("translation").run(e,"Nothing here yet."),t.opts.autoescape),i+="\n\t</div>\n    ";i+="\n",s(null,i)}catch(t){s(o.handleError(t,a,r))}}return{b_title:e,b_content:n,root:t}}()}(),t.exports=r(s,o,s.nunjucksPrecompiled["cosinnus/templates/cosinnus/universal/userdashboard/starred-users-widget.html"],a)},function(t,e,n){"use strict";var o=n(54),s=n(5);t.exports=o.extend({app:null,template:n(69),fetchURL:"/dashboard/api/user_starred_objects/",defaults:{state:{}},events:{},getWidgetId:function(){return"starred-objects-widget"},getParamsForFetchRequest:function(){return{urlSuffix:null,urlParams:{}}},render:function(){var t=this;return o.prototype.render.call(t),s.log("*** Rendered ideas-widget! ***"),t},getTemplateData:function(){var t=this,e=o.prototype.getTemplateData.call(t);return e.title=COSINNUS_STARRED_OBJECTS_LIST,e}})},function(t,e,n){var o,s=n(8);o=s.currentEnv?s.currentEnv:s.currentEnv=new s.Environment([],void 0);var a=(n(9)(o),s.webpackDependencies||(s.webpackDependencies={}));a["userdashboard/base-widget"]=n(63),a["include/macros.html"]=n(23);var r=n(10);!function(){(s.nunjucksPrecompiled=s.nunjucksPrecompiled||{})["cosinnus/templates/cosinnus/universal/userdashboard/starred-objects-widget.html"]=function(){function t(t,e,n,o,s){var a=null,r=null,i="";try{var l=null;t.getTemplate("userdashboard/base-widget",!0,"cosinnus/templates/cosinnus/universal/userdashboard/starred-objects-widget.html",!1,function(a,r){if(a)return void s(a);l=r;for(var u in l.blocks)e.addBlock(u,l.blocks[u]);i+="\n",t.getTemplate("include/macros.html",!1,"cosinnus/templates/cosinnus/universal/userdashboard/starred-objects-widget.html",!1,function(a,r){return a?void s(a):void r.getExported(function(a,r){return a?void s(a):(e.setVariable("macros",r),i+="\n\n",void(l?function(t,e,n,o,s){s("")}:e.getBlock("title"))(t,e,n,o,function(a,r){return a?void s(a):(i+=r,i+="\n\n",void(l?function(t,e,n,o,s){s("")}:e.getBlock("content"))(t,e,n,o,function(a,r){return a?void s(a):(i+=r,void(l?l.rootRenderFunc(t,e,n,o,s):s(null,i)))}))}))})})})}catch(t){s(o.handleError(t,a,r))}}function e(t,e,n,o,s){var a=null,r=null,i="";try{i+="\n    ",i+=o.suppressValue(o.contextOrFrameLookup(e,n,"title"),t.opts.autoescape),i+="\n",s(null,i)}catch(t){s(o.handleError(t,a,r))}}function n(t,e,n,o,s){var a=null,r=null,i="";try{if(i+="\n    ",t.getFilter("length").call(e,o.contextOrFrameLookup(e,n,"items"))>0){i+='\n        <ul class="item-list">\n            ',n=n.push();var l=o.contextOrFrameLookup(e,n,"items");if(l)for(var u=l.length,c=0;c<l.length;c++){var p=l[c];n.set("item",p),n.set("loop.index",c+1),n.set("loop.index0",c),n.set("loop.revindex",u-c),n.set("loop.revindex0",u-c-1),n.set("loop.first",0===c),n.set("loop.last",c===u-1),n.set("loop.length",u),i+="\n            ",i+=o.suppressValue((a=11,r=35,o.callWrap(o.memberLookup(o.contextOrFrameLookup(e,n,"macros"),"starredlistItem"),'macros["starredlistItem"]',e,[p])),t.opts.autoescape),i+="\n            "}n=n.pop(),i+="\n        </ul>\n    "}else i+='\n    <div class="widget-info-box no-select">\n        ',i+="\n\t\t",i+=o.suppressValue(t.getExtension("translation").run(e,"Nothing here yet."),t.opts.autoescape),i+="\n\t</div>\n    ";i+="\n",s(null,i)}catch(t){s(o.handleError(t,a,r))}}return{b_title:e,b_content:n,root:t}}()}(),t.exports=r(s,o,s.nunjucksPrecompiled["cosinnus/templates/cosinnus/universal/userdashboard/starred-objects-widget.html"],a)},function(t,e,n){"use strict";var o=n(54),s=n(5);t.exports=o.extend({app:null,template:n(71),fetchURL:"/dashboard/api/user_followed_objects/",defaults:{state:{}},events:{},getWidgetId:function(){return"followed-objects-widget"},getParamsForFetchRequest:function(){return{urlSuffix:null,urlParams:{}}},render:function(){var t=this;return o.prototype.render.call(t),s.log("*** Rendered ideas-widget! ***"),t},getTemplateData:function(){var t=this,e=o.prototype.getTemplateData.call(t);return e}})},function(t,e,n){var o,s=n(8);o=s.currentEnv?s.currentEnv:s.currentEnv=new s.Environment([],void 0);var a=(n(9)(o),s.webpackDependencies||(s.webpackDependencies={}));a["userdashboard/base-widget"]=n(63),a["include/macros.html"]=n(23);var r=n(10);!function(){(s.nunjucksPrecompiled=s.nunjucksPrecompiled||{})["cosinnus/templates/cosinnus/universal/userdashboard/followed-objects-widget.html"]=function(){function t(t,e,n,o,s){var a=null,r=null,i="";try{var l=null;t.getTemplate("userdashboard/base-widget",!0,"cosinnus/templates/cosinnus/universal/userdashboard/followed-objects-widget.html",!1,function(a,r){if(a)return void s(a);l=r;for(var u in l.blocks)e.addBlock(u,l.blocks[u]);i+="\n",t.getTemplate("include/macros.html",!1,"cosinnus/templates/cosinnus/universal/userdashboard/followed-objects-widget.html",!1,function(a,r){return a?void s(a):void r.getExported(function(a,r){return a?void s(a):(e.setVariable("macros",r),i+="\n\n",void(l?function(t,e,n,o,s){s("")}:e.getBlock("title"))(t,e,n,o,function(a,r){return a?void s(a):(i+=r,i+="\n\n",void(l?function(t,e,n,o,s){s("")}:e.getBlock("content"))(t,e,n,o,function(a,r){return a?void s(a):(i+=r,void(l?l.rootRenderFunc(t,e,n,o,s):s(null,i)))}))}))})})})}catch(t){s(o.handleError(t,a,r))}}function e(t,e,n,o,s){var a=null,r=null,i="";try{i+="\n    ",i+="\n\t",i+=o.suppressValue(t.getExtension("translation").run(e,"Items you follow"),t.opts.autoescape),i+="\n",s(null,i)}catch(t){s(o.handleError(t,a,r))}}function n(t,e,n,o,s){var a=null,r=null,i="";try{if(i+="\n    ",t.getFilter("length").call(e,o.contextOrFrameLookup(e,n,"items"))>0){i+='\n        <ul class="item-list">\n            ',n=n.push();var l=o.contextOrFrameLookup(e,n,"items");if(l)for(var u=l.length,c=0;c<l.length;c++){var p=l[c];n.set("item",p),n.set("loop.index",c+1),n.set("loop.index0",c),n.set("loop.revindex",u-c),n.set("loop.revindex0",u-c-1),n.set("loop.first",0===c),n.set("loop.last",c===u-1),n.set("loop.length",u),i+="\n            ",i+=o.suppressValue((a=12,r=36,o.callWrap(o.memberLookup(o.contextOrFrameLookup(e,n,"macros"),"followedlistItem"),'macros["followedlistItem"]',e,[p])),t.opts.autoescape),i+="\n            "}n=n.pop(),i+="\n\t\t</ul>\n\t"}else i+='\n\t<div class="widget-info-box no-select">\n        ',i+="\n\t\t",i+=o.suppressValue(t.getExtension("translation").run(e,"Nothing here yet."),t.opts.autoescape),i+="\n\t</div>\n    ";i+="\n",s(null,i)}catch(t){s(o.handleError(t,a,r))}}return{b_title:e,b_content:n,root:t}}()}(),t.exports=r(s,o,s.nunjucksPrecompiled["cosinnus/templates/cosinnus/universal/userdashboard/followed-objects-widget.html"],a)},function(t,e,n){"use strict";var o=n(54),s=n(5);t.exports=o.extend({app:null,template:n(73),fetchURL:"/dashboard/api/user_typed_content/recent/",defaults:{type:null,isMovable:!0,isHidable:!1,loadMoreEnabled:!0,state:{sortIndex:0}},events:{"click .sort-up":"onMoveUpClicked","click .sort-down":"onMoveDownClicked","click .show-more":"onShowMoreClicked"},initialize:function(t,e){var n=this;n.app=e,o.prototype.initialize.call(n,t),n.options.type=t.type,n.state.sortIndex=t.sortIndex},getWidgetId:function(){return this.type+"-content-widget"},getParamsForFetchRequest:function(){var t=this,e=o.prototype.getParamsForFetchRequest.call(t);return{urlSuffix:this.options.type,urlParams:e.urlParams}},onMoveUpClicked:function(t){var e=this;App.userDashboardView.moveRightSideWidget(e.options.type,!0)},onMoveDownClicked:function(t){var e=this;App.userDashboardView.moveRightSideWidget(e.options.type,!1)},render:function(){var t=this;return o.prototype.render.call(t),s.log("# ## Rendered widget "+t.widgetId),t.widgetData&&t.widgetData.items&&0==t.widgetData.items.length&&t.$el.remove(),t.state.errorResponseText&&t.state.errorResponseText.startsWith("Unknown content type supplied")&&t.$el.remove(),t},getTemplateData:function(){var t=this,e=o.prototype.getTemplateData.call(t);return e}})},function(t,e,n){var o,s=n(8);o=s.currentEnv?s.currentEnv:s.currentEnv=new s.Environment([],void 0);var a=(n(9)(o),s.webpackDependencies||(s.webpackDependencies={}));a["userdashboard/base-widget"]=n(63),a["include/macros.html"]=n(23);var r=n(10);!function(){(s.nunjucksPrecompiled=s.nunjucksPrecompiled||{})["cosinnus/templates/cosinnus/universal/userdashboard/typed-content-widget.html"]=function(){function t(t,e,n,o,s){var a=null,r=null,i="";try{var l=null;t.getTemplate("userdashboard/base-widget",!0,"cosinnus/templates/cosinnus/universal/userdashboard/typed-content-widget.html",!1,function(a,r){if(a)return void s(a);l=r;for(var u in l.blocks)e.addBlock(u,l.blocks[u]);i+="\n",t.getTemplate("include/macros.html",!1,"cosinnus/templates/cosinnus/universal/userdashboard/typed-content-widget.html",!1,function(a,r){return a?void s(a):void r.getExported(function(a,r){return a?void s(a):(e.setVariable("macros",r),i+="\n\n",void(l?function(t,e,n,o,s){s("")}:e.getBlock("attrs"))(t,e,n,o,function(a,r){return a?void s(a):(i+=r,i+="\n\n",void(l?function(t,e,n,o,s){s("")}:e.getBlock("title"))(t,e,n,o,function(a,r){return a?void s(a):(i+=r,i+="\n\n\n",void(l?l.rootRenderFunc(t,e,n,o,s):s(null,i)))}))}))})})})}catch(t){s(o.handleError(t,a,r))}}function e(t,e,n,o,s){var a=null,r=null,i="";try{i+='data-sort-index="',i+=o.suppressValue(o.contextOrFrameLookup(e,n,"sortIndex"),t.opts.autoescape),i+='" data-content-type="',i+=o.suppressValue(o.contextOrFrameLookup(e,n,"type"),t.opts.autoescape),i+='"',s(null,i)}catch(t){s(o.handleError(t,a,r))}}function n(t,e,n,o,s){var a=null,r=null,i="";try{i+="\n    ",i+=o.suppressValue(o.contextOrFrameLookup(e,n,"widget_title"),t.opts.autoescape),i+="\n",s(null,i)}catch(t){s(o.handleError(t,a,r))}}return{b_attrs:e,b_title:n,root:t}}()}(),t.exports=r(s,o,s.nunjucksPrecompiled["cosinnus/templates/cosinnus/universal/userdashboard/typed-content-widget.html"],a)},function(t,e,n){"use strict";n(5);t.exports=Backbone.View.extend({uiPrefs:null,fetchUrl:"/dashboard/api/save_ui_prefs/",initialize:function(t){var e=this;Backbone.View.prototype.initialize.call(e),$("body").on("click",'[data-target="ui-pref"]',e.onUiPrefLinkClicked.bind(this)),e.uiPrefs=t},getUiPref:function(t){return t in this.uiPrefs?this.uiPrefs[t]:null},saveUiPrefs:function(t){var e=this.fetchUrl;return $.extend(!0,self.uiPrefs,t),new Promise(function(n,o){$.ajax(e,{type:"POST",timeout:15e3,data:t,success:function(t,e,s){200==s.status?n():o(s.statusText)},error:function(t,e){o(t.statusText)}})})},onUiPrefLinkClicked:function(t){var e={},n=$(t.target);if(n.is('[data-target="ui-pref"]')||(n=n.parents('[data-target="ui-pref"]')),n.is('[data-target="ui-pref"]')){e[n.attr("data-ui-pref")]=n.attr("data-ui-pref-value"),this.saveUiPrefs(e);var o=n.attr("data-hide-after");o&&$(o).fadeOut()}}})}]);